import{S as e,i as t,s as a,a as o,z as l,g as r,k as n,n as s,f as c,G as i,e as f,t as d,c as h,b as p,d as u,h as g,j as m,l as v,y as b,H as I,I as j,J as S,K as A,L as E}from"./index.bdc8af7b.js";function F(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.i=a,o}function N(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.count=t[a].count,o.i=a,o}function x(e){let t,a,l,s,i,m,j,S,x,P,G,O,T,D,V,_,J,U,w,z,L,B,Y,$,H,K,q,Q,R,W=Math.round(e.calories)+"",X=Math.round(e.protein)+"",Z=Math.round(e.carbs)+"",ee=Math.round(e.fat)+"",te=e.isGoal&&C(e),ae=e.foodIAte,oe=[];for(let t=0;t<ae.length;t+=1)oe[t]=M(N(e,ae,t));let le=e.food.length>=10&&k(e),re=e.filteredFood,ne=[];for(let t=0;t<re.length;t+=1)ne[t]=y(F(e,re,t));return{c(){t=f("button"),a=d("Clear"),l=o(),s=f("a"),i=d("Update"),m=o(),te&&te.c(),j=o(),S=f("div"),x=f("span"),P=d("Cal: "),G=d(W),O=o(),T=f("span"),D=d("Pro:"),V=d(X),_=o(),J=f("span"),U=d("Car:"),w=d(Z),z=o(),L=f("span"),B=d("Fat:"),Y=d(ee),$=o(),H=f("div");for(let e=0;e<oe.length;e+=1)oe[e].c();K=o(),le&&le.c(),q=o(),Q=f("div");for(let e=0;e<ne.length;e+=1)ne[e].c();this.h()},l(e){t=h(e,"BUTTON",{class:!0});var o=p(t);a=u(o,"Clear"),o.forEach(c),l=r(e),s=h(e,"A",{class:!0,style:!0,href:!0});var n=p(s);i=u(n,"Update"),n.forEach(c),m=r(e),te&&te.l(e),j=r(e),S=h(e,"DIV",{class:!0});var f=p(S);x=h(f,"SPAN",{class:!0});var d=p(x);P=u(d,"Cal: "),G=u(d,W),d.forEach(c),O=r(f),T=h(f,"SPAN",{class:!0});var g=p(T);D=u(g,"Pro:"),V=u(g,X),g.forEach(c),_=r(f),J=h(f,"SPAN",{class:!0});var v=p(J);U=u(v,"Car:"),w=u(v,Z),v.forEach(c),z=r(f),L=h(f,"SPAN",{class:!0});var b=p(L);B=u(b,"Fat:"),Y=u(b,ee),b.forEach(c),f.forEach(c),$=r(e),H=h(e,"DIV",{class:!0});var I=p(H);for(let e=0;e<oe.length;e+=1)oe[e].l(I);I.forEach(c),K=r(e),le&&le.l(e),q=r(e),Q=h(e,"DIV",{class:!0,style:!0});var A=p(Q);for(let e=0;e<ne.length;e+=1)ne[e].l(A);A.forEach(c),this.h()},h(){g(t,"class","clear svelte-fpg42j"),g(s,"class","update svelte-fpg42j"),A(s,"clear","both"),g(s,"href","/food/update"),g(x,"class","svelte-fpg42j"),g(T,"class","svelte-fpg42j"),g(J,"class","svelte-fpg42j"),g(L,"class","svelte-fpg42j"),g(S,"class","total svelte-fpg42j"),g(H,"class","ate-wrapper svelte-fpg42j"),g(Q,"class","wrapper svelte-fpg42j"),A(Q,"grid-template-columns",e.columns),A(Q,"margin-top",(e.food.length>=10?0:20)+"px"),R=I(t,"click",e.handleClear)},m(e,o){n(e,t,o),v(t,a),n(e,l,o),n(e,s,o),v(s,i),n(e,m,o),te&&te.m(e,o),n(e,j,o),n(e,S,o),v(S,x),v(x,P),v(x,G),v(S,O),v(S,T),v(T,D),v(T,V),v(S,_),v(S,J),v(J,U),v(J,w),v(S,z),v(S,L),v(L,B),v(L,Y),n(e,$,o),n(e,H,o);for(let e=0;e<oe.length;e+=1)oe[e].m(H,null);n(e,K,o),le&&le.m(e,o),n(e,q,o),n(e,Q,o);for(let e=0;e<ne.length;e+=1)ne[e].m(Q,null)},p(e,t){if(t.isGoal?te?te.p(e,t):((te=C(t)).c(),te.m(j.parentNode,j)):te&&(te.d(1),te=null),e.calories&&W!==(W=Math.round(t.calories)+"")&&b(G,W),e.protein&&X!==(X=Math.round(t.protein)+"")&&b(V,X),e.carbs&&Z!==(Z=Math.round(t.carbs)+"")&&b(w,Z),e.fat&&ee!==(ee=Math.round(t.fat)+"")&&b(Y,ee),e.foodIAte){let a;for(ae=t.foodIAte,a=0;a<ae.length;a+=1){const o=N(t,ae,a);oe[a]?oe[a].p(e,o):(oe[a]=M(o),oe[a].c(),oe[a].m(H,null))}for(;a<oe.length;a+=1)oe[a].d(1);oe.length=ae.length}if(t.food.length>=10?le?le.p(e,t):((le=k(t)).c(),le.m(q.parentNode,q)):le&&(le.d(1),le=null),e.handleFoodClick||e.food||e.filteredFood){let a;for(re=t.filteredFood,a=0;a<re.length;a+=1){const o=F(t,re,a);ne[a]?ne[a].p(e,o):(ne[a]=y(o),ne[a].c(),ne[a].m(Q,null))}for(;a<ne.length;a+=1)ne[a].d(1);ne.length=re.length}e.columns&&A(Q,"grid-template-columns",t.columns),e.food&&A(Q,"margin-top",(t.food.length>=10?0:20)+"px")},d(e){e&&c(t),e&&c(l),e&&c(s),e&&c(m),te&&te.d(e),e&&c(j),e&&c(S),e&&c($),e&&c(H),E(oe,e),e&&c(K),le&&le.d(e),e&&c(q),e&&c(Q),E(ne,e),R()}}}function P(e){let t,a,l,i,m,b,I;return{c(){t=f("p"),a=d("You have no food."),l=o(),i=f("p"),m=f("a"),b=d("Add some food first"),I=d("."),this.h()},l(e){t=h(e,"P",{});var o=p(t);a=u(o,"You have no food."),o.forEach(c),l=r(e),i=h(e,"P",{});var n=p(i);m=h(n,"A",{href:!0});var s=p(m);b=u(s,"Add some food first"),s.forEach(c),I=u(n,"."),n.forEach(c),this.h()},h(){g(m,"href","/food/manage-food/add-food")},m(e,o){n(e,t,o),v(t,a),n(e,l,o),n(e,i,o),v(i,m),v(m,b),v(i,I)},p:s,d(e){e&&c(t),e&&c(l),e&&c(i)}}}function C(e){let t,a,l,s,i,I,j,S,A,E,F=Math.round(e.goal-e.calories)+"";return{c(){t=f("div"),a=f("span"),l=d("Goal: "),s=d(e.goal),i=o(),I=f("span"),j=d("Left:"),S=f("span"),A=d(F),this.h()},l(o){t=h(o,"DIV",{class:!0});var n=p(t);a=h(n,"SPAN",{class:!0});var f=p(a);l=u(f,"Goal: "),s=u(f,e.goal),f.forEach(c),i=r(n),I=h(n,"SPAN",{class:!0});var d=p(I);j=u(d,"Left:"),d.forEach(c),S=h(n,"SPAN",{class:!0});var g=p(S);A=u(g,F),g.forEach(c),n.forEach(c),this.h()},h(){g(a,"class","svelte-fpg42j"),g(I,"class","svelte-fpg42j"),g(S,"class",E=m(e.remaining)+" svelte-fpg42j"),g(t,"class","goal svelte-fpg42j")},m(e,o){n(e,t,o),v(t,a),v(a,l),v(a,s),v(t,i),v(t,I),v(I,j),v(t,S),v(S,A)},p(e,t){e.goal&&b(s,t.goal),(e.goal||e.calories)&&F!==(F=Math.round(t.goal-t.calories)+"")&&b(A,F),e.remaining&&E!==(E=m(t.remaining)+" svelte-fpg42j")&&g(S,"class",E)},d(e){e&&c(t)}}}function M(e){let t,a,o,l,r=e.name+"",s=e.count+"";return{c(){t=f("div"),a=d(r),o=f("div"),l=d(s),this.h()},l(e){t=h(e,"DIV",{class:!0});var n=p(t);a=u(n,r),n.forEach(c),o=h(e,"DIV",{class:!0});var i=p(o);l=u(i,s),i.forEach(c),this.h()},h(){g(t,"class","ate-box svelte-fpg42j"),g(o,"class","ate-box svelte-fpg42j")},m(e,r){n(e,t,r),v(t,a),n(e,o,r),v(o,l)},p(e,t){e.foodIAte&&r!==(r=t.name+"")&&b(a,r),e.foodIAte&&s!==(s=t.count+"")&&b(l,s)},d(e){e&&c(t),e&&c(o)}}}function k(e){let t,a;return{c(){t=f("input"),this.h()},l(e){t=h(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),this.h()},h(){g(t,"class","filter svelte-fpg42j"),g(t,"type","text"),g(t,"placeholder","Search"),g(t,"maxlength","5"),g(t,"size","3"),a=[I(t,"input",e.input_input_handler),I(t,"input",e.handleFilter)]},m(a,o){n(a,t,o),j(t,e.filter)},p(e,a){e.filter&&t.value!==a.filter&&j(t,a.filter)},d(e){e&&c(t),S(a)}}}function y(e){let t,a,o,l=e.name+"";function r(...t){return e.click_handler(e,...t)}return{c(){t=f("button"),a=d(l),this.h()},l(e){t=h(e,"BUTTON",{class:!0});var o=p(t);a=u(o,l),o.forEach(c),this.h()},h(){g(t,"class","box svelte-fpg42j"),o=I(t,"click",r)},m(e,o){n(e,t,o),v(t,a)},p(t,o){e=o,t.filteredFood&&l!==(l=e.name+"")&&b(a,l)},d(e){e&&c(t),o()}}}function G(e){let t,a;function i(e,t){return 0===t.food.length?P:x}let f=i(0,e),d=f(e);return{c(){t=o(),d.c(),a=l(),this.h()},l(e){t=r(e),d.l(e),a=l(),this.h()},h(){document.title="Eat"},m(e,o){n(e,t,o),d.m(e,o),n(e,a,o)},p(e,t){f===(f=i(0,t))&&d?d.p(e,t):(d.d(1),(d=f(t))&&(d.c(),d.m(a.parentNode,a)))},i:s,o:s,d(e){e&&c(t),d.d(e),e&&c(a)}}}function O(e,t,a){let o=!1,l="50% 50%",r=!1,n=2e3,s=[],c=[],f=0,d=0,h=0,p="",u=[];function g(e){a("filteredFood",u=c),a("filter",p="");let t=s.findIndex(t=>t.name===e.name);-1===t?(e.count=1,a("foodIAte",s=[...s,e])):a("foodIAte",s[t].count=s[t].count+1,s),localStorage.setItem("ate",JSON.stringify(s)),m()}i(async()=>{o="true"===(o=localStorage.getItem("firstTime")||"true"),a("isGoal",r=localStorage.getItem("isGoal")||!1),a("goal",n=localStorage.getItem("goal")||2e3),a("columns",l=localStorage.getItem("columns")||"50% 50%"),a("food",c=JSON.parse(localStorage.getItem("food"))||[]),a("filteredFood",u=c),a("foodIAte",s=JSON.parse(localStorage.getItem("ate"))||[]),o&&0===c.length?(console.log("first time and no food"),a("food",c=[{name:"cup milk 2%",protein:5,carbs:6,fat:7},{name:"cup oatmeal",protein:6,carbs:7.3,fat:7.2},{name:"egg",protein:6,carbs:0,fat:7.2},{name:"100g chicken breast",protein:20,carbs:3.2,fat:5.1},{name:"100g brown rice",protein:4,carbs:6.8,fat:4.7},{name:"100g japanese yams",protein:4,carbs:6.8,fat:4.7},{name:"avocado",protein:4,carbs:6.8,fat:4.7},{name:"olive oil",protein:2,carbs:3.8,fat:8},{name:"apple",protein:1,carbs:5.8,fat:3},{name:"cottage cheese",protein:1,carbs:5.8,fat:3}]),localStorage.setItem("firstTime","false"),localStorage.setItem("food",JSON.stringify(c)),a("filteredFood",u=c)):console.log("not first time or food exist"),m()});const m=e=>{a("protein",f=s.reduce(function(e,t){return e+t.protein*t.count},0)),a("carbs",d=s.reduce(function(e,t){return e+t.carbs*t.count},0)),a("fat",h=s.reduce(function(e,t){return e+t.fat*t.count},0))};let v,b;return e.$$.update=((e={protein:1,carbs:1,fat:1,goal:1,calories:1})=>{(e.protein||e.carbs||e.fat)&&a("calories",b=parseFloat(Number(4*f+4*d+9*h).toFixed(1))),(e.goal||e.calories)&&a("remaining",v=n-b<=0?"remaining":"")}),{columns:l,isGoal:r,goal:n,foodIAte:s,food:c,protein:f,carbs:d,fat:h,filter:p,filteredFood:u,handleFoodClick:g,handleClear:function(){localStorage.removeItem("ate"),a("protein",f=0),a("carbs",d=0),a("fat",h=0),a("foodIAte",s=[])},handleFilter:function(){""===p&&a("filteredFood",u=c),a("filteredFood",u=c.filter(e=>e.name.includes(p)))},remaining:v,calories:b,input_input_handler:function(){p=this.value,a("filter",p)},click_handler:({i:e})=>g(c[e])}}export default class extends e{constructor(e){super(),t(this,e,O,G,a,{})}}
