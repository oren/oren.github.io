import{S as e,i as t,s as a,e as s,t as l,c as n,b as r,d as o,f as i,h as c,k as d,l as u,y as p,a as h,z as f,g as m,n as g,G as v,M as b,H as F,J as M,L as _,K as y}from"./index.491e6785.js";import{v as U}from"./validate.5d897be6.js";function N(e,t,a){const s=Object.create(e);return s.id=t[a].id,s.name=t[a].name,s.i=a,s}function x(e){let t,a;return{c(){t=s("p"),a=l(e.successMessage),this.h()},l(s){t=n(s,"P",{class:!0});var l=r(t);a=o(l,e.successMessage),l.forEach(i),this.h()},h(){c(t,"class","success svelte-1ila79c")},m(e,s){d(e,t,s),u(t,a)},p(e,t){e.successMessage&&p(a,t.successMessage)},d(e){e&&i(t)}}}function P(e){let t,a;return{c(){t=s("p"),a=l(e.errorMessage),this.h()},l(s){t=n(s,"P",{class:!0});var l=r(t);a=o(l,e.errorMessage),l.forEach(i),this.h()},h(){c(t,"class","error svelte-1ila79c")},m(e,s){d(e,t,s),u(t,a)},p(e,t){e.errorMessage&&p(a,t.errorMessage)},d(e){e&&i(t)}}}function I(e){let t,a,s=e.showUpdateForm&&w(e),l=!e.showUpdateForm&&E(e);return{c(){s&&s.c(),t=h(),l&&l.c(),a=f()},l(e){s&&s.l(e),t=m(e),l&&l.l(e),a=f()},m(e,n){s&&s.m(e,n),d(e,t,n),l&&l.m(e,n),d(e,a,n)},p(e,n){n.showUpdateForm?s?s.p(e,n):((s=w(n)).c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),n.showUpdateForm?l&&(l.d(1),l=null):l?l.p(e,n):((l=E(n)).c(),l.m(a.parentNode,a))},d(e){s&&s.d(e),e&&i(t),l&&l.d(e),e&&i(a)}}}function k(e){let t,a,p,h,f,m,v;return{c(){t=s("p"),a=l("You have no food."),p=s("p"),h=s("p"),f=s("a"),m=l("Add some food first"),v=l("."),this.h()},l(e){t=n(e,"P",{});var s=r(t);a=o(s,"You have no food."),s.forEach(i),p=n(e,"P",{}),r(p).forEach(i),h=n(e,"P",{});var l=r(h);f=n(l,"A",{href:!0});var c=r(f);m=o(c,"Add some food first"),c.forEach(i),v=o(l,"."),l.forEach(i),this.h()},h(){c(f,"href","/food/manage-food/add-food")},m(e,s){d(e,t,s),u(t,a),d(e,p,s),d(e,h,s),u(h,f),u(f,m),u(h,v)},p:g,d(e){e&&i(t),e&&i(p),e&&i(h)}}}function w(e){let t,a,l,o,p,f,g,v,b,y,U,N,x,P,I,k,w,E,T=!1,z=!1,O=!1;function B(){T=!0,e.input1_input_handler.call(f)}function C(){z=!0,e.input2_input_handler.call(y)}function R(){O=!0,e.input3_input_handler.call(P)}let J="update"===e.mode&&S(e);return{c(){t=s("form"),a=s("input"),l=h(),o=s("br"),p=h(),f=s("input"),g=h(),v=s("br"),b=h(),y=s("input"),U=h(),N=s("br"),x=h(),P=s("input"),I=h(),k=s("br"),w=h(),J&&J.c(),this.h()},l(e){t=n(e,"FORM",{});var s=r(t);a=n(s,"INPUT",{type:!0,placeholder:!0,maxlength:!0,size:!0,class:!0}),l=m(s),o=n(s,"BR",{}),p=m(s),f=n(s,"INPUT",{type:!0,placeholder:!0,min:!0,max:!0,class:!0}),g=m(s),v=n(s,"BR",{}),b=m(s),y=n(s,"INPUT",{type:!0,placeholder:!0,min:!0,max:!0,class:!0}),U=m(s),N=n(s,"BR",{}),x=m(s),P=n(s,"INPUT",{type:!0,placeholder:!0,min:!0,max:!0,class:!0}),I=m(s),k=n(s,"BR",{}),w=m(s),J&&J.l(s),s.forEach(i),this.h()},h(){c(a,"type","text"),c(a,"placeholder","Name"),c(a,"maxlength","20"),c(a,"size","20"),c(a,"class","svelte-1ila79c"),c(f,"type","number"),c(f,"placeholder","Protein"),c(f,"min","0"),c(f,"max","999"),c(f,"class","svelte-1ila79c"),c(y,"type","number"),c(y,"placeholder","Carbs"),c(y,"min","0"),c(y,"max","999"),c(y,"class","svelte-1ila79c"),c(P,"type","number"),c(P,"placeholder","Fat"),c(P,"min","0"),c(P,"max","999"),c(P,"class","svelte-1ila79c"),E=[F(a,"input",e.input0_input_handler),F(f,"input",B),F(f,"keyup",e.validateProtein),F(y,"input",C),F(y,"keyup",e.validateCarbs),F(P,"input",R),F(P,"keyup",e.validateFat)]},m(s,n){d(s,t,n),u(t,a),M(a,e.name),u(t,l),u(t,o),u(t,p),u(t,f),M(f,e.protein),u(t,g),u(t,v),u(t,b),u(t,y),M(y,e.carbs),u(t,U),u(t,N),u(t,x),u(t,P),M(P,e.fat),u(t,I),u(t,k),u(t,w),J&&J.m(t,null)},p(e,s){e.name&&a.value!==s.name&&M(a,s.name),!T&&e.protein&&M(f,s.protein),T=!1,!z&&e.carbs&&M(y,s.carbs),z=!1,!O&&e.fat&&M(P,s.fat),O=!1,"update"===s.mode?J?J.p(e,s):((J=S(s)).c(),J.m(t,null)):J&&(J.d(1),J=null)},d(e){e&&i(t),J&&J.d(),_(E)}}}function S(e){let t,a,l,r;return{c(){t=s("input"),a=h(),l=s("input"),this.h()},l(e){t=n(e,"INPUT",{class:!0,type:!0,value:!0,maxlength:!0,size:!0}),a=m(e),l=n(e,"INPUT",{type:!0,value:!0,class:!0}),this.h()},h(){c(t,"class","update svelte-1ila79c"),c(t,"type","button"),t.value="Update",c(t,"maxlength","2"),c(t,"size","2"),c(l,"type","button"),l.value="delete",c(l,"class","svelte-1ila79c"),r=[F(t,"click",e.handleUpdate),F(l,"click",e.handleDelete)]},m(e,s){d(e,t,s),d(e,a,s),d(e,l,s)},p:g,d(e){e&&i(t),e&&i(a),e&&i(l),_(r)}}}function E(e){let t,a,l,o,u=e.filteredFood,p=[];for(let t=0;t<u.length;t+=1)p[t]=T(N(e,u,t));return{c(){t=s("input"),a=h(),l=s("div");for(let e=0;e<p.length;e+=1)p[e].c();this.h()},l(e){t=n(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),a=m(e),l=n(e,"DIV",{class:!0});var s=r(l);for(let e=0;e<p.length;e+=1)p[e].l(s);s.forEach(i),this.h()},h(){c(t,"class","filter svelte-1ila79c"),c(t,"type","text"),c(t,"placeholder","Search"),c(t,"maxlength","5"),c(t,"size","3"),c(l,"class","wrapper svelte-1ila79c"),o=[F(t,"input",e.input_input_handler),F(t,"input",e.handleFilter)]},m(s,n){d(s,t,n),M(t,e.filter),d(s,a,n),d(s,l,n);for(let e=0;e<p.length;e+=1)p[e].m(l,null)},p(e,a){if(e.filter&&t.value!==a.filter&&M(t,a.filter),e.handleFoodClick||e.food||e.filteredFood){let t;for(u=a.filteredFood,t=0;t<u.length;t+=1){const s=N(a,u,t);p[t]?p[t].p(e,s):(p[t]=T(s),p[t].c(),p[t].m(l,null))}for(;t<p.length;t+=1)p[t].d(1);p.length=u.length}},d(e){e&&i(t),e&&i(a),e&&i(l),y(p,e),_(o)}}}function T(e){let t,a,h,f=e.name+"";function m(...t){return e.click_handler(e,...t)}return{c(){t=s("button"),a=l(f),this.h()},l(e){t=n(e,"BUTTON",{class:!0});var s=r(t);a=o(s,f),s.forEach(i),this.h()},h(){c(t,"class","box svelte-1ila79c"),h=F(t,"click",m)},m(e,s){d(e,t,s),u(t,a)},p(t,s){e=s,t.filteredFood&&f!==(f=e.name+"")&&p(a,f)},d(e){e&&i(t),h()}}}function z(e){let t,a,c,p,v,b,F,M=""!==e.successMessage&&x(e),_=""!==e.errorMessage&&P(e);function y(e,t){return 0===t.food.length?k:I}let U=y(0,e),N=U(e);return{c(){t=h(),a=s("h2"),c=l("Update Food"),p=h(),M&&M.c(),v=h(),_&&_.c(),b=h(),N.c(),F=f(),this.h()},l(e){t=m(e),a=n(e,"H2",{});var s=r(a);c=o(s,"Update Food"),s.forEach(i),p=m(e),M&&M.l(e),v=m(e),_&&_.l(e),b=m(e),N.l(e),F=f(),this.h()},h(){document.title="Food"},m(e,s){d(e,t,s),d(e,a,s),u(a,c),d(e,p,s),M&&M.m(e,s),d(e,v,s),_&&_.m(e,s),d(e,b,s),N.m(e,s),d(e,F,s)},p(e,t){""!==t.successMessage?M?M.p(e,t):((M=x(t)).c(),M.m(v.parentNode,v)):M&&(M.d(1),M=null),""!==t.errorMessage?_?_.p(e,t):((_=P(t)).c(),_.m(b.parentNode,b)):_&&(_.d(1),_=null),U===(U=y(0,t))&&N?N.p(e,t):(N.d(1),(N=U(t))&&(N.c(),N.m(F.parentNode,F)))},i:g,o:g,d(e){e&&i(t),e&&i(a),e&&i(p),M&&M.d(e),e&&i(v),_&&_.d(e),e&&i(b),N.d(e),e&&i(F)}}}function O(e,t,a){let s="",l="",n="",r="",o=[],i="add",c="",d="",u="",p=!1,h="",f=[];function m(e){a("filteredFood",f=e),a("filter",h=""),a("showUpdateForm",p=!0),a("successMessage",u=""),a("errorMessage",d=""),c=e.name,a("name",s=e.name),a("protein",l=e.protein),a("carbs",n=e.carbs),a("fat",r=e.fat),a("mode",i="update")}v(async()=>{a("food",o=JSON.parse(localStorage.getItem("food"))||[]),a("filteredFood",f=o)});return{name:s,protein:l,carbs:n,fat:r,food:o,mode:i,errorMessage:d,successMessage:u,showUpdateForm:p,filter:h,filteredFood:f,handleUpdate:function(){a("filteredFood",f=o),a("filter",h="");let e={};if(a("successMessage",u=""),a("errorMessage",d=""),!(e=U({name:s,protein:l,carbs:n,fat:r})).valid)return void a("errorMessage",d=e.message);let t=o.findIndex(e=>e.name===c);a("food",o[t].name=s,o),a("food",o[t].protein=l,o),a("food",o[t].carbs=n,o),a("food",o[t].fat=r,o),localStorage.setItem("food",JSON.stringify(o)),a("successMessage",u="Food was updated"),a("showUpdateForm",p=!1)},handleFoodClick:m,handleDelete:function(){a("filteredFood",f=o),a("filter",h=""),a("successMessage",u=""),a("errorMessage",d="");let e=o.filter(function(e,t,a){return e.name!==s});localStorage.setItem("food",JSON.stringify(e)),a("food",o=e),a("mode",i="add"),a("name",s=""),a("protein",l=""),a("carbs",n=""),a("fat",r=""),a("successMessage",u="Food was deleted"),a("showUpdateForm",p=!1)},handleFilter:function(){""===h&&a("filteredFood",f=o),a("filteredFood",f=o.filter(e=>e.name.includes(h)))},validateProtein:function(){let e=String(l);a("protein",l=Number(e.substring(0,5)))},validateCarbs:function(){let e=String(n);a("carbs",n=Number(e.substring(0,5)))},validateFat:function(){let e=String(r);a("fat",r=Number(e.substring(0,5)))},input0_input_handler:function(){s=this.value,a("name",s)},input1_input_handler:function(){l=b(this.value),a("protein",l)},input2_input_handler:function(){n=b(this.value),a("carbs",n)},input3_input_handler:function(){r=b(this.value),a("fat",r)},input_input_handler:function(){h=this.value,a("filter",h)},click_handler:({i:e})=>m(o[e])}}export default class extends e{constructor(e){super(),t(this,e,O,z,a,{})}}
