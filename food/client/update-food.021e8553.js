import{S as e,i as t,s as a,e as s,t as o,b as r,d as n,f as l,h as i,k as c,l as d,m as f,x as u,a as h,y as p,j as m,q as g,E as v,p as F,N as b,D as x,T as w,c as N,g as M,P as _,Q as y,U,o as I,r as S,R as E,V as $,I as k,n as O}from"./index.9cf44aa4.js";import{I as P,t as T}from"./index.e287424e.js";import{v as D}from"./validate.d747abc5.js";function J(e,t,a){const s=Object.create(e);return s.id=t[a].id,s.name=t[a].name,s.i=a,s}function C(e){let t,a;return{c(){t=s("p"),a=o(e.successMessage),this.h()},l(s){t=r(s,"P",{class:!0});var o=n(t);a=l(o,e.successMessage),o.forEach(i),this.h()},h(){c(t,"class","success svelte-doi45w")},m(e,s){d(e,t,s),f(t,a)},p(e,t){e.successMessage&&u(a,t.successMessage)},d(e){e&&i(t)}}}function V(e){let t,a;return{c(){t=s("p"),a=o(e.errorMessage),this.h()},l(s){t=r(s,"P",{class:!0});var o=n(t);a=l(o,e.errorMessage),o.forEach(i),this.h()},h(){c(t,"class","error svelte-doi45w")},m(e,s){d(e,t,s),f(t,a)},p(e,t){e.errorMessage&&u(a,t.errorMessage)},d(e){e&&i(t)}}}function j(e){let t,a,s,o=e.showUpdateForm&&z(e),r=!e.showUpdateForm&&A(e);return{c(){o&&o.c(),t=h(),r&&r.c(),a=p()},l(e){o&&o.l(e),t=m(e),r&&r.l(e),a=p()},m(e,n){o&&o.m(e,n),d(e,t,n),r&&r.m(e,n),d(e,a,n),s=!0},p(e,s){s.showUpdateForm?o?(o.p(e,s),F(o,1)):((o=z(s)).c(),F(o,1),o.m(t.parentNode,t)):o&&(x(),g(o,1,1,()=>{o=null}),v()),s.showUpdateForm?r&&(x(),g(r,1,1,()=>{r=null}),v()):r?(r.p(e,s),F(r,1)):((r=A(s)).c(),F(r,1),r.m(a.parentNode,a))},i(e){s||(F(o),F(r),s=!0)},o(e){g(o),g(r),s=!1},d(e){o&&o.d(e),e&&i(t),r&&r.d(e),e&&i(a)}}}function B(e){let t,a,u,h,p,m,g;return{c(){t=s("p"),a=o("You have no food."),u=s("p"),h=s("p"),p=s("a"),m=o("Add some food first"),g=o("."),this.h()},l(e){t=r(e,"P",{});var s=n(t);a=l(s,"You have no food."),s.forEach(i),u=r(e,"P",{}),n(u).forEach(i),h=r(e,"P",{});var o=n(h);p=r(o,"A",{href:!0});var c=n(p);m=l(c,"Add some food first"),c.forEach(i),g=l(o,"."),o.forEach(i),this.h()},h(){c(p,"href","/food/manage-food/add-food")},m(e,s){d(e,t,s),f(t,a),d(e,u,s),d(e,h,s),f(h,p),f(p,m),f(h,g)},p:O,i:O,o:O,d(e){e&&i(t),e&&i(u),e&&i(h)}}}function z(e){let t,a,u,p,v,b,x,w,$,k,O,D,J,C,V,j,B,z,A,L,R=!1,Y=!1,q=!1;function H(){R=!0,e.input1_input_handler.call(b)}function Q(){Y=!0,e.input2_input_handler.call($)}function G(){q=!0,e.input3_input_handler.call(D)}const K=new P({props:{data:T}});return{c(){t=s("form"),a=s("div"),u=s("input"),p=h(),v=s("div"),b=s("input"),x=h(),w=s("div"),$=s("input"),k=h(),O=s("div"),D=s("input"),J=h(),C=s("div"),V=s("button"),j=o("Update"),B=h(),z=s("button"),N(K.$$.fragment),this.h()},l(e){t=r(e,"FORM",{class:!0});var s=n(t);a=r(s,"DIV",{});var o=n(a);u=r(o,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),o.forEach(i),p=m(s),v=r(s,"DIV",{});var c=n(v);b=r(c,"INPUT",{type:!0,placeholder:!0,min:!0,max:!0,class:!0}),c.forEach(i),x=m(s),w=r(s,"DIV",{});var d=n(w);$=r(d,"INPUT",{type:!0,placeholder:!0,min:!0,max:!0,class:!0}),d.forEach(i),k=m(s),O=r(s,"DIV",{});var f=n(O);D=r(f,"INPUT",{type:!0,placeholder:!0,min:!0,max:!0,class:!0}),f.forEach(i),J=m(s),C=r(s,"DIV",{class:!0});var h=n(C);V=r(h,"BUTTON",{class:!0});var g=n(V);j=l(g,"Update"),g.forEach(i),B=m(h),z=r(h,"BUTTON",{class:!0});var F=n(z);M(K.$$.fragment,F),F.forEach(i),h.forEach(i),s.forEach(i),this.h()},h(){c(u,"class"," svelte-doi45w"),c(u,"type","text"),c(u,"placeholder","Name"),c(u,"maxlength","20"),c(u,"size","20"),c(b,"type","number"),c(b,"placeholder","Protein"),c(b,"min","0"),c(b,"max","999"),c(b,"class","svelte-doi45w"),c($,"type","number"),c($,"placeholder","Carbs"),c($,"min","0"),c($,"max","999"),c($,"class","svelte-doi45w"),c(D,"type","number"),c(D,"placeholder","Fat"),c(D,"min","0"),c(D,"max","999"),c(D,"class","svelte-doi45w"),c(V,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3"),c(z,"class","text-red-400 py-1 px-1"),c(C,"class","mt-3"),c(t,"class","svelte-doi45w"),L=[_(u,"input",e.input0_input_handler),_(b,"input",H),_(b,"keyup",e.validateProtein),_($,"input",Q),_($,"keyup",e.validateCarbs),_(D,"input",G),_(D,"keyup",e.validateFat),_(V,"click",y(e.handleUpdate)),_(z,"click",e.handleDelete)]},m(s,o){d(s,t,o),f(t,a),f(a,u),U(u,e.name),f(t,p),f(t,v),f(v,b),U(b,e.protein),f(t,x),f(t,w),f(w,$),U($,e.carbs),f(t,k),f(t,O),f(O,D),U(D,e.fat),f(t,J),f(t,C),f(C,V),f(V,j),f(C,B),f(C,z),I(K,z,null),A=!0},p(e,t){e.name&&u.value!==t.name&&U(u,t.name),!R&&e.protein&&U(b,t.protein),R=!1,!Y&&e.carbs&&U($,t.carbs),Y=!1,!q&&e.fat&&U(D,t.fat),q=!1},i(e){A||(F(K.$$.fragment,e),A=!0)},o(e){g(K.$$.fragment,e),A=!1},d(e){e&&i(t),S(K),E(L)}}}function A(e){let t,a,o,l=e.food.length>=10&&L(e),f=e.filteredFood,u=[];for(let t=0;t<f.length;t+=1)u[t]=R(J(e,f,t));const p=e=>g(u[e],1,1,()=>{u[e]=null});return{c(){l&&l.c(),t=h(),a=s("div");for(let e=0;e<u.length;e+=1)u[e].c();this.h()},l(e){l&&l.l(e),t=m(e),a=r(e,"DIV",{class:!0,style:!0});var s=n(a);for(let e=0;e<u.length;e+=1)u[e].l(s);s.forEach(i),this.h()},h(){c(a,"class","wrapper svelte-doi45w"),$(a,"margin-top",(e.food.length>=10?0:20)+"px")},m(e,s){l&&l.m(e,s),d(e,t,s),d(e,a,s);for(let e=0;e<u.length;e+=1)u[e].m(a,null);o=!0},p(e,s){if(s.food.length>=10?l?l.p(e,s):((l=L(s)).c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),e.handleFoodDelete||e.food||e.trash||e.handleFoodClick||e.filteredFood){let t;for(f=s.filteredFood,t=0;t<f.length;t+=1){const o=J(s,f,t);u[t]?(u[t].p(e,o),F(u[t],1)):(u[t]=R(o),u[t].c(),F(u[t],1),u[t].m(a,null))}for(x(),t=f.length;t<u.length;t+=1)p(t);v()}o&&!e.food||$(a,"margin-top",(s.food.length>=10?0:20)+"px")},i(e){if(!o){for(let e=0;e<f.length;e+=1)F(u[e]);o=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)g(u[e]);o=!1},d(e){l&&l.d(e),e&&i(t),e&&i(a),k(u,e)}}}function L(e){let t,a;return{c(){t=s("input"),this.h()},l(e){t=r(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),this.h()},h(){c(t,"class","filter bg-gray-200 w-24 px-2 svelte-doi45w"),c(t,"type","text"),c(t,"placeholder","Search"),c(t,"maxlength","5"),c(t,"size","3"),a=[_(t,"input",e.input_input_handler),_(t,"input",e.handleFilter)]},m(a,s){d(a,t,s),U(t,e.filter)},p(e,a){e.filter&&t.value!==a.filter&&U(t,a.filter)},d(e){e&&i(t),E(a)}}}function R(e){let t,a,h,p,m,v=e.name+"";function b(...t){return e.click_handler(e,...t)}const x=new P({props:{data:T}});function w(...t){return e.click_handler_1(e,...t)}return{c(){t=s("button"),a=o(v),h=s("button"),N(x.$$.fragment),this.h()},l(e){t=r(e,"BUTTON",{class:!0});var s=n(t);a=l(s,v),s.forEach(i),h=r(e,"BUTTON",{class:!0});var o=n(h);M(x.$$.fragment,o),o.forEach(i),this.h()},h(){c(t,"class","box svelte-doi45w"),c(h,"class","text-red-400"),m=[_(t,"click",b),_(h,"click",y(w))]},m(e,s){d(e,t,s),f(t,a),d(e,h,s),I(x,h,null),p=!0},p(t,s){e=s,p&&!t.filteredFood||v===(v=e.name+"")||u(a,v)},i(e){p||(F(x.$$.fragment,e),p=!0)},o(e){g(x.$$.fragment,e),p=!1},d(e){e&&i(t),e&&i(h),S(x),E(m)}}}function Y(e){let t,a,u,b,w,N,M,_,y,U,I=""!==e.successMessage&&C(e),S=""!==e.errorMessage&&V(e);const E=[B,j],$=[];function k(e,t){return 0===t.food.length?0:1}return M=k(0,e),_=$[M]=E[M](e),{c(){t=h(),a=s("h2"),u=o("Update Food"),b=h(),I&&I.c(),w=h(),S&&S.c(),N=h(),_.c(),y=p(),this.h()},l(e){t=m(e),a=r(e,"H2",{class:!0});var s=n(a);u=l(s,"Update Food"),s.forEach(i),b=m(e),I&&I.l(e),w=m(e),S&&S.l(e),N=m(e),_.l(e),y=p(),this.h()},h(){document.title="Food",c(a,"class","text-xl")},m(e,s){d(e,t,s),d(e,a,s),f(a,u),d(e,b,s),I&&I.m(e,s),d(e,w,s),S&&S.m(e,s),d(e,N,s),$[M].m(e,s),d(e,y,s),U=!0},p(e,t){""!==t.successMessage?I?I.p(e,t):((I=C(t)).c(),I.m(w.parentNode,w)):I&&(I.d(1),I=null),""!==t.errorMessage?S?S.p(e,t):((S=V(t)).c(),S.m(N.parentNode,N)):S&&(S.d(1),S=null);let a=M;(M=k(0,t))===a?$[M].p(e,t):(x(),g($[a],1,1,()=>{$[a]=null}),v(),(_=$[M])||(_=$[M]=E[M](t)).c(),F(_,1),_.m(y.parentNode,y))},i(e){U||(F(_),U=!0)},o(e){g(_),U=!1},d(e){e&&i(t),e&&i(a),e&&i(b),I&&I.d(e),e&&i(w),S&&S.d(e),e&&i(N),$[M].d(e),e&&i(y)}}}function q(e,t,a){let s="",o="",r="",n="",l=[],i="",c="",d="",f=!1,u="",h=[],p=[];function m(e){a("filteredFood",h=e),a("filter",u=""),a("showUpdateForm",f=!0),a("successMessage",d=""),a("errorMessage",c=""),i=e.name,a("name",s=e.name),a("protein",o=e.protein),a("carbs",r=e.carbs),a("fat",n=e.fat)}function g(e){a("filteredFood",h=l),a("filter",u=""),a("successMessage",d=""),a("errorMessage",c="");let t=l.filter(function(t,a,s){return t.name!==e.name});localStorage.setItem("food",JSON.stringify(t)),a("food",l=t),a("filteredFood",h=t),t=p.filter(function(t,a,s){return t.name!==e.name}),localStorage.setItem("recentFood",JSON.stringify(t)),p=t,a("name",s=""),a("protein",o=""),a("carbs",r=""),a("fat",n=""),a("successMessage",d="Food was deleted"),a("showUpdateForm",f=!1)}b(async()=>{a("food",l=JSON.parse(localStorage.getItem("food")).sort((e,t)=>e.name>t.name)||[]),p=JSON.parse(localStorage.getItem("recentFood"))||[],a("filteredFood",h=l)});return{name:s,protein:o,carbs:r,fat:n,food:l,errorMessage:c,successMessage:d,showUpdateForm:f,filter:u,filteredFood:h,handleUpdate:function(){a("filteredFood",h=l),a("filter",u="");let e={};if(a("successMessage",d=""),a("errorMessage",c=""),!(e=D({name:s,protein:o,carbs:r,fat:n})).valid)return void a("errorMessage",c=e.message);let t=l.findIndex(e=>e.name===i);a("food",l[t].name=s,l),a("food",l[t].protein=o,l),a("food",l[t].carbs=r,l),a("food",l[t].fat=n,l),localStorage.setItem("food",JSON.stringify(l)),a("successMessage",d="Food was updated"),a("showUpdateForm",f=!1),-1!==(t=p.findIndex(e=>e.name===i))&&(p[t].name=s,p[t].protein=o,p[t].carbs=r,p[t].fat=n,localStorage.setItem("recentFood",JSON.stringify(p)))},handleFoodClick:m,handleDelete:function(){a("filteredFood",h=l),a("filter",u=""),a("successMessage",d=""),a("errorMessage",c="");let e=l.filter(function(e,t,a){return e.name!==s});localStorage.setItem("food",JSON.stringify(e)),a("food",l=e),e=p.filter(function(e,t,a){return e.name!==s}),localStorage.setItem("recentFood",JSON.stringify(e)),p=e,a("name",s=""),a("protein",o=""),a("carbs",r=""),a("fat",n=""),a("successMessage",d="Food was deleted"),a("showUpdateForm",f=!1)},handleFoodDelete:g,handleFilter:function(){""===u&&a("filteredFood",h=l),a("filteredFood",h=l.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())))},validateProtein:function(){let e=String(o);a("protein",o=Number(e.substring(0,5)))},validateCarbs:function(){let e=String(r);a("carbs",r=Number(e.substring(0,5)))},validateFat:function(){let e=String(n);a("fat",n=Number(e.substring(0,5)))},input0_input_handler:function(){s=this.value,a("name",s)},input1_input_handler:function(){o=w(this.value),a("protein",o)},input2_input_handler:function(){r=w(this.value),a("carbs",r)},input3_input_handler:function(){n=w(this.value),a("fat",n)},input_input_handler:function(){u=this.value,a("filter",u)},click_handler:({i:e})=>m(l[e]),click_handler_1:({i:e})=>g(l[e])}}export default class extends e{constructor(e){super(),t(this,e,q,Y,a,{})}}
