import{S as a,i as e,s as t,e as r,t as s,a as n,b as o,d as l,f as i,h as c,j as f,k as m,O as g,l as d,m as h,x as u,P as p,V as b,U as v,n as S,I as F,R as I,N}from"./index.9cf44aa4.js";function E(a,e,t){const r=Object.create(a);return r.id=e[t].id,r.name=e[t].name,r.i=t,r}function y(a){let e,t,p,b,v,S,F,I,N,E,y,k=Math.round(a.goal-a.calories)+"";return{c(){e=r("div"),t=r("span"),p=s("Goal:"),b=s(a.goal),v=n(),S=r("span"),F=s("Left:"),N=r("span"),E=s(k),this.h()},l(r){e=o(r,"DIV",{});var s=l(e);t=o(s,"SPAN",{class:!0});var n=l(t);p=i(n,"Goal:"),b=i(n,a.goal),n.forEach(c),v=f(s),S=o(s,"SPAN",{class:!0});var m=l(S);F=i(m,"Left:"),m.forEach(c),N=o(s,"SPAN",{class:!0});var g=l(N);E=i(g,k),g.forEach(c),s.forEach(c),this.h()},h(){m(t,"class","svelte-gnmi7a"),m(S,"class",I=g(a.remaining)+" svelte-gnmi7a"),m(N,"class",y=g(a.remaining)+" svelte-gnmi7a")},m(a,r){d(a,e,r),h(e,t),h(t,p),h(t,b),h(e,v),h(e,S),h(S,F),h(e,N),h(N,E)},p(a,e){a.goal&&u(b,e.goal),a.remaining&&I!==(I=g(e.remaining)+" svelte-gnmi7a")&&m(S,"class",I),(a.goal||a.calories)&&k!==(k=Math.round(e.goal-e.calories)+"")&&u(E,k),a.remaining&&y!==(y=g(e.remaining)+" svelte-gnmi7a")&&m(N,"class",y)},d(a){a&&c(e)}}}function k(a){let e,t,n,f=a.name+"";function g(...e){return a.click_handler(a,...e)}return{c(){e=r("button"),t=s(f),this.h()},l(a){e=o(a,"BUTTON",{class:!0});var r=l(e);t=i(r,f),r.forEach(c),this.h()},h(){m(e,"class","bg-blue-100 p-1"),n=p(e,"click",g)},m(a,r){d(a,e,r),h(e,t)},p(e,r){a=r,e.filteredFood&&f!==(f=a.name+"")&&u(t,f)},d(a){a&&c(e),n()}}}function P(a){let e,t,g,N,P,x,A,C,M,L,O,G,T,w,J,_,j,U,V,D,z,$,B,R,q,H,K,Q,W,X,Y,Z,aa,ea,ta=Math.round(a.calories)+"",ra=Math.round(a.protein)+"",sa=Math.round(a.carbs)+"",na=Math.round(a.fat)+"",oa=a.isGoal&&y(a),la=a.filteredFood,ia=[];for(let e=0;e<la.length;e+=1)ia[e]=k(E(a,la,e));return{c(){e=n(),oa&&oa.c(),t=n(),g=r("div"),N=r("span"),P=s("Cal:"),x=s(ta),A=n(),C=r("span"),M=s("P:"),L=s(ra),O=n(),G=r("span"),T=s("C:"),w=s(sa),J=n(),_=r("span"),j=s("F:"),U=s(na),V=n(),D=r("input"),z=n(),$=r("div");for(let a=0;a<ia.length;a+=1)ia[a].c();B=n(),R=r("p"),q=s("(Last 20 items you ate)"),H=n(),K=r("ul"),Q=r("li"),W=r("a"),X=s("Ate Today"),Y=n(),Z=r("li"),aa=s("Choose Food"),this.h()},l(a){e=f(a),oa&&oa.l(a),t=f(a),g=o(a,"DIV",{});var r=l(g);N=o(r,"SPAN",{class:!0});var s=l(N);P=i(s,"Cal:"),x=i(s,ta),s.forEach(c),A=f(r),C=o(r,"SPAN",{class:!0});var n=l(C);M=i(n,"P:"),L=i(n,ra),n.forEach(c),O=f(r),G=o(r,"SPAN",{class:!0});var m=l(G);T=i(m,"C:"),w=i(m,sa),m.forEach(c),J=f(r),_=o(r,"SPAN",{class:!0});var d=l(_);j=i(d,"F:"),U=i(d,na),d.forEach(c),r.forEach(c),V=f(a),D=o(a,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),z=f(a),$=o(a,"DIV",{class:!0});var h=l($);for(let a=0;a<ia.length;a+=1)ia[a].l(h);B=f(h),R=o(h,"P",{class:!0,style:!0});var u=l(R);q=i(u,"(Last 20 items you ate)"),u.forEach(c),h.forEach(c),H=f(a),K=o(a,"UL",{class:!0});var p=l(K);Q=o(p,"LI",{class:!0});var b=l(Q);W=o(b,"A",{href:!0,class:!0});var v=l(W);X=i(v,"Ate Today"),v.forEach(c),b.forEach(c),Y=f(p),Z=o(p,"LI",{class:!0});var S=l(Z);aa=i(S,"Choose Food"),S.forEach(c),p.forEach(c),this.h()},h(){document.title="Eat",m(N,"class","svelte-gnmi7a"),m(C,"class","svelte-gnmi7a"),m(G,"class","svelte-gnmi7a"),m(_,"class","svelte-gnmi7a"),m(D,"class","bg-gray-200 px-2 py-1 mb-2 mt-3 w-1/2"),m(D,"type","text"),m(D,"placeholder","Search"),m(D,"maxlength","5"),m(D,"size","3"),m(R,"class","mt-2 text-center"),b(R,"grid-column","span 2"),m($,"class","wrapper svelte-gnmi7a"),m(W,"href","/food"),m(W,"class","svelte-gnmi7a"),m(Q,"class","first svelte-gnmi7a"),m(Z,"class","second svelte-gnmi7a"),m(K,"class","svelte-gnmi7a"),ea=[p(D,"input",a.input_input_handler),p(D,"input",a.handleFilter)]},m(r,s){d(r,e,s),oa&&oa.m(r,s),d(r,t,s),d(r,g,s),h(g,N),h(N,P),h(N,x),h(g,A),h(g,C),h(C,M),h(C,L),h(g,O),h(g,G),h(G,T),h(G,w),h(g,J),h(g,_),h(_,j),h(_,U),d(r,V,s),d(r,D,s),v(D,a.filter),d(r,z,s),d(r,$,s);for(let a=0;a<ia.length;a+=1)ia[a].m($,null);h($,B),h($,R),h(R,q),d(r,H,s),d(r,K,s),h(K,Q),h(Q,W),h(W,X),h(K,Y),h(K,Z),h(Z,aa)},p(a,e){if(e.isGoal?oa?oa.p(a,e):((oa=y(e)).c(),oa.m(t.parentNode,t)):oa&&(oa.d(1),oa=null),a.calories&&ta!==(ta=Math.round(e.calories)+"")&&u(x,ta),a.protein&&ra!==(ra=Math.round(e.protein)+"")&&u(L,ra),a.carbs&&sa!==(sa=Math.round(e.carbs)+"")&&u(w,sa),a.fat&&na!==(na=Math.round(e.fat)+"")&&u(U,na),a.filter&&D.value!==e.filter&&v(D,e.filter),a.handleFoodClick||a.filteredFood){let t;for(la=e.filteredFood,t=0;t<la.length;t+=1){const r=E(e,la,t);ia[t]?ia[t].p(a,r):(ia[t]=k(r),ia[t].c(),ia[t].m($,B))}for(;t<ia.length;t+=1)ia[t].d(1);ia.length=la.length}},i:S,o:S,d(a){a&&c(e),oa&&oa.d(a),a&&c(t),a&&c(g),a&&c(V),a&&c(D),a&&c(z),a&&c($),F(ia,a),a&&c(H),a&&c(K),I(ea)}}}function x(a,e,t){let r=!1,s="50% 50%",n=!1,o=2e3,l=[],i=[],c=0,f=0,m=0,g="",d=[],h=[];function u(a){let e=l.findIndex(e=>e.name===a.name);-1===e?(a.count=1,l=[...l,a]):l[e].count=l[e].count+1,localStorage.setItem("ate",JSON.stringify(l)),b(),p(a)}N(async()=>{r="true"===(r=localStorage.getItem("firstTime")||"true"),t("isGoal",n=localStorage.getItem("isGoal")||!1),t("goal",o=localStorage.getItem("goal")||2e3),s=localStorage.getItem("columns")||"50% 50%",i=JSON.parse(localStorage.getItem("food"))||[],t("filteredFood",d=JSON.parse(localStorage.getItem("recentFood")).sort((a,e)=>a.name>e.name)||[]),h=d,console.log("recent",d),l=JSON.parse(localStorage.getItem("ate"))||[],r&&0===i.length&&(i=[{name:"cup milk 2%",protein:5,carbs:6,fat:7},{name:"cup oatmeal",protein:6,carbs:7.3,fat:7.2},{name:"egg",protein:6,carbs:0,fat:7.2},{name:"100g chicken breast",protein:20,carbs:3.2,fat:5.1},{name:"100g brown rice",protein:4,carbs:6.8,fat:4.7},{name:"100g japanese yams",protein:4,carbs:6.8,fat:4.7},{name:"avocado",protein:4,carbs:6.8,fat:4.7},{name:"olive oil",protein:2,carbs:3.8,fat:8},{name:"apple",protein:1,carbs:5.8,fat:3},{name:"cottage cheese",protein:1,carbs:5.8,fat:3},{name:"100g greek yugurt",protein:1,carbs:5.8,fat:3},{name:"1 tbsp peanut butter",protein:1,carbs:5.8,fat:3},{name:"100g salmon",protein:1,carbs:5.8,fat:3},{name:"100g steak",protein:1,carbs:5.8,fat:3},{name:"egg white",protein:1,carbs:5.8,fat:3},{name:"sardins",protein:1,carbs:5.8,fat:3},{name:"tuna can",protein:1,carbs:5.8,fat:3},{name:"tuna fresh",protein:1,carbs:5.8,fat:3},{name:"150g drum sticks",protein:1,carbs:5.8,fat:3},{name:"100g chicken thighs",protein:1,carbs:5.8,fat:3}],localStorage.setItem("firstTime","false"),localStorage.setItem("food",JSON.stringify(i)),t("filteredFood",d=i)),b()});const p=a=>{let e=h.filter(function(e,t,r){return e.name!==a.name});e.unshift(a),e.length>20&&e.splice(-1,1),localStorage.setItem("recentFood",JSON.stringify(e))},b=a=>{t("protein",c=l.reduce(function(a,e){return a+e.protein*e.count},0)),t("carbs",f=l.reduce(function(a,e){return a+e.carbs*e.count},0)),t("fat",m=l.reduce(function(a,e){return a+e.fat*e.count},0))};let v,S;return a.$$.update=((a={protein:1,carbs:1,fat:1,goal:1,calories:1})=>{(a.protein||a.carbs||a.fat)&&t("calories",S=parseFloat(Number(4*c+4*f+9*m).toFixed(1))),(a.goal||a.calories)&&t("remaining",v=o-S<=0?"remaining":"")}),{isGoal:n,goal:o,protein:c,carbs:f,fat:m,filter:g,filteredFood:d,handleFilter:function(){""===g&&t("filteredFood",d=i),t("filteredFood",d=i.filter(a=>a.name.toLowerCase().includes(g.toLowerCase())))},handleFoodClick:u,remaining:v,calories:S,input_input_handler:function(){g=this.value,t("filter",g)},click_handler:({i:a})=>u(d[a])}}export default class extends a{constructor(a){super(),e(this,a,x,P,t,{})}}
