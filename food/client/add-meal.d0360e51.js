import{S as e,i as t,s as a,e as o,t as r,b as n,d as s,f as l,h as c,k as i,l as f,m as d,x as u,a as h,y as p,j as m,q as g,E as v,p as M,N as b,D as F,c as x,g as k,P as E,Q as N,o as $,r as _,R as P,U as I,I as S,n as y}from"./index.9cf44aa4.js";import{I as A,t as T,p as w}from"./index.e287424e.js";import{f as D,a as O}from"./validate.d83e4ffc.js";import{a as C}from"./recentFood.fd6a6ea9.js";const U=e=>{return{protein:e.reduce(function(e,t){return e+t.protein*t.count},0),carbs:e.reduce(function(e,t){return e+t.carbs*t.count},0),fat:e.reduce(function(e,t){return e+t.fat*t.count},0)}};function j(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.i=a,o}function q(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.count=t[a].count,o.i=a,o}function B(e){let t,a;return{c(){t=o("p"),a=r(e.successMessage),this.h()},l(o){t=n(o,"P",{class:!0});var r=s(t);a=l(r,e.successMessage),r.forEach(c),this.h()},h(){i(t,"class","success svelte-q93k07")},m(e,o){f(e,t,o),d(t,a)},p(e,t){e.successMessage&&u(a,t.successMessage)},d(e){e&&c(t)}}}function V(e){let t,a;return{c(){t=o("p"),a=r(e.errorMessage),this.h()},l(o){t=n(o,"P",{class:!0});var r=s(t);a=l(r,e.errorMessage),r.forEach(c),this.h()},h(){i(t,"class","error svelte-q93k07")},m(e,o){f(e,t,o),d(t,a)},p(e,t){e.errorMessage&&u(a,t.errorMessage)},d(e){e&&c(t)}}}function z(e){let t,a,u,p,b,x,k,$,_,y,A,T,w,D=0!==e.foodForMeal.length&&L(e),O=e.foodForMeal,C=[];for(let t=0;t<O.length;t+=1)C[t]=Y(q(e,O,t));const U=e=>g(C[e],1,1,()=>{C[e]=null});let B=e.filteredFood,V=[];for(let t=0;t<B.length;t+=1)V[t]=H(j(e,B,t));return{c(){t=o("input"),a=h(),D&&D.c(),u=h(),p=o("div");for(let e=0;e<C.length;e+=1)C[e].c();b=h(),x=o("button"),k=r("Add"),$=h(),_=o("input"),y=h(),A=o("div");for(let e=0;e<V.length;e+=1)V[e].c();this.h()},l(e){t=n(e,"INPUT",{type:!0,placeholder:!0,maxlength:!0,size:!0,class:!0}),a=m(e),D&&D.l(e),u=m(e),p=n(e,"DIV",{class:!0});var o=s(p);for(let e=0;e<C.length;e+=1)C[e].l(o);o.forEach(c),b=m(e),x=n(e,"BUTTON",{class:!0});var r=s(x);k=l(r,"Add"),r.forEach(c),$=m(e),_=n(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),y=m(e),A=n(e,"DIV",{class:!0});var i=s(A);for(let e=0;e<V.length;e+=1)V[e].l(i);i.forEach(c),this.h()},h(){i(t,"type","text"),i(t,"placeholder","Name"),i(t,"maxlength","20"),i(t,"size","20"),i(t,"class","svelte-q93k07"),i(p,"class","ate-wrapper svelte-q93k07"),i(x,"class","block bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 mb-3"),i(_,"class","filter bg-gray-200 w-24 px-2 svelte-q93k07"),i(_,"type","text"),i(_,"placeholder","Search"),i(_,"maxlength","5"),i(_,"size","3"),i(A,"class","pb-6"),w=[E(t,"input",e.input0_input_handler),E(x,"click",N(e.handleAdd)),E(_,"input",e.input1_input_handler),E(_,"input",e.handleFilter)]},m(o,r){f(o,t,r),I(t,e.name),f(o,a,r),D&&D.m(o,r),f(o,u,r),f(o,p,r);for(let e=0;e<C.length;e+=1)C[e].m(p,null);f(o,b,r),f(o,x,r),d(x,k),f(o,$,r),f(o,_,r),I(_,e.filter),f(o,y,r),f(o,A,r);for(let e=0;e<V.length;e+=1)V[e].m(A,null);T=!0},p(e,a){if(e.name&&t.value!==a.name&&I(t,a.name),0!==a.foodForMeal.length?D?D.p(e,a):((D=L(a)).c(),D.m(u.parentNode,u)):D&&(D.d(1),D=null),e.handlePlus||e.foodForMeal||e.plus||e.handleDelete||e.trash){let t;for(O=a.foodForMeal,t=0;t<O.length;t+=1){const o=q(a,O,t);C[t]?(C[t].p(e,o),M(C[t],1)):(C[t]=Y(o),C[t].c(),M(C[t],1),C[t].m(p,null))}for(F(),t=O.length;t<C.length;t+=1)U(t);v()}if(e.filter&&_.value!==a.filter&&I(_,a.filter),e.handleFoodClick||e.food||e.filteredFood){let t;for(B=a.filteredFood,t=0;t<B.length;t+=1){const o=j(a,B,t);V[t]?V[t].p(e,o):(V[t]=H(o),V[t].c(),V[t].m(A,null))}for(;t<V.length;t+=1)V[t].d(1);V.length=B.length}},i(e){if(!T){for(let e=0;e<O.length;e+=1)M(C[e]);T=!0}},o(e){C=C.filter(Boolean);for(let e=0;e<C.length;e+=1)g(C[e]);T=!1},d(e){e&&c(t),e&&c(a),D&&D.d(e),e&&c(u),e&&c(p),S(C,e),e&&c(b),e&&c(x),e&&c($),e&&c(_),e&&c(y),e&&c(A),S(V,e),P(w)}}}function J(e){let t,a,i,u;return{c(){t=o("p"),a=r("You have no food."),i=o("p"),u=o("p")},l(e){t=n(e,"P",{});var o=s(t);a=l(o,"You have no food."),o.forEach(c),i=n(e,"P",{}),s(i).forEach(c),u=n(e,"P",{}),s(u).forEach(c)},m(e,o){f(e,t,o),d(t,a),f(e,i,o),f(e,u,o)},p:y,i:y,o:y,d(e){e&&c(t),e&&c(i),e&&c(u)}}}function L(e){let t,a,i,p,g,v,M,b,F,x,k,E,N,$,_,P,I=Math.round(e.calories)+"",S=Math.round(e.protein)+"",y=Math.round(e.carbs)+"",A=Math.round(e.fat)+"";return{c(){t=o("div"),a=o("span"),i=r("Cal:"),p=r(I),g=h(),v=o("span"),M=r("P:"),b=r(S),F=h(),x=o("span"),k=r("C:"),E=r(y),N=h(),$=o("span"),_=r("F:"),P=r(A)},l(e){t=n(e,"DIV",{});var o=s(t);a=n(o,"SPAN",{});var r=s(a);i=l(r,"Cal:"),p=l(r,I),r.forEach(c),g=m(o),v=n(o,"SPAN",{});var f=s(v);M=l(f,"P:"),b=l(f,S),f.forEach(c),F=m(o),x=n(o,"SPAN",{});var d=s(x);k=l(d,"C:"),E=l(d,y),d.forEach(c),N=m(o),$=n(o,"SPAN",{});var u=s($);_=l(u,"F:"),P=l(u,A),u.forEach(c),o.forEach(c)},m(e,o){f(e,t,o),d(t,a),d(a,i),d(a,p),d(t,g),d(t,v),d(v,M),d(v,b),d(t,F),d(t,x),d(x,k),d(x,E),d(t,N),d(t,$),d($,_),d($,P)},p(e,t){e.calories&&I!==(I=Math.round(t.calories)+"")&&u(p,I),e.protein&&S!==(S=Math.round(t.protein)+"")&&u(b,S),e.carbs&&y!==(y=Math.round(t.carbs)+"")&&u(E,y),e.fat&&A!==(A=Math.round(t.fat)+"")&&u(P,A)},d(e){e&&c(t)}}}function Y(e){let t,a,p,v,b,F,I,S,y,D,O,C=e.name+"",U=e.count+"";const j=new A({props:{data:T}});function q(...t){return e.click_handler(e,...t)}const B=new A({props:{data:w}});function V(...t){return e.click_handler_1(e,...t)}return{c(){t=o("button"),x(j.$$.fragment),a=h(),p=o("div"),v=r(C),b=h(),F=o("div"),I=r(U),S=h(),y=o("button"),x(B.$$.fragment),this.h()},l(e){t=n(e,"BUTTON",{class:!0,href:!0});var o=s(t);k(j.$$.fragment,o),o.forEach(c),a=m(e),p=n(e,"DIV",{});var r=s(p);v=l(r,C),r.forEach(c),b=m(e),F=n(e,"DIV",{class:!0});var i=s(F);I=l(i,U),i.forEach(c),S=m(e),y=n(e,"BUTTON",{class:!0,href:!0});var f=s(y);k(B.$$.fragment,f),f.forEach(c),this.h()},h(){i(t,"class","text-red-400 text-left"),i(t,"href","#"),i(F,"class",""),i(y,"class",""),i(y,"href","#"),O=[E(t,"click",N(q)),E(y,"click",N(V))]},m(e,o){f(e,t,o),$(j,t,null),f(e,a,o),f(e,p,o),d(p,v),f(e,b,o),f(e,F,o),d(F,I),f(e,S,o),f(e,y,o),$(B,y,null),D=!0},p(t,a){e=a,D&&!t.foodForMeal||C===(C=e.name+"")||u(v,C),D&&!t.foodForMeal||U===(U=e.count+"")||u(I,U)},i(e){D||(M(j.$$.fragment,e),M(B.$$.fragment,e),D=!0)},o(e){g(j.$$.fragment,e),g(B.$$.fragment,e),D=!1},d(e){e&&c(t),_(j),e&&c(a),e&&c(p),e&&c(b),e&&c(F),e&&c(S),e&&c(y),_(B),P(O)}}}function H(e){let t,a,h,p=e.name+"";function m(...t){return e.click_handler_2(e,...t)}return{c(){t=o("button"),a=r(p),this.h()},l(e){t=n(e,"BUTTON",{class:!0});var o=s(t);a=l(o,p),o.forEach(c),this.h()},h(){i(t,"class","box w-full svelte-q93k07"),h=E(t,"click",m)},m(e,o){f(e,t,o),d(t,a)},p(t,o){e=o,t.filteredFood&&p!==(p=e.name+"")&&u(a,p)},d(e){e&&c(t),h()}}}function Q(e){let t,a,u,b,x,k,E,N,$,_,P=""!==e.successMessage&&B(e),I=""!==e.errorMessage&&V(e);const S=[J,z],y=[];function A(e,t){return 0===t.food.length?0:1}return E=A(0,e),N=y[E]=S[E](e),{c(){t=h(),a=o("h2"),u=r("Add Meal"),b=h(),P&&P.c(),x=h(),I&&I.c(),k=h(),N.c(),$=p(),this.h()},l(e){t=m(e),a=n(e,"H2",{class:!0});var o=s(a);u=l(o,"Add Meal"),o.forEach(c),b=m(e),P&&P.l(e),x=m(e),I&&I.l(e),k=m(e),N.l(e),$=p(),this.h()},h(){document.title="Update Food",i(a,"class","text-xl mb-2")},m(e,o){f(e,t,o),f(e,a,o),d(a,u),f(e,b,o),P&&P.m(e,o),f(e,x,o),I&&I.m(e,o),f(e,k,o),y[E].m(e,o),f(e,$,o),_=!0},p(e,t){""!==t.successMessage?P?P.p(e,t):((P=B(t)).c(),P.m(x.parentNode,x)):P&&(P.d(1),P=null),""!==t.errorMessage?I?I.p(e,t):((I=V(t)).c(),I.m(k.parentNode,k)):I&&(I.d(1),I=null);let a=E;(E=A(0,t))===a?y[E].p(e,t):(F(),g(y[a],1,1,()=>{y[a]=null}),v(),(N=y[E])||(N=y[E]=S[E](t)).c(),M(N,1),N.m($.parentNode,$))},i(e){_||(M(N),_=!0)},o(e){g(N),_=!1},d(e){e&&c(t),e&&c(a),e&&c(b),P&&P.d(e),e&&c(x),I&&I.d(e),e&&c(k),y[E].d(e),e&&c($)}}}function R(e,t,a){let o="",r=[],n="",s="",l="",c=[],i=[],f={name:"",protein:0,carbs:0,fat:0,food:[]},d=[],u=0,h=0,p=0;function m(e){const t=D(e.name,d);-1!==t?a("foodForMeal",d[t].count=d[t].count+1,d):(e.count=1,d.push(e)),a("foodForMeal",d),f.protein=f.protein+e.protein,f.carbs=f.carbs+e.carbs,f.fat=f.fat+e.fat,f.food.push(e);const o=U(d);a("protein",u=o.protein),a("carbs",h=o.carbs),a("fat",p=o.fat)}function g(e){let t=d.filter(function(t,a,o){return t.name!==e.name});a("foodForMeal",d=t);const o=U(d);a("protein",u=o.protein),a("carbs",h=o.carbs),a("fat",p=o.fat)}function v(e){let t=d.findIndex(t=>t.name===e.name);a("foodForMeal",d[t].count=d[t].count+1,d);const o=U(d);a("protein",u=o.protein),a("carbs",h=o.carbs),a("fat",p=o.fat)}b(async()=>{a("food",r=JSON.parse(localStorage.getItem("food")).sort((e,t)=>e.name>t.name)||[]),i=JSON.parse(localStorage.getItem("recentFood"))||[],a("filteredFood",c=r)});let M;return e.$$.update=((e={protein:1,carbs:1,fat:1})=>{(e.protein||e.carbs||e.fat)&&a("calories",M=parseFloat(Number(4*u+4*h+9*p).toFixed(1)))}),{name:o,food:r,errorMessage:n,successMessage:s,filter:l,filteredFood:c,foodForMeal:d,protein:u,carbs:h,fat:p,handleAdd:function(){event.preventDefault(),a("successMessage",s=""),a("errorMessage",n="");const e=D(o,r);if(console.log(o),console.log(r),console.log(e),-1!==e)return void a("errorMessage",n="Food with this name already exist");let t={};if(f.name=o,!(t=O(f)).valid)return a("errorMessage",n=t.message),void console.log("error",n);r.push(f),localStorage.setItem("food",JSON.stringify(r)),C(f,i),a("foodForMeal",d=[])},handleFoodClick:m,handleFilter:function(){""===l&&a("filteredFood",c=r),a("filteredFood",c=r.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())))},handleDelete:g,handlePlus:v,calories:M,input0_input_handler:function(){o=this.value,a("name",o)},click_handler:({i:e})=>g(d[e]),click_handler_1:({i:e})=>v(d[e]),input1_input_handler:function(){l=this.value,a("filter",l)},click_handler_2:({i:e})=>m(r[e])}}export default class extends e{constructor(e){super(),t(this,e,R,Q,a,{})}}
