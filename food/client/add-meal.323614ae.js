import{S as e,i as t,s,e as a,t as o,b as r,d as l,f as n,h as c,k as i,l as d,m as f,x as h,a as u,y as p,j as m,n as g,N as v,P as M,Q as F,U as b,I as x,R as N}from"./index.9cf44aa4.js";import"./index.e287424e.js";import{f as j,a as y}from"./validate.d83e4ffc.js";import{a as E}from"./recentFood.fd6a6ea9.js";function _(e,t,s){const a=Object.create(e);return a.id=t[s].id,a.name=t[s].name,a.i=s,a}function k(e,t,s){const a=Object.create(e);return a.id=t[s].id,a.name=t[s].name,a.i=s,a}function I(e){let t,s;return{c(){t=a("p"),s=o(e.successMessage),this.h()},l(a){t=r(a,"P",{class:!0});var o=l(t);s=n(o,e.successMessage),o.forEach(c),this.h()},h(){i(t,"class","success svelte-1pcmpj2")},m(e,a){d(e,t,a),f(t,s)},p(e,t){e.successMessage&&h(s,t.successMessage)},d(e){e&&c(t)}}}function P(e){let t,s;return{c(){t=a("p"),s=o(e.errorMessage),this.h()},l(a){t=r(a,"P",{class:!0});var o=l(t);s=n(o,e.errorMessage),o.forEach(c),this.h()},h(){i(t,"class","error svelte-1pcmpj2")},m(e,a){d(e,t,a),f(t,s)},p(e,t){e.errorMessage&&h(s,t.errorMessage)},d(e){e&&c(t)}}}function S(e){let t,s,h,p,g,v,j,y,E,I,P=e.foodForMeal,S=[];for(let t=0;t<P.length;t+=1)S[t]=w(k(e,P,t));let O=e.filteredFood,T=[];for(let t=0;t<O.length;t+=1)T[t]=A(_(e,O,t));return{c(){t=a("input"),s=u();for(let e=0;e<S.length;e+=1)S[e].c();h=u(),p=a("button"),g=o("Add"),v=u(),j=a("input"),y=u(),E=a("div");for(let e=0;e<T.length;e+=1)T[e].c();this.h()},l(e){t=r(e,"INPUT",{type:!0,placeholder:!0,maxlength:!0,size:!0,class:!0}),s=m(e);for(let t=0;t<S.length;t+=1)S[t].l(e);h=m(e),p=r(e,"BUTTON",{class:!0});var a=l(p);g=n(a,"Add"),a.forEach(c),v=m(e),j=r(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),y=m(e),E=r(e,"DIV",{class:!0});var o=l(E);for(let e=0;e<T.length;e+=1)T[e].l(o);o.forEach(c),this.h()},h(){i(t,"type","text"),i(t,"placeholder","Name"),i(t,"maxlength","20"),i(t,"size","20"),i(t,"class","svelte-1pcmpj2"),i(p,"class","block bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 mb-3"),i(j,"class","filter bg-gray-200 w-24 px-2 svelte-1pcmpj2"),i(j,"type","text"),i(j,"placeholder","Search"),i(j,"maxlength","5"),i(j,"size","3"),i(E,"class","pb-6"),I=[M(t,"input",e.input0_input_handler),M(p,"click",F(e.handleAdd)),M(j,"input",e.input1_input_handler),M(j,"input",e.handleFilter)]},m(a,o){d(a,t,o),b(t,e.name),d(a,s,o);for(let e=0;e<S.length;e+=1)S[e].m(a,o);d(a,h,o),d(a,p,o),f(p,g),d(a,v,o),d(a,j,o),b(j,e.filter),d(a,y,o),d(a,E,o);for(let e=0;e<T.length;e+=1)T[e].m(E,null)},p(e,s){if(e.name&&t.value!==s.name&&b(t,s.name),e.foodForMeal){let t;for(P=s.foodForMeal,t=0;t<P.length;t+=1){const a=k(s,P,t);S[t]?S[t].p(e,a):(S[t]=w(a),S[t].c(),S[t].m(h.parentNode,h))}for(;t<S.length;t+=1)S[t].d(1);S.length=P.length}if(e.filter&&j.value!==s.filter&&b(j,s.filter),e.handleFoodClick||e.food||e.filteredFood){let t;for(O=s.filteredFood,t=0;t<O.length;t+=1){const a=_(s,O,t);T[t]?T[t].p(e,a):(T[t]=A(a),T[t].c(),T[t].m(E,null))}for(;t<T.length;t+=1)T[t].d(1);T.length=O.length}},d(e){e&&c(t),e&&c(s),x(S,e),e&&c(h),e&&c(p),e&&c(v),e&&c(j),e&&c(y),e&&c(E),x(T,e),N(I)}}}function O(e){let t,s,i,h;return{c(){t=a("p"),s=o("You have no food."),i=a("p"),h=a("p")},l(e){t=r(e,"P",{});var a=l(t);s=n(a,"You have no food."),a.forEach(c),i=r(e,"P",{}),l(i).forEach(c),h=r(e,"P",{}),l(h).forEach(c)},m(e,a){d(e,t,a),f(t,s),d(e,i,a),d(e,h,a)},p:g,d(e){e&&c(t),e&&c(i),e&&c(h)}}}function w(e){let t,s,u=e.name+"";return{c(){t=a("div"),s=o(u),this.h()},l(e){t=r(e,"DIV",{class:!0});var a=l(t);s=n(a,u),a.forEach(c),this.h()},h(){i(t,"class","")},m(e,a){d(e,t,a),f(t,s)},p(e,t){e.foodForMeal&&u!==(u=t.name+"")&&h(s,u)},d(e){e&&c(t)}}}function A(e){let t,s,u,p=e.name+"";function m(...t){return e.click_handler(e,...t)}return{c(){t=a("button"),s=o(p),this.h()},l(e){t=r(e,"BUTTON",{class:!0});var a=l(t);s=n(a,p),a.forEach(c),this.h()},h(){i(t,"class","box w-full svelte-1pcmpj2"),u=M(t,"click",m)},m(e,a){d(e,t,a),f(t,s)},p(t,a){e=a,t.filteredFood&&p!==(p=e.name+"")&&h(s,p)},d(e){e&&c(t),u()}}}function T(e){let t,s,h,v,M,F,b,x=""!==e.successMessage&&I(e),N=""!==e.errorMessage&&P(e);function j(e,t){return 0===t.food.length?O:S}let y=j(0,e),E=y(e);return{c(){t=u(),s=a("h2"),h=o("Add Meal"),v=u(),x&&x.c(),M=u(),N&&N.c(),F=u(),E.c(),b=p(),this.h()},l(e){t=m(e),s=r(e,"H2",{class:!0});var a=l(s);h=n(a,"Add Meal"),a.forEach(c),v=m(e),x&&x.l(e),M=m(e),N&&N.l(e),F=m(e),E.l(e),b=p(),this.h()},h(){document.title="Update Food",i(s,"class","text-xl mb-2")},m(e,a){d(e,t,a),d(e,s,a),f(s,h),d(e,v,a),x&&x.m(e,a),d(e,M,a),N&&N.m(e,a),d(e,F,a),E.m(e,a),d(e,b,a)},p(e,t){""!==t.successMessage?x?x.p(e,t):((x=I(t)).c(),x.m(M.parentNode,M)):x&&(x.d(1),x=null),""!==t.errorMessage?N?N.p(e,t):((N=P(t)).c(),N.m(F.parentNode,F)):N&&(N.d(1),N=null),y===(y=j(0,t))&&E?E.p(e,t):(E.d(1),(E=y(t))&&(E.c(),E.m(b.parentNode,b)))},i:g,o:g,d(e){e&&c(t),e&&c(s),e&&c(v),x&&x.d(e),e&&c(M),N&&N.d(e),e&&c(F),E.d(e),e&&c(b)}}}function U(e,t,s){let a="",o=[],r="",l="",n="",c=[],i=[],d={name:"",protein:0,carbs:0,fat:0,food:[]},f=[];function h(e){f.push(e),s("foodForMeal",f),console.log(f),d.protein=d.protein+e.protein,d.carbs=d.carbs+e.carbs,d.fat=d.fat+e.fat,d.food.push(e)}v(async()=>{s("food",o=JSON.parse(localStorage.getItem("food")).sort((e,t)=>e.name>t.name)||[]),i=JSON.parse(localStorage.getItem("recentFood"))||[],s("filteredFood",c=o)});return{name:a,food:o,errorMessage:r,successMessage:l,filter:n,filteredFood:c,foodForMeal:f,handleAdd:function(){if(event.preventDefault(),s("successMessage",l=""),s("errorMessage",r=""),-1!==j(a,o))return void s("errorMessage",r="Food with this name already exist");let e={};if(d.name=a,!(e=y(d)).valid)return s("errorMessage",r=e.message),void console.log("error",r);o.push(d),localStorage.setItem("food",JSON.stringify(o)),E(d,i),s("foodForMeal",f=[])},handleFoodClick:h,handleFilter:function(){""===n&&s("filteredFood",c=o),s("filteredFood",c=o.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())))},input0_input_handler:function(){a=this.value,s("name",a)},input1_input_handler:function(){n=this.value,s("filter",n)},click_handler:({i:e})=>h(o[e])}}export default class extends e{constructor(e){super(),t(this,e,U,T,s,{})}}
