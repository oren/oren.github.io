import{S as e,i as t,s as o,a,z as l,g as r,k as n,n as s,f as c,G as i,e as d,t as f,c as u,b as h,d as m,h as g,j as p,l as v,y as b,H as I,I as S,J as A,K as N,L as F}from"./index.bdc8af7b.js";function w(e,t,o){const a=Object.create(e);return a.id=t[o].id,a.name=t[o].name,a.i=o,a}function E(e,t,o){const a=Object.create(e);return a.id=t[o].id,a.name=t[o].name,a.count=t[o].count,a.i=o,a}function x(e){let t,o,l,s,i,p,S,A,x,P,G,O,T,_,j,J,D,V,z,L,U,B,Y,$,H,K=Math.round(e.calories)+"",q=Math.round(e.protein)+"",Q=Math.round(e.carbs)+"",R=Math.round(e.fat)+"",W=e.isGoal&&C(e),X=e.foodIAte,Z=[];for(let t=0;t<X.length;t+=1)Z[t]=M(E(e,X,t));let ee=e.food.length>=10&&k(e),te=e.filteredFood,oe=[];for(let t=0;t<te.length;t+=1)oe[t]=y(w(e,te,t));return{c(){t=d("button"),o=f("Clear"),l=a(),W&&W.c(),s=a(),i=d("div"),p=d("span"),S=f("Cal: "),A=f(K),x=a(),P=d("span"),G=f("Pro:"),O=f(q),T=a(),_=d("span"),j=f("Car:"),J=f(Q),D=a(),V=d("span"),z=f("Fat:"),L=f(R),U=a();for(let e=0;e<Z.length;e+=1)Z[e].c();B=a(),ee&&ee.c(),Y=a(),$=d("div");for(let e=0;e<oe.length;e+=1)oe[e].c();this.h()},l(e){t=u(e,"BUTTON",{class:!0});var a=h(t);o=m(a,"Clear"),a.forEach(c),l=r(e),W&&W.l(e),s=r(e),i=u(e,"DIV",{class:!0});var n=h(i);p=u(n,"SPAN",{class:!0});var d=h(p);S=m(d,"Cal: "),A=m(d,K),d.forEach(c),x=r(n),P=u(n,"SPAN",{class:!0});var f=h(P);G=m(f,"Pro:"),O=m(f,q),f.forEach(c),T=r(n),_=u(n,"SPAN",{class:!0});var g=h(_);j=m(g,"Car:"),J=m(g,Q),g.forEach(c),D=r(n),V=u(n,"SPAN",{class:!0});var v=h(V);z=m(v,"Fat:"),L=m(v,R),v.forEach(c),n.forEach(c),U=r(e);for(let t=0;t<Z.length;t+=1)Z[t].l(e);B=r(e),ee&&ee.l(e),Y=r(e),$=u(e,"DIV",{class:!0,style:!0});var b=h($);for(let e=0;e<oe.length;e+=1)oe[e].l(b);b.forEach(c),this.h()},h(){g(t,"class","clear svelte-4udwmo"),g(p,"class","svelte-4udwmo"),g(P,"class","svelte-4udwmo"),g(_,"class","svelte-4udwmo"),g(V,"class","svelte-4udwmo"),g(i,"class","total svelte-4udwmo"),g($,"class","wrapper svelte-4udwmo"),N($,"grid-template-columns",e.columns),N($,"margin-top",(e.food.length>=10?0:20)+"px"),H=I(t,"click",e.handleClear)},m(e,a){n(e,t,a),v(t,o),n(e,l,a),W&&W.m(e,a),n(e,s,a),n(e,i,a),v(i,p),v(p,S),v(p,A),v(i,x),v(i,P),v(P,G),v(P,O),v(i,T),v(i,_),v(_,j),v(_,J),v(i,D),v(i,V),v(V,z),v(V,L),n(e,U,a);for(let t=0;t<Z.length;t+=1)Z[t].m(e,a);n(e,B,a),ee&&ee.m(e,a),n(e,Y,a),n(e,$,a);for(let e=0;e<oe.length;e+=1)oe[e].m($,null)},p(e,t){if(t.isGoal?W?W.p(e,t):((W=C(t)).c(),W.m(s.parentNode,s)):W&&(W.d(1),W=null),e.calories&&K!==(K=Math.round(t.calories)+"")&&b(A,K),e.protein&&q!==(q=Math.round(t.protein)+"")&&b(O,q),e.carbs&&Q!==(Q=Math.round(t.carbs)+"")&&b(J,Q),e.fat&&R!==(R=Math.round(t.fat)+"")&&b(L,R),e.foodIAte){let o;for(X=t.foodIAte,o=0;o<X.length;o+=1){const a=E(t,X,o);Z[o]?Z[o].p(e,a):(Z[o]=M(a),Z[o].c(),Z[o].m(B.parentNode,B))}for(;o<Z.length;o+=1)Z[o].d(1);Z.length=X.length}if(t.food.length>=10?ee?ee.p(e,t):((ee=k(t)).c(),ee.m(Y.parentNode,Y)):ee&&(ee.d(1),ee=null),e.handleFoodClick||e.food||e.filteredFood){let o;for(te=t.filteredFood,o=0;o<te.length;o+=1){const a=w(t,te,o);oe[o]?oe[o].p(e,a):(oe[o]=y(a),oe[o].c(),oe[o].m($,null))}for(;o<oe.length;o+=1)oe[o].d(1);oe.length=te.length}e.columns&&N($,"grid-template-columns",t.columns),e.food&&N($,"margin-top",(t.food.length>=10?0:20)+"px")},d(e){e&&c(t),e&&c(l),W&&W.d(e),e&&c(s),e&&c(i),e&&c(U),F(Z,e),e&&c(B),ee&&ee.d(e),e&&c(Y),e&&c($),F(oe,e),H()}}}function P(e){let t,o,l,i,p,b,I;return{c(){t=d("p"),o=f("You have no food."),l=a(),i=d("p"),p=d("a"),b=f("Add some food first"),I=f("."),this.h()},l(e){t=u(e,"P",{});var a=h(t);o=m(a,"You have no food."),a.forEach(c),l=r(e),i=u(e,"P",{});var n=h(i);p=u(n,"A",{href:!0});var s=h(p);b=m(s,"Add some food first"),s.forEach(c),I=m(n,"."),n.forEach(c),this.h()},h(){g(p,"href","/food/manage-food/add-food")},m(e,a){n(e,t,a),v(t,o),n(e,l,a),n(e,i,a),v(i,p),v(p,b),v(i,I)},p:s,d(e){e&&c(t),e&&c(l),e&&c(i)}}}function C(e){let t,o,l,s,i,I,S,A,N,F,w=Math.round(e.goal-e.calories)+"";return{c(){t=d("div"),o=d("span"),l=f("Goal: "),s=f(e.goal),i=a(),I=d("span"),S=f("Left:"),A=d("span"),N=f(w),this.h()},l(a){t=u(a,"DIV",{class:!0});var n=h(t);o=u(n,"SPAN",{class:!0});var d=h(o);l=m(d,"Goal: "),s=m(d,e.goal),d.forEach(c),i=r(n),I=u(n,"SPAN",{class:!0});var f=h(I);S=m(f,"Left:"),f.forEach(c),A=u(n,"SPAN",{class:!0});var g=h(A);N=m(g,w),g.forEach(c),n.forEach(c),this.h()},h(){g(o,"class","svelte-4udwmo"),g(I,"class","svelte-4udwmo"),g(A,"class",F=p(e.remaining)+" svelte-4udwmo"),g(t,"class","goal svelte-4udwmo")},m(e,a){n(e,t,a),v(t,o),v(o,l),v(o,s),v(t,i),v(t,I),v(I,S),v(t,A),v(A,N)},p(e,t){e.goal&&b(s,t.goal),(e.goal||e.calories)&&w!==(w=Math.round(t.goal-t.calories)+"")&&b(N,w),e.remaining&&F!==(F=p(t.remaining)+" svelte-4udwmo")&&g(A,"class",F)},d(e){e&&c(t)}}}function M(e){let t,o,l,s,i=e.count+"",p=e.name+"";return{c(){t=d("div"),o=f(i),l=a(),s=f(p),this.h()},l(e){t=u(e,"DIV",{class:!0});var a=h(t);o=m(a,i),l=r(a),s=m(a,p),a.forEach(c),this.h()},h(){g(t,"class","ate svelte-4udwmo")},m(e,a){n(e,t,a),v(t,o),v(t,l),v(t,s)},p(e,t){e.foodIAte&&i!==(i=t.count+"")&&b(o,i),e.foodIAte&&p!==(p=t.name+"")&&b(s,p)},d(e){e&&c(t)}}}function k(e){let t,o;return{c(){t=d("input"),this.h()},l(e){t=u(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),this.h()},h(){g(t,"class","filter svelte-4udwmo"),g(t,"type","text"),g(t,"placeholder","Search"),g(t,"maxlength","5"),g(t,"size","3"),o=[I(t,"input",e.input_input_handler),I(t,"input",e.handleFilter)]},m(o,a){n(o,t,a),S(t,e.filter)},p(e,o){e.filter&&t.value!==o.filter&&S(t,o.filter)},d(e){e&&c(t),A(o)}}}function y(e){let t,o,a,l=e.name+"";function r(...t){return e.click_handler(e,...t)}return{c(){t=d("button"),o=f(l),this.h()},l(e){t=u(e,"BUTTON",{class:!0});var a=h(t);o=m(a,l),a.forEach(c),this.h()},h(){g(t,"class","box svelte-4udwmo"),a=I(t,"click",r)},m(e,a){n(e,t,a),v(t,o)},p(t,a){e=a,t.filteredFood&&l!==(l=e.name+"")&&b(o,l)},d(e){e&&c(t),a()}}}function G(e){let t,o;function i(e,t){return 0===t.food.length?P:x}let d=i(0,e),f=d(e);return{c(){t=a(),f.c(),o=l(),this.h()},l(e){t=r(e),f.l(e),o=l(),this.h()},h(){document.title="Eat"},m(e,a){n(e,t,a),f.m(e,a),n(e,o,a)},p(e,t){d===(d=i(0,t))&&f?f.p(e,t):(f.d(1),(f=d(t))&&(f.c(),f.m(o.parentNode,o)))},i:s,o:s,d(e){e&&c(t),f.d(e),e&&c(o)}}}function O(e,t,o){let a=!1,l="50% 50%",r=!1,n=2e3,s=[],c=[],d=0,f=0,u=0,h="",m=[];function g(e){o("filteredFood",m=c),o("filter",h="");let t=s.findIndex(t=>t.name===e.name);-1===t?(e.count=1,o("foodIAte",s=[...s,e])):o("foodIAte",s[t].count=s[t].count+1,s),localStorage.setItem("ate",JSON.stringify(s)),p()}i(async()=>{a="true"===(a=localStorage.getItem("firstTime")||"true"),o("isGoal",r=localStorage.getItem("isGoal")||!1),o("goal",n=localStorage.getItem("goal")||2e3),o("columns",l=localStorage.getItem("columns")||"50% 50%"),o("food",c=JSON.parse(localStorage.getItem("food"))||[]),o("filteredFood",m=c),o("foodIAte",s=JSON.parse(localStorage.getItem("ate"))||[]),a&&0===c.length?(console.log("first time and no food"),o("food",c=[{name:"cup milk 2%",protein:5,carbs:6,fat:7},{name:"cup oatmeal",protein:6,carbs:7.3,fat:7.2},{name:"egg",protein:6,carbs:0,fat:7.2},{name:"100g chicken breast",protein:20,carbs:3.2,fat:5.1},{name:"100g brown rice",protein:4,carbs:6.8,fat:4.7},{name:"100g japanese yams",protein:4,carbs:6.8,fat:4.7},{name:"avocado",protein:4,carbs:6.8,fat:4.7},{name:"olive oil",protein:2,carbs:3.8,fat:8},{name:"apple",protein:1,carbs:5.8,fat:3},{name:"cottage cheese",protein:1,carbs:5.8,fat:3}]),localStorage.setItem("firstTime","false"),localStorage.setItem("food",JSON.stringify(c)),o("filteredFood",m=c)):console.log("not first time or food exist"),p()});const p=e=>{o("protein",d=s.reduce(function(e,t){return e+t.protein*t.count},0)),o("carbs",f=s.reduce(function(e,t){return e+t.carbs*t.count},0)),o("fat",u=s.reduce(function(e,t){return e+t.fat*t.count},0))};let v,b;return e.$$.update=((e={protein:1,carbs:1,fat:1,goal:1,calories:1})=>{(e.protein||e.carbs||e.fat)&&o("calories",b=parseFloat(Number(4*d+4*f+9*u).toFixed(1))),(e.goal||e.calories)&&o("remaining",v=n-b<=0?"remaining":"")}),{columns:l,isGoal:r,goal:n,foodIAte:s,food:c,protein:d,carbs:f,fat:u,filter:h,filteredFood:m,handleFoodClick:g,handleClear:function(){localStorage.removeItem("ate"),o("protein",d=0),o("carbs",f=0),o("fat",u=0),o("foodIAte",s=[])},handleFilter:function(){""===h&&o("filteredFood",m=c),o("filteredFood",m=c.filter(e=>e.name.includes(h)))},remaining:v,calories:b,input_input_handler:function(){h=this.value,o("filter",h)},click_handler:({i:e})=>g(c[e])}}export default class extends e{constructor(e){super(),t(this,e,O,G,o,{})}}
