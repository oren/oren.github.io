import{S as e,i as a,s as t,e as r,t as o,b as s,d as n,f as l,h as c,k as i,l as f,m as d,x as h,a as u,y as p,j as m,q as g,E as v,p as M,N as b,D as F,c as x,g as k,P as E,Q as N,o as $,r as _,R as P,U as I,I as S,n as y}from"./index.9cf44aa4.js";import{I as A,t as T,p as w}from"./index.e287424e.js";import{f as D,a as O}from"./validate.d83e4ffc.js";import{c as j}from"./helpers.8433149e.js";import{a as C}from"./recentFood.fd6a6ea9.js";function U(e,a,t){const r=Object.create(e);return r.id=a[t].id,r.name=a[t].name,r.i=t,r}function q(e,a,t){const r=Object.create(e);return r.id=a[t].id,r.name=a[t].name,r.count=a[t].count,r.i=t,r}function B(e){let a,t;return{c(){a=r("p"),t=o(e.successMessage),this.h()},l(r){a=s(r,"P",{class:!0});var o=n(a);t=l(o,e.successMessage),o.forEach(c),this.h()},h(){i(a,"class","success svelte-q93k07")},m(e,r){f(e,a,r),d(a,t)},p(e,a){e.successMessage&&h(t,a.successMessage)},d(e){e&&c(a)}}}function V(e){let a,t;return{c(){a=r("p"),t=o(e.errorMessage),this.h()},l(r){a=s(r,"P",{class:!0});var o=n(a);t=l(o,e.errorMessage),o.forEach(c),this.h()},h(){i(a,"class","error svelte-q93k07")},m(e,r){f(e,a,r),d(a,t)},p(e,a){e.errorMessage&&h(t,a.errorMessage)},d(e){e&&c(a)}}}function z(e){let a,t,h,p,b,x,k,$,_,y,A,T,w,D=0!==e.foodForMeal.length&&L(e),O=e.foodForMeal,j=[];for(let a=0;a<O.length;a+=1)j[a]=Y(q(e,O,a));const C=e=>g(j[e],1,1,()=>{j[e]=null});let B=e.filteredFood,V=[];for(let a=0;a<B.length;a+=1)V[a]=H(U(e,B,a));return{c(){a=r("input"),t=u(),D&&D.c(),h=u(),p=r("div");for(let e=0;e<j.length;e+=1)j[e].c();b=u(),x=r("button"),k=o("Add"),$=u(),_=r("input"),y=u(),A=r("div");for(let e=0;e<V.length;e+=1)V[e].c();this.h()},l(e){a=s(e,"INPUT",{type:!0,placeholder:!0,maxlength:!0,size:!0,class:!0}),t=m(e),D&&D.l(e),h=m(e),p=s(e,"DIV",{class:!0});var r=n(p);for(let e=0;e<j.length;e+=1)j[e].l(r);r.forEach(c),b=m(e),x=s(e,"BUTTON",{class:!0});var o=n(x);k=l(o,"Add"),o.forEach(c),$=m(e),_=s(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),y=m(e),A=s(e,"DIV",{class:!0});var i=n(A);for(let e=0;e<V.length;e+=1)V[e].l(i);i.forEach(c),this.h()},h(){i(a,"type","text"),i(a,"placeholder","Name"),i(a,"maxlength","20"),i(a,"size","20"),i(a,"class","svelte-q93k07"),i(p,"class","ate-wrapper svelte-q93k07"),i(x,"class","block bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 mb-3"),i(_,"class","filter bg-gray-200 w-24 px-2 svelte-q93k07"),i(_,"type","text"),i(_,"placeholder","Search"),i(_,"maxlength","5"),i(_,"size","3"),i(A,"class","pb-6"),w=[E(a,"input",e.input0_input_handler),E(x,"click",N(e.handleAdd)),E(_,"input",e.input1_input_handler),E(_,"input",e.handleFilter)]},m(r,o){f(r,a,o),I(a,e.name),f(r,t,o),D&&D.m(r,o),f(r,h,o),f(r,p,o);for(let e=0;e<j.length;e+=1)j[e].m(p,null);f(r,b,o),f(r,x,o),d(x,k),f(r,$,o),f(r,_,o),I(_,e.filter),f(r,y,o),f(r,A,o);for(let e=0;e<V.length;e+=1)V[e].m(A,null);T=!0},p(e,t){if(e.name&&a.value!==t.name&&I(a,t.name),0!==t.foodForMeal.length?D?D.p(e,t):((D=L(t)).c(),D.m(h.parentNode,h)):D&&(D.d(1),D=null),e.handlePlus||e.foodForMeal||e.plus||e.handleDelete||e.trash){let a;for(O=t.foodForMeal,a=0;a<O.length;a+=1){const r=q(t,O,a);j[a]?(j[a].p(e,r),M(j[a],1)):(j[a]=Y(r),j[a].c(),M(j[a],1),j[a].m(p,null))}for(F(),a=O.length;a<j.length;a+=1)C(a);v()}if(e.filter&&_.value!==t.filter&&I(_,t.filter),e.handleFoodClick||e.food||e.filteredFood){let a;for(B=t.filteredFood,a=0;a<B.length;a+=1){const r=U(t,B,a);V[a]?V[a].p(e,r):(V[a]=H(r),V[a].c(),V[a].m(A,null))}for(;a<V.length;a+=1)V[a].d(1);V.length=B.length}},i(e){if(!T){for(let e=0;e<O.length;e+=1)M(j[e]);T=!0}},o(e){j=j.filter(Boolean);for(let e=0;e<j.length;e+=1)g(j[e]);T=!1},d(e){e&&c(a),e&&c(t),D&&D.d(e),e&&c(h),e&&c(p),S(j,e),e&&c(b),e&&c(x),e&&c($),e&&c(_),e&&c(y),e&&c(A),S(V,e),P(w)}}}function J(e){let a,t,i,h;return{c(){a=r("p"),t=o("You have no food."),i=r("p"),h=r("p")},l(e){a=s(e,"P",{});var r=n(a);t=l(r,"You have no food."),r.forEach(c),i=s(e,"P",{}),n(i).forEach(c),h=s(e,"P",{}),n(h).forEach(c)},m(e,r){f(e,a,r),d(a,t),f(e,i,r),f(e,h,r)},p:y,i:y,o:y,d(e){e&&c(a),e&&c(i),e&&c(h)}}}function L(e){let a,t,i,p,g,v,M,b,F,x,k,E,N,$,_,P,I=Math.round(e.calories)+"",S=Math.round(e.protein)+"",y=Math.round(e.carbs)+"",A=Math.round(e.fat)+"";return{c(){a=r("div"),t=r("span"),i=o("Cal:"),p=o(I),g=u(),v=r("span"),M=o("P:"),b=o(S),F=u(),x=r("span"),k=o("C:"),E=o(y),N=u(),$=r("span"),_=o("F:"),P=o(A)},l(e){a=s(e,"DIV",{});var r=n(a);t=s(r,"SPAN",{});var o=n(t);i=l(o,"Cal:"),p=l(o,I),o.forEach(c),g=m(r),v=s(r,"SPAN",{});var f=n(v);M=l(f,"P:"),b=l(f,S),f.forEach(c),F=m(r),x=s(r,"SPAN",{});var d=n(x);k=l(d,"C:"),E=l(d,y),d.forEach(c),N=m(r),$=s(r,"SPAN",{});var h=n($);_=l(h,"F:"),P=l(h,A),h.forEach(c),r.forEach(c)},m(e,r){f(e,a,r),d(a,t),d(t,i),d(t,p),d(a,g),d(a,v),d(v,M),d(v,b),d(a,F),d(a,x),d(x,k),d(x,E),d(a,N),d(a,$),d($,_),d($,P)},p(e,a){e.calories&&I!==(I=Math.round(a.calories)+"")&&h(p,I),e.protein&&S!==(S=Math.round(a.protein)+"")&&h(b,S),e.carbs&&y!==(y=Math.round(a.carbs)+"")&&h(E,y),e.fat&&A!==(A=Math.round(a.fat)+"")&&h(P,A)},d(e){e&&c(a)}}}function Y(e){let a,t,p,v,b,F,I,S,y,D,O,j=e.name+"",C=e.count+"";const U=new A({props:{data:T}});function q(...a){return e.click_handler(e,...a)}const B=new A({props:{data:w}});function V(...a){return e.click_handler_1(e,...a)}return{c(){a=r("button"),x(U.$$.fragment),t=u(),p=r("div"),v=o(j),b=u(),F=r("div"),I=o(C),S=u(),y=r("button"),x(B.$$.fragment),this.h()},l(e){a=s(e,"BUTTON",{class:!0,href:!0});var r=n(a);k(U.$$.fragment,r),r.forEach(c),t=m(e),p=s(e,"DIV",{});var o=n(p);v=l(o,j),o.forEach(c),b=m(e),F=s(e,"DIV",{class:!0});var i=n(F);I=l(i,C),i.forEach(c),S=m(e),y=s(e,"BUTTON",{class:!0,href:!0});var f=n(y);k(B.$$.fragment,f),f.forEach(c),this.h()},h(){i(a,"class","text-red-400 text-left"),i(a,"href","#"),i(F,"class",""),i(y,"class",""),i(y,"href","#"),O=[E(a,"click",N(q)),E(y,"click",N(V))]},m(e,r){f(e,a,r),$(U,a,null),f(e,t,r),f(e,p,r),d(p,v),f(e,b,r),f(e,F,r),d(F,I),f(e,S,r),f(e,y,r),$(B,y,null),D=!0},p(a,t){e=t,D&&!a.foodForMeal||j===(j=e.name+"")||h(v,j),D&&!a.foodForMeal||C===(C=e.count+"")||h(I,C)},i(e){D||(M(U.$$.fragment,e),M(B.$$.fragment,e),D=!0)},o(e){g(U.$$.fragment,e),g(B.$$.fragment,e),D=!1},d(e){e&&c(a),_(U),e&&c(t),e&&c(p),e&&c(b),e&&c(F),e&&c(S),e&&c(y),_(B),P(O)}}}function H(e){let a,t,u,p=e.name+"";function m(...a){return e.click_handler_2(e,...a)}return{c(){a=r("button"),t=o(p),this.h()},l(e){a=s(e,"BUTTON",{class:!0});var r=n(a);t=l(r,p),r.forEach(c),this.h()},h(){i(a,"class","box w-full svelte-q93k07"),u=E(a,"click",m)},m(e,r){f(e,a,r),d(a,t)},p(a,r){e=r,a.filteredFood&&p!==(p=e.name+"")&&h(t,p)},d(e){e&&c(a),u()}}}function Q(e){let a,t,h,b,x,k,E,N,$,_,P=""!==e.successMessage&&B(e),I=""!==e.errorMessage&&V(e);const S=[J,z],y=[];function A(e,a){return 0===a.food.length?0:1}return E=A(0,e),N=y[E]=S[E](e),{c(){a=u(),t=r("h2"),h=o("Add Meal"),b=u(),P&&P.c(),x=u(),I&&I.c(),k=u(),N.c(),$=p(),this.h()},l(e){a=m(e),t=s(e,"H2",{class:!0});var r=n(t);h=l(r,"Add Meal"),r.forEach(c),b=m(e),P&&P.l(e),x=m(e),I&&I.l(e),k=m(e),N.l(e),$=p(),this.h()},h(){document.title="Update Food",i(t,"class","text-xl mb-2")},m(e,r){f(e,a,r),f(e,t,r),d(t,h),f(e,b,r),P&&P.m(e,r),f(e,x,r),I&&I.m(e,r),f(e,k,r),y[E].m(e,r),f(e,$,r),_=!0},p(e,a){""!==a.successMessage?P?P.p(e,a):((P=B(a)).c(),P.m(x.parentNode,x)):P&&(P.d(1),P=null),""!==a.errorMessage?I?I.p(e,a):((I=V(a)).c(),I.m(k.parentNode,k)):I&&(I.d(1),I=null);let t=E;(E=A(0,a))===t?y[E].p(e,a):(F(),g(y[t],1,1,()=>{y[t]=null}),v(),(N=y[E])||(N=y[E]=S[E](a)).c(),M(N,1),N.m($.parentNode,$))},i(e){_||(M(N),_=!0)},o(e){g(N),_=!1},d(e){e&&c(a),e&&c(t),e&&c(b),P&&P.d(e),e&&c(x),I&&I.d(e),e&&c(k),y[E].d(e),e&&c($)}}}function R(e,a,t){let r="",o=[],s="",n="",l="",c=[],i=[],f={name:"",protein:0,carbs:0,fat:0,food:[]},d=[],h=0,u=0,p=0;function m(e){const a=D(e.name,d);-1!==a?t("foodForMeal",d[a].count=d[a].count+1,d):(e.count=1,d.push(e)),t("foodForMeal",d),f.protein=f.protein+e.protein,f.carbs=f.carbs+e.carbs,f.fat=f.fat+e.fat;const r=j(d);t("protein",h=r.protein),t("carbs",u=r.carbs),t("fat",p=r.fat)}function g(e){let a=d.filter(function(a,t,r){return a.name!==e.name});t("foodForMeal",d=a);const r=j(d);t("protein",h=r.protein),t("carbs",u=r.carbs),t("fat",p=r.fat)}function v(e){let a=d.findIndex(a=>a.name===e.name);t("foodForMeal",d[a].count=d[a].count+1,d);const r=j(d);t("protein",h=r.protein),t("carbs",u=r.carbs),t("fat",p=r.fat)}b(async()=>{t("food",o=JSON.parse(localStorage.getItem("food")).sort((e,a)=>e.name>a.name)||[]),i=JSON.parse(localStorage.getItem("recentFood"))||[],t("filteredFood",c=o)});let M;return e.$$.update=((e={protein:1,carbs:1,fat:1})=>{(e.protein||e.carbs||e.fat)&&t("calories",M=parseFloat(Number(4*h+4*u+9*p).toFixed(1)))}),{name:r,food:o,errorMessage:s,successMessage:n,filter:l,filteredFood:c,foodForMeal:d,protein:h,carbs:u,fat:p,handleAdd:function(){if(event.preventDefault(),t("successMessage",n=""),t("errorMessage",s=""),-1!==D(r,o))return void t("errorMessage",s="Food with this name already exist");f.food=d;let e={};if(f.name=r,!(e=O(f)).valid)return t("errorMessage",s=e.message),void console.log("error",s);o.push(f),localStorage.setItem("food",JSON.stringify(o)),C(f,i),t("foodForMeal",d=[])},handleFoodClick:m,handleFilter:function(){""===l&&t("filteredFood",c=o),t("filteredFood",c=o.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())))},handleDelete:g,handlePlus:v,calories:M,input0_input_handler:function(){r=this.value,t("name",r)},click_handler:({i:e})=>g(d[e]),click_handler_1:({i:e})=>v(d[e]),input1_input_handler:function(){l=this.value,t("filter",l)},click_handler_2:({i:e})=>m(o[e])}}export default class extends e{constructor(e){super(),a(this,e,R,Q,t,{})}}
