import{S as e,i as t,s as o,e as s,t as a,b as r,d as l,f as n,h as c,k as d,l as i,m as f,x as h,a as u,y as p,j as m,n as g,N as M,P as v,Q as F,U as b,I as x,R as N}from"./index.9cf44aa4.js";import"./index.e287424e.js";import{f as j,a as y}from"./validate.d83e4ffc.js";import{a as E}from"./recentFood.fd6a6ea9.js";function _(e,t,o){const s=Object.create(e);return s.id=t[o].id,s.name=t[o].name,s.i=o,s}function k(e,t,o){const s=Object.create(e);return s.id=t[o].id,s.name=t[o].name,s.count=t[o].count,s.i=o,s}function I(e){let t,o;return{c(){t=s("p"),o=a(e.successMessage),this.h()},l(s){t=r(s,"P",{class:!0});var a=l(t);o=n(a,e.successMessage),a.forEach(c),this.h()},h(){d(t,"class","success svelte-1pcmpj2")},m(e,s){i(e,t,s),f(t,o)},p(e,t){e.successMessage&&h(o,t.successMessage)},d(e){e&&c(t)}}}function P(e){let t,o;return{c(){t=s("p"),o=a(e.errorMessage),this.h()},l(s){t=r(s,"P",{class:!0});var a=l(t);o=n(a,e.errorMessage),a.forEach(c),this.h()},h(){d(t,"class","error svelte-1pcmpj2")},m(e,s){i(e,t,s),f(t,o)},p(e,t){e.errorMessage&&h(o,t.errorMessage)},d(e){e&&c(t)}}}function S(e){let t,o,h,p,g,M,j,y,E,I,P=e.foodForMeal,S=[];for(let t=0;t<P.length;t+=1)S[t]=w(k(e,P,t));let O=e.filteredFood,T=[];for(let t=0;t<O.length;t+=1)T[t]=A(_(e,O,t));return{c(){t=s("input"),o=u();for(let e=0;e<S.length;e+=1)S[e].c();h=u(),p=s("button"),g=a("Add"),M=u(),j=s("input"),y=u(),E=s("div");for(let e=0;e<T.length;e+=1)T[e].c();this.h()},l(e){t=r(e,"INPUT",{type:!0,placeholder:!0,maxlength:!0,size:!0,class:!0}),o=m(e);for(let t=0;t<S.length;t+=1)S[t].l(e);h=m(e),p=r(e,"BUTTON",{class:!0});var s=l(p);g=n(s,"Add"),s.forEach(c),M=m(e),j=r(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),y=m(e),E=r(e,"DIV",{class:!0});var a=l(E);for(let e=0;e<T.length;e+=1)T[e].l(a);a.forEach(c),this.h()},h(){d(t,"type","text"),d(t,"placeholder","Name"),d(t,"maxlength","20"),d(t,"size","20"),d(t,"class","svelte-1pcmpj2"),d(p,"class","block bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 mb-3"),d(j,"class","filter bg-gray-200 w-24 px-2 svelte-1pcmpj2"),d(j,"type","text"),d(j,"placeholder","Search"),d(j,"maxlength","5"),d(j,"size","3"),d(E,"class","pb-6"),I=[v(t,"input",e.input0_input_handler),v(p,"click",F(e.handleAdd)),v(j,"input",e.input1_input_handler),v(j,"input",e.handleFilter)]},m(s,a){i(s,t,a),b(t,e.name),i(s,o,a);for(let e=0;e<S.length;e+=1)S[e].m(s,a);i(s,h,a),i(s,p,a),f(p,g),i(s,M,a),i(s,j,a),b(j,e.filter),i(s,y,a),i(s,E,a);for(let e=0;e<T.length;e+=1)T[e].m(E,null)},p(e,o){if(e.name&&t.value!==o.name&&b(t,o.name),e.foodForMeal){let t;for(P=o.foodForMeal,t=0;t<P.length;t+=1){const s=k(o,P,t);S[t]?S[t].p(e,s):(S[t]=w(s),S[t].c(),S[t].m(h.parentNode,h))}for(;t<S.length;t+=1)S[t].d(1);S.length=P.length}if(e.filter&&j.value!==o.filter&&b(j,o.filter),e.handleFoodClick||e.food||e.filteredFood){let t;for(O=o.filteredFood,t=0;t<O.length;t+=1){const s=_(o,O,t);T[t]?T[t].p(e,s):(T[t]=A(s),T[t].c(),T[t].m(E,null))}for(;t<T.length;t+=1)T[t].d(1);T.length=O.length}},d(e){e&&c(t),e&&c(o),x(S,e),e&&c(h),e&&c(p),e&&c(M),e&&c(j),e&&c(y),e&&c(E),x(T,e),N(I)}}}function O(e){let t,o,d,h;return{c(){t=s("p"),o=a("You have no food."),d=s("p"),h=s("p")},l(e){t=r(e,"P",{});var s=l(t);o=n(s,"You have no food."),s.forEach(c),d=r(e,"P",{}),l(d).forEach(c),h=r(e,"P",{}),l(h).forEach(c)},m(e,s){i(e,t,s),f(t,o),i(e,d,s),i(e,h,s)},p:g,d(e){e&&c(t),e&&c(d),e&&c(h)}}}function w(e){let t,o,u,p,m=e.name+"",g=e.count+"";return{c(){t=s("div"),o=a(m),u=a(" - "),p=a(g),this.h()},l(e){t=r(e,"DIV",{class:!0});var s=l(t);o=n(s,m),u=n(s," - "),p=n(s,g),s.forEach(c),this.h()},h(){d(t,"class","")},m(e,s){i(e,t,s),f(t,o),f(t,u),f(t,p)},p(e,t){e.foodForMeal&&m!==(m=t.name+"")&&h(o,m),e.foodForMeal&&g!==(g=t.count+"")&&h(p,g)},d(e){e&&c(t)}}}function A(e){let t,o,u,p=e.name+"";function m(...t){return e.click_handler(e,...t)}return{c(){t=s("button"),o=a(p),this.h()},l(e){t=r(e,"BUTTON",{class:!0});var s=l(t);o=n(s,p),s.forEach(c),this.h()},h(){d(t,"class","box w-full svelte-1pcmpj2"),u=v(t,"click",m)},m(e,s){i(e,t,s),f(t,o)},p(t,s){e=s,t.filteredFood&&p!==(p=e.name+"")&&h(o,p)},d(e){e&&c(t),u()}}}function T(e){let t,o,h,M,v,F,b,x=""!==e.successMessage&&I(e),N=""!==e.errorMessage&&P(e);function j(e,t){return 0===t.food.length?O:S}let y=j(0,e),E=y(e);return{c(){t=u(),o=s("h2"),h=a("Add Meal"),M=u(),x&&x.c(),v=u(),N&&N.c(),F=u(),E.c(),b=p(),this.h()},l(e){t=m(e),o=r(e,"H2",{class:!0});var s=l(o);h=n(s,"Add Meal"),s.forEach(c),M=m(e),x&&x.l(e),v=m(e),N&&N.l(e),F=m(e),E.l(e),b=p(),this.h()},h(){document.title="Update Food",d(o,"class","text-xl mb-2")},m(e,s){i(e,t,s),i(e,o,s),f(o,h),i(e,M,s),x&&x.m(e,s),i(e,v,s),N&&N.m(e,s),i(e,F,s),E.m(e,s),i(e,b,s)},p(e,t){""!==t.successMessage?x?x.p(e,t):((x=I(t)).c(),x.m(v.parentNode,v)):x&&(x.d(1),x=null),""!==t.errorMessage?N?N.p(e,t):((N=P(t)).c(),N.m(F.parentNode,F)):N&&(N.d(1),N=null),y===(y=j(0,t))&&E?E.p(e,t):(E.d(1),(E=y(t))&&(E.c(),E.m(b.parentNode,b)))},i:g,o:g,d(e){e&&c(t),e&&c(o),e&&c(M),x&&x.d(e),e&&c(v),N&&N.d(e),e&&c(F),E.d(e),e&&c(b)}}}function U(e,t,o){let s="",a=[],r="",l="",n="",c=[],d=[],i={name:"",protein:0,carbs:0,fat:0,food:[]},f=[];function h(e){const t=j(e.name,f);-1!==t?o("foodForMeal",f[t].count=f[t].count+1,f):(e.count=1,f.push(e)),o("foodForMeal",f),console.log(f),i.protein=i.protein+e.protein,i.carbs=i.carbs+e.carbs,i.fat=i.fat+e.fat,i.food.push(e)}M(async()=>{o("food",a=JSON.parse(localStorage.getItem("food")).sort((e,t)=>e.name>t.name)||[]),d=JSON.parse(localStorage.getItem("recentFood"))||[],o("filteredFood",c=a)});return{name:s,food:a,errorMessage:r,successMessage:l,filter:n,filteredFood:c,foodForMeal:f,handleAdd:function(){if(event.preventDefault(),o("successMessage",l=""),o("errorMessage",r=""),-1!==j(s,a))return void o("errorMessage",r="Food with this name already exist");let e={};if(i.name=s,!(e=y(i)).valid)return o("errorMessage",r=e.message),void console.log("error",r);a.push(i),localStorage.setItem("food",JSON.stringify(a)),E(i,d),o("foodForMeal",f=[])},handleFoodClick:h,handleFilter:function(){""===n&&o("filteredFood",c=a),o("filteredFood",c=a.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())))},input0_input_handler:function(){s=this.value,o("name",s)},input1_input_handler:function(){n=this.value,o("filter",n)},click_handler:({i:e})=>h(a[e])}}export default class extends e{constructor(e){super(),t(this,e,U,T,o,{})}}
