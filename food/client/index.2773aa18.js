import{S as e,i as t,s as a,a as o,z as l,g as r,k as n,n as s,f as c,G as i,e as f,t as d,c as h,b as u,d as g,h as p,j as m,l as v,y as x,H as I,I as A,J as b,K as E}from"./index.763e8bca.js";function F(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.i=a,o}function N(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.count=t[a].count,o.i=a,o}function S(e){let t,a,l,s,i,m,S,w,G,k,O,_,y,T,j,D,J,V,z,U,B,L,Y,$,H,K,q=Math.round(e.calories)+"",Q=Math.round(e.protein)+"",R=Math.round(e.carbs)+"",W=Math.round(e.fat)+"",X=e.isGoal&&P(e),Z=e.foodIAte,ee=[];for(let t=0;t<Z.length;t+=1)ee[t]=C(N(e,Z,t));let te=e.filteredFood,ae=[];for(let t=0;t<te.length;t+=1)ae[t]=M(F(e,te,t));return{c(){t=f("button"),a=d("Clear"),l=o(),X&&X.c(),s=o(),i=f("div"),m=f("span"),S=d("Cal: "),w=d(q),G=o(),k=f("span"),O=d("Pro:"),_=d(Q),y=o(),T=f("span"),j=d("Car:"),D=d(R),J=o(),V=f("span"),z=d("Fat:"),U=d(W),B=o();for(let e=0;e<ee.length;e+=1)ee[e].c();L=o(),Y=f("input"),$=o(),H=f("div");for(let e=0;e<ae.length;e+=1)ae[e].c();this.h()},l(e){t=h(e,"BUTTON",{class:!0});var o=u(t);a=g(o,"Clear"),o.forEach(c),l=r(e),X&&X.l(e),s=r(e),i=h(e,"DIV",{class:!0});var n=u(i);m=h(n,"SPAN",{class:!0});var f=u(m);S=g(f,"Cal: "),w=g(f,q),f.forEach(c),G=r(n),k=h(n,"SPAN",{class:!0});var d=u(k);O=g(d,"Pro:"),_=g(d,Q),d.forEach(c),y=r(n),T=h(n,"SPAN",{class:!0});var p=u(T);j=g(p,"Car:"),D=g(p,R),p.forEach(c),J=r(n),V=h(n,"SPAN",{class:!0});var v=u(V);z=g(v,"Fat:"),U=g(v,W),v.forEach(c),n.forEach(c),B=r(e);for(let t=0;t<ee.length;t+=1)ee[t].l(e);L=r(e),Y=h(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),$=r(e),H=h(e,"DIV",{class:!0});var x=u(H);for(let e=0;e<ae.length;e+=1)ae[e].l(x);x.forEach(c),this.h()},h(){p(t,"class","clear svelte-xu39wc"),p(m,"class","svelte-xu39wc"),p(k,"class","svelte-xu39wc"),p(T,"class","svelte-xu39wc"),p(V,"class","svelte-xu39wc"),p(i,"class","total svelte-xu39wc"),p(Y,"class","filter svelte-xu39wc"),p(Y,"type","text"),p(Y,"placeholder","filter"),p(Y,"maxlength","5"),p(Y,"size","3"),p(H,"class","wrapper svelte-xu39wc"),K=[I(t,"click",e.handleClear),I(Y,"input",e.input_input_handler),I(Y,"input",e.handleFilter)]},m(o,r){n(o,t,r),v(t,a),n(o,l,r),X&&X.m(o,r),n(o,s,r),n(o,i,r),v(i,m),v(m,S),v(m,w),v(i,G),v(i,k),v(k,O),v(k,_),v(i,y),v(i,T),v(T,j),v(T,D),v(i,J),v(i,V),v(V,z),v(V,U),n(o,B,r);for(let e=0;e<ee.length;e+=1)ee[e].m(o,r);n(o,L,r),n(o,Y,r),A(Y,e.filter),n(o,$,r),n(o,H,r);for(let e=0;e<ae.length;e+=1)ae[e].m(H,null)},p(e,t){if(t.isGoal?X?X.p(e,t):((X=P(t)).c(),X.m(s.parentNode,s)):X&&(X.d(1),X=null),e.calories&&q!==(q=Math.round(t.calories)+"")&&x(w,q),e.protein&&Q!==(Q=Math.round(t.protein)+"")&&x(_,Q),e.carbs&&R!==(R=Math.round(t.carbs)+"")&&x(D,R),e.fat&&W!==(W=Math.round(t.fat)+"")&&x(U,W),e.foodIAte){let a;for(Z=t.foodIAte,a=0;a<Z.length;a+=1){const o=N(t,Z,a);ee[a]?ee[a].p(e,o):(ee[a]=C(o),ee[a].c(),ee[a].m(L.parentNode,L))}for(;a<ee.length;a+=1)ee[a].d(1);ee.length=Z.length}if(e.filter&&Y.value!==t.filter&&A(Y,t.filter),e.handleFoodClick||e.food||e.filteredFood){let a;for(te=t.filteredFood,a=0;a<te.length;a+=1){const o=F(t,te,a);ae[a]?ae[a].p(e,o):(ae[a]=M(o),ae[a].c(),ae[a].m(H,null))}for(;a<ae.length;a+=1)ae[a].d(1);ae.length=te.length}},d(e){e&&c(t),e&&c(l),X&&X.d(e),e&&c(s),e&&c(i),e&&c(B),b(ee,e),e&&c(L),e&&c(Y),e&&c($),e&&c(H),b(ae,e),E(K)}}}function w(e){let t,a,l,i,m,x,I;return{c(){t=f("p"),a=d("You have no food."),l=o(),i=f("p"),m=f("a"),x=d("Add some food first"),I=d("."),this.h()},l(e){t=h(e,"P",{});var o=u(t);a=g(o,"You have no food."),o.forEach(c),l=r(e),i=h(e,"P",{});var n=u(i);m=h(n,"A",{href:!0});var s=u(m);x=g(s,"Add some food first"),s.forEach(c),I=g(n,"."),n.forEach(c),this.h()},h(){p(m,"href","/food/manage-food/add-food")},m(e,o){n(e,t,o),v(t,a),n(e,l,o),n(e,i,o),v(i,m),v(m,x),v(i,I)},p:s,d(e){e&&c(t),e&&c(l),e&&c(i)}}}function P(e){let t,a,l,s,i,I,A,b,E,F,N=Math.round(e.goal-e.calories)+"";return{c(){t=f("div"),a=f("span"),l=d("Goal: "),s=d(e.goal),i=o(),I=f("span"),A=d("Left:"),b=f("span"),E=d(N),this.h()},l(o){t=h(o,"DIV",{class:!0});var n=u(t);a=h(n,"SPAN",{class:!0});var f=u(a);l=g(f,"Goal: "),s=g(f,e.goal),f.forEach(c),i=r(n),I=h(n,"SPAN",{class:!0});var d=u(I);A=g(d,"Left:"),d.forEach(c),b=h(n,"SPAN",{class:!0});var p=u(b);E=g(p,N),p.forEach(c),n.forEach(c),this.h()},h(){p(a,"class","svelte-xu39wc"),p(I,"class","svelte-xu39wc"),p(b,"class",F=m(e.remaining)+" svelte-xu39wc"),p(t,"class","goal svelte-xu39wc")},m(e,o){n(e,t,o),v(t,a),v(a,l),v(a,s),v(t,i),v(t,I),v(I,A),v(t,b),v(b,E)},p(e,t){e.goal&&x(s,t.goal),(e.goal||e.calories)&&N!==(N=Math.round(t.goal-t.calories)+"")&&x(E,N),e.remaining&&F!==(F=m(t.remaining)+" svelte-xu39wc")&&p(b,"class",F)},d(e){e&&c(t)}}}function C(e){let t,a,l,s,i=e.count+"",m=e.name+"";return{c(){t=f("div"),a=d(i),l=o(),s=d(m),this.h()},l(e){t=h(e,"DIV",{class:!0});var o=u(t);a=g(o,i),l=r(o),s=g(o,m),o.forEach(c),this.h()},h(){p(t,"class","ate svelte-xu39wc")},m(e,o){n(e,t,o),v(t,a),v(t,l),v(t,s)},p(e,t){e.foodIAte&&i!==(i=t.count+"")&&x(a,i),e.foodIAte&&m!==(m=t.name+"")&&x(s,m)},d(e){e&&c(t)}}}function M(e){let t,a,o,l=e.name+"";function r(...t){return e.click_handler(e,...t)}return{c(){t=f("button"),a=d(l),this.h()},l(e){t=h(e,"BUTTON",{class:!0});var o=u(t);a=g(o,l),o.forEach(c),this.h()},h(){p(t,"class","box svelte-xu39wc"),o=I(t,"click",r)},m(e,o){n(e,t,o),v(t,a)},p(t,o){e=o,t.filteredFood&&l!==(l=e.name+"")&&x(a,l)},d(e){e&&c(t),o()}}}function G(e){let t,a;function i(e,t){return 0===t.food.length?w:S}let f=i(0,e),d=f(e);return{c(){t=o(),d.c(),a=l(),this.h()},l(e){t=r(e),d.l(e),a=l(),this.h()},h(){document.title="Eat"},m(e,o){n(e,t,o),d.m(e,o),n(e,a,o)},p(e,t){f===(f=i(0,t))&&d?d.p(e,t):(d.d(1),(d=f(t))&&(d.c(),d.m(a.parentNode,a)))},i:s,o:s,d(e){e&&c(t),d.d(e),e&&c(a)}}}function k(e,t,a){let o=!1,l=2e3,r=[],n=[],s=0,c=0,f=0,d="",h=[];function u(e){a("filteredFood",h=n),a("filter",d="");let t=r.findIndex(t=>t.name===e.name);-1===t?(e.count=1,a("foodIAte",r=[...r,e])):a("foodIAte",r[t].count=r[t].count+1,r),localStorage.setItem("ate",JSON.stringify(r)),g()}i(async()=>{a("isGoal",o=localStorage.getItem("isGoal")||!1),a("goal",l=localStorage.getItem("goal")||2e3),a("food",n=JSON.parse(localStorage.getItem("food"))||[]),a("filteredFood",h=n),a("foodIAte",r=JSON.parse(localStorage.getItem("ate"))||[]),g()});const g=e=>{a("protein",s=r.reduce(function(e,t){return e+t.protein*t.count},0)),a("carbs",c=r.reduce(function(e,t){return e+t.carbs*t.count},0)),a("fat",f=r.reduce(function(e,t){return e+t.fat*t.count},0))};let p,m;return e.$$.update=((e={protein:1,carbs:1,fat:1,goal:1,calories:1})=>{(e.protein||e.carbs||e.fat)&&a("calories",m=parseFloat(Number(4*s+4*c+9*f).toFixed(1))),(e.goal||e.calories)&&a("remaining",p=l-m<=0?"remaining":"")}),{isGoal:o,goal:l,foodIAte:r,food:n,protein:s,carbs:c,fat:f,filter:d,filteredFood:h,handleFoodClick:u,handleClear:function(){localStorage.removeItem("ate"),a("protein",s=0),a("carbs",c=0),a("fat",f=0),a("foodIAte",r=[])},handleFilter:function(){""===d&&a("filteredFood",h=n),a("filteredFood",h=n.filter(e=>e.name.includes(d)))},remaining:p,calories:m,input_input_handler:function(){d=this.value,a("filter",d)},click_handler:({i:e})=>u(n[e])}}export default class extends e{constructor(e){super(),t(this,e,k,G,a,{})}}
