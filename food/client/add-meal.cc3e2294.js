import{S as e,i as t,s as a,e as o,t as r,b as s,d as n,f as l,h as c,k as i,l as f,m as d,x as h,a as u,y as p,j as m,q as g,E as v,p as M,N as b,D as F,c as x,g as k,P as E,Q as N,o as $,r as _,R as P,U as I,I as S,n as y}from"./index.9cf44aa4.js";import{I as A,t as T,p as w}from"./index.e287424e.js";import{f as D,a as O}from"./validate.d83e4ffc.js";import{c as j}from"./helpers.8433149e.js";import{a as C}from"./recentFood.fd6a6ea9.js";function U(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.i=a,o}function q(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.count=t[a].count,o.i=a,o}function B(e){let t,a;return{c(){t=o("p"),a=r(e.successMessage),this.h()},l(o){t=s(o,"P",{class:!0});var r=n(t);a=l(r,e.successMessage),r.forEach(c),this.h()},h(){i(t,"class","success svelte-q93k07")},m(e,o){f(e,t,o),d(t,a)},p(e,t){e.successMessage&&h(a,t.successMessage)},d(e){e&&c(t)}}}function V(e){let t,a;return{c(){t=o("p"),a=r(e.errorMessage),this.h()},l(o){t=s(o,"P",{class:!0});var r=n(t);a=l(r,e.errorMessage),r.forEach(c),this.h()},h(){i(t,"class","error svelte-q93k07")},m(e,o){f(e,t,o),d(t,a)},p(e,t){e.errorMessage&&h(a,t.errorMessage)},d(e){e&&c(t)}}}function z(e){let t,a,h,p,b,x,k,$,_,y,A,T,w,D=0!==e.foodForMeal.length&&L(e),O=e.foodForMeal,j=[];for(let t=0;t<O.length;t+=1)j[t]=Y(q(e,O,t));const C=e=>g(j[e],1,1,()=>{j[e]=null});let B=e.filteredFood,V=[];for(let t=0;t<B.length;t+=1)V[t]=H(U(e,B,t));return{c(){t=o("input"),a=u(),D&&D.c(),h=u(),p=o("div");for(let e=0;e<j.length;e+=1)j[e].c();b=u(),x=o("button"),k=r("Add"),$=u(),_=o("input"),y=u(),A=o("div");for(let e=0;e<V.length;e+=1)V[e].c();this.h()},l(e){t=s(e,"INPUT",{type:!0,placeholder:!0,maxlength:!0,size:!0,class:!0}),a=m(e),D&&D.l(e),h=m(e),p=s(e,"DIV",{class:!0});var o=n(p);for(let e=0;e<j.length;e+=1)j[e].l(o);o.forEach(c),b=m(e),x=s(e,"BUTTON",{class:!0});var r=n(x);k=l(r,"Add"),r.forEach(c),$=m(e),_=s(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),y=m(e),A=s(e,"DIV",{class:!0});var i=n(A);for(let e=0;e<V.length;e+=1)V[e].l(i);i.forEach(c),this.h()},h(){i(t,"type","text"),i(t,"placeholder","Name"),i(t,"maxlength","20"),i(t,"size","20"),i(t,"class","svelte-q93k07"),i(p,"class","ate-wrapper svelte-q93k07"),i(x,"class","block bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3 mb-3"),i(_,"class","filter bg-gray-200 w-24 px-2 svelte-q93k07"),i(_,"type","text"),i(_,"placeholder","Search"),i(_,"maxlength","5"),i(_,"size","3"),i(A,"class","pb-6"),w=[E(t,"input",e.input0_input_handler),E(x,"click",N(e.handleAdd)),E(_,"input",e.input1_input_handler),E(_,"input",e.handleFilter)]},m(o,r){f(o,t,r),I(t,e.name),f(o,a,r),D&&D.m(o,r),f(o,h,r),f(o,p,r);for(let e=0;e<j.length;e+=1)j[e].m(p,null);f(o,b,r),f(o,x,r),d(x,k),f(o,$,r),f(o,_,r),I(_,e.filter),f(o,y,r),f(o,A,r);for(let e=0;e<V.length;e+=1)V[e].m(A,null);T=!0},p(e,a){if(e.name&&t.value!==a.name&&I(t,a.name),0!==a.foodForMeal.length?D?D.p(e,a):((D=L(a)).c(),D.m(h.parentNode,h)):D&&(D.d(1),D=null),e.handlePlus||e.foodForMeal||e.plus||e.handleDelete||e.trash){let t;for(O=a.foodForMeal,t=0;t<O.length;t+=1){const o=q(a,O,t);j[t]?(j[t].p(e,o),M(j[t],1)):(j[t]=Y(o),j[t].c(),M(j[t],1),j[t].m(p,null))}for(F(),t=O.length;t<j.length;t+=1)C(t);v()}if(e.filter&&_.value!==a.filter&&I(_,a.filter),e.handleFoodClick||e.food||e.filteredFood){let t;for(B=a.filteredFood,t=0;t<B.length;t+=1){const o=U(a,B,t);V[t]?V[t].p(e,o):(V[t]=H(o),V[t].c(),V[t].m(A,null))}for(;t<V.length;t+=1)V[t].d(1);V.length=B.length}},i(e){if(!T){for(let e=0;e<O.length;e+=1)M(j[e]);T=!0}},o(e){j=j.filter(Boolean);for(let e=0;e<j.length;e+=1)g(j[e]);T=!1},d(e){e&&c(t),e&&c(a),D&&D.d(e),e&&c(h),e&&c(p),S(j,e),e&&c(b),e&&c(x),e&&c($),e&&c(_),e&&c(y),e&&c(A),S(V,e),P(w)}}}function J(e){let t,a,i,h;return{c(){t=o("p"),a=r("You have no food."),i=o("p"),h=o("p")},l(e){t=s(e,"P",{});var o=n(t);a=l(o,"You have no food."),o.forEach(c),i=s(e,"P",{}),n(i).forEach(c),h=s(e,"P",{}),n(h).forEach(c)},m(e,o){f(e,t,o),d(t,a),f(e,i,o),f(e,h,o)},p:y,i:y,o:y,d(e){e&&c(t),e&&c(i),e&&c(h)}}}function L(e){let t,a,i,p,g,v,M,b,F,x,k,E,N,$,_,P,I=Math.round(e.calories)+"",S=Math.round(e.protein)+"",y=Math.round(e.carbs)+"",A=Math.round(e.fat)+"";return{c(){t=o("div"),a=o("span"),i=r("Cal:"),p=r(I),g=u(),v=o("span"),M=r("P:"),b=r(S),F=u(),x=o("span"),k=r("C:"),E=r(y),N=u(),$=o("span"),_=r("F:"),P=r(A)},l(e){t=s(e,"DIV",{});var o=n(t);a=s(o,"SPAN",{});var r=n(a);i=l(r,"Cal:"),p=l(r,I),r.forEach(c),g=m(o),v=s(o,"SPAN",{});var f=n(v);M=l(f,"P:"),b=l(f,S),f.forEach(c),F=m(o),x=s(o,"SPAN",{});var d=n(x);k=l(d,"C:"),E=l(d,y),d.forEach(c),N=m(o),$=s(o,"SPAN",{});var h=n($);_=l(h,"F:"),P=l(h,A),h.forEach(c),o.forEach(c)},m(e,o){f(e,t,o),d(t,a),d(a,i),d(a,p),d(t,g),d(t,v),d(v,M),d(v,b),d(t,F),d(t,x),d(x,k),d(x,E),d(t,N),d(t,$),d($,_),d($,P)},p(e,t){e.calories&&I!==(I=Math.round(t.calories)+"")&&h(p,I),e.protein&&S!==(S=Math.round(t.protein)+"")&&h(b,S),e.carbs&&y!==(y=Math.round(t.carbs)+"")&&h(E,y),e.fat&&A!==(A=Math.round(t.fat)+"")&&h(P,A)},d(e){e&&c(t)}}}function Y(e){let t,a,p,v,b,F,I,S,y,D,O,j=e.name+"",C=e.count+"";const U=new A({props:{data:T}});function q(...t){return e.click_handler(e,...t)}const B=new A({props:{data:w}});function V(...t){return e.click_handler_1(e,...t)}return{c(){t=o("button"),x(U.$$.fragment),a=u(),p=o("div"),v=r(j),b=u(),F=o("div"),I=r(C),S=u(),y=o("button"),x(B.$$.fragment),this.h()},l(e){t=s(e,"BUTTON",{class:!0,href:!0});var o=n(t);k(U.$$.fragment,o),o.forEach(c),a=m(e),p=s(e,"DIV",{});var r=n(p);v=l(r,j),r.forEach(c),b=m(e),F=s(e,"DIV",{class:!0});var i=n(F);I=l(i,C),i.forEach(c),S=m(e),y=s(e,"BUTTON",{class:!0,href:!0});var f=n(y);k(B.$$.fragment,f),f.forEach(c),this.h()},h(){i(t,"class","text-red-400 text-left"),i(t,"href","#"),i(F,"class",""),i(y,"class",""),i(y,"href","#"),O=[E(t,"click",N(q)),E(y,"click",N(V))]},m(e,o){f(e,t,o),$(U,t,null),f(e,a,o),f(e,p,o),d(p,v),f(e,b,o),f(e,F,o),d(F,I),f(e,S,o),f(e,y,o),$(B,y,null),D=!0},p(t,a){e=a,D&&!t.foodForMeal||j===(j=e.name+"")||h(v,j),D&&!t.foodForMeal||C===(C=e.count+"")||h(I,C)},i(e){D||(M(U.$$.fragment,e),M(B.$$.fragment,e),D=!0)},o(e){g(U.$$.fragment,e),g(B.$$.fragment,e),D=!1},d(e){e&&c(t),_(U),e&&c(a),e&&c(p),e&&c(b),e&&c(F),e&&c(S),e&&c(y),_(B),P(O)}}}function H(e){let t,a,u,p=e.name+"";function m(...t){return e.click_handler_2(e,...t)}return{c(){t=o("button"),a=r(p),this.h()},l(e){t=s(e,"BUTTON",{class:!0});var o=n(t);a=l(o,p),o.forEach(c),this.h()},h(){i(t,"class","box w-full svelte-q93k07"),u=E(t,"click",m)},m(e,o){f(e,t,o),d(t,a)},p(t,o){e=o,t.filteredFood&&p!==(p=e.name+"")&&h(a,p)},d(e){e&&c(t),u()}}}function Q(e){let t,a,h,b,x,k,E,N,$,_,P=""!==e.successMessage&&B(e),I=""!==e.errorMessage&&V(e);const S=[J,z],y=[];function A(e,t){return 0===t.food.length?0:1}return E=A(0,e),N=y[E]=S[E](e),{c(){t=u(),a=o("h2"),h=r("Add Meal"),b=u(),P&&P.c(),x=u(),I&&I.c(),k=u(),N.c(),$=p(),this.h()},l(e){t=m(e),a=s(e,"H2",{class:!0});var o=n(a);h=l(o,"Add Meal"),o.forEach(c),b=m(e),P&&P.l(e),x=m(e),I&&I.l(e),k=m(e),N.l(e),$=p(),this.h()},h(){document.title="Update Food",i(a,"class","text-xl mb-2")},m(e,o){f(e,t,o),f(e,a,o),d(a,h),f(e,b,o),P&&P.m(e,o),f(e,x,o),I&&I.m(e,o),f(e,k,o),y[E].m(e,o),f(e,$,o),_=!0},p(e,t){""!==t.successMessage?P?P.p(e,t):((P=B(t)).c(),P.m(x.parentNode,x)):P&&(P.d(1),P=null),""!==t.errorMessage?I?I.p(e,t):((I=V(t)).c(),I.m(k.parentNode,k)):I&&(I.d(1),I=null);let a=E;(E=A(0,t))===a?y[E].p(e,t):(F(),g(y[a],1,1,()=>{y[a]=null}),v(),(N=y[E])||(N=y[E]=S[E](t)).c(),M(N,1),N.m($.parentNode,$))},i(e){_||(M(N),_=!0)},o(e){g(N),_=!1},d(e){e&&c(t),e&&c(a),e&&c(b),P&&P.d(e),e&&c(x),I&&I.d(e),e&&c(k),y[E].d(e),e&&c($)}}}function R(e,t,a){let o="",r=[],s="",n="",l="",c=[],i=[],f={name:"",protein:0,carbs:0,fat:0,food:[]},d=[],h=0,u=0,p=0;function m(e){const t=D(e.name,d);-1!==t?a("foodForMeal",d[t].count=d[t].count+1,d):(e.count=1,d.push(e)),a("foodForMeal",d),f.protein=f.protein+e.protein,f.carbs=f.carbs+e.carbs,f.fat=f.fat+e.fat,f.food.push(e);const o=j(d);a("protein",h=o.protein),a("carbs",u=o.carbs),a("fat",p=o.fat)}function g(e){let t=d.filter(function(t,a,o){return t.name!==e.name});a("foodForMeal",d=t);const o=j(d);a("protein",h=o.protein),a("carbs",u=o.carbs),a("fat",p=o.fat)}function v(e){let t=d.findIndex(t=>t.name===e.name);a("foodForMeal",d[t].count=d[t].count+1,d);const o=j(d);a("protein",h=o.protein),a("carbs",u=o.carbs),a("fat",p=o.fat)}b(async()=>{a("food",r=JSON.parse(localStorage.getItem("food")).sort((e,t)=>e.name>t.name)||[]),i=JSON.parse(localStorage.getItem("recentFood"))||[],a("filteredFood",c=r)});let M;return e.$$.update=((e={protein:1,carbs:1,fat:1})=>{(e.protein||e.carbs||e.fat)&&a("calories",M=parseFloat(Number(4*h+4*u+9*p).toFixed(1)))}),{name:o,food:r,errorMessage:s,successMessage:n,filter:l,filteredFood:c,foodForMeal:d,protein:h,carbs:u,fat:p,handleAdd:function(){event.preventDefault(),a("successMessage",n=""),a("errorMessage",s="");const e=D(o,r);if(console.log(o),console.log(r),console.log(e),-1!==e)return void a("errorMessage",s="Food with this name already exist");let t={};if(f.name=o,!(t=O(f)).valid)return a("errorMessage",s=t.message),void console.log("error",s);r.push(f),localStorage.setItem("food",JSON.stringify(r)),C(f,i),a("foodForMeal",d=[])},handleFoodClick:m,handleFilter:function(){""===l&&a("filteredFood",c=r),a("filteredFood",c=r.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())))},handleDelete:g,handlePlus:v,calories:M,input0_input_handler:function(){o=this.value,a("name",o)},click_handler:({i:e})=>g(d[e]),click_handler_1:({i:e})=>v(d[e]),input1_input_handler:function(){l=this.value,a("filter",l)},click_handler_2:({i:e})=>m(r[e])}}export default class extends e{constructor(e){super(),t(this,e,R,Q,a,{})}}
