import{S as e,i as s,s as t,e as a,t as o,b as r,d as l,f as n,h as c,k as d,l as i,m as h,x as f,a as u,y as p,j as m,n as g,N as v,P as M,V as x,Q as b,U as F,I as E,R as N}from"./index.9cf44aa4.js";import"./index.e287424e.js";import{a as w}from"./validate.d83e4ffc.js";import{a as y}from"./recentFood.fd6a6ea9.js";function I(e,s,t){const a=Object.create(e);return a.id=s[t].id,a.name=s[t].name,a.i=t,a}function _(e){let s,t;return{c(){s=a("p"),t=o(e.successMessage),this.h()},l(a){s=r(a,"P",{class:!0});var o=l(s);t=n(o,e.successMessage),o.forEach(c),this.h()},h(){d(s,"class","success svelte-1ohmwde")},m(e,a){i(e,s,a),h(s,t)},p(e,s){e.successMessage&&f(t,s.successMessage)},d(e){e&&c(s)}}}function P(e){let s,t;return{c(){s=a("p"),t=o(e.errorMessage),this.h()},l(a){s=r(a,"P",{class:!0});var o=l(s);t=n(o,e.errorMessage),o.forEach(c),this.h()},h(){d(s,"class","error svelte-1ohmwde")},m(e,a){i(e,s,a),h(s,t)},p(e,s){e.errorMessage&&f(t,s.errorMessage)},d(e){e&&c(s)}}}function S(e){let s,t,f,p,g,v,w,y,_,P,S,k,j=e.filteredFood,A=[];for(let s=0;s<j.length;s+=1)A[s]=O(I(e,j,s));return{c(){s=a("form"),t=a("div"),f=a("input"),p=u(),g=a("div"),v=a("button"),w=o("Add"),y=u(),_=a("input"),P=u(),S=a("div");for(let e=0;e<A.length;e+=1)A[e].c();this.h()},l(e){s=r(e,"FORM",{class:!0});var a=l(s);t=r(a,"DIV",{});var o=l(t);f=r(o,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),o.forEach(c),p=m(a),g=r(a,"DIV",{class:!0});var d=l(g);v=r(d,"BUTTON",{class:!0});var i=l(v);w=n(i,"Add"),i.forEach(c),d.forEach(c),a.forEach(c),y=m(e),_=r(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),P=m(e),S=r(e,"DIV",{style:!0});var h=l(S);for(let e=0;e<A.length;e+=1)A[e].l(h);h.forEach(c),this.h()},h(){d(f,"class"," svelte-1ohmwde"),d(f,"type","text"),d(f,"placeholder","Name"),d(f,"maxlength","20"),d(f,"size","20"),d(v,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3"),d(g,"class","mt-3"),d(s,"class","svelte-1ohmwde"),d(_,"class","filter bg-gray-200 w-24 px-2 svelte-1ohmwde"),d(_,"type","text"),d(_,"placeholder","Search"),d(_,"maxlength","5"),d(_,"size","3"),x(S,"margin-top",(e.food.length>=10?0:20)+"px"),k=[M(f,"input",e.input0_input_handler),M(v,"click",b(e.handleAdd)),M(_,"input",e.input1_input_handler),M(_,"input",e.handleFilter)]},m(a,o){i(a,s,o),h(s,t),h(t,f),F(f,e.name),h(s,p),h(s,g),h(g,v),h(v,w),i(a,y,o),i(a,_,o),F(_,e.filter),i(a,P,o),i(a,S,o);for(let e=0;e<A.length;e+=1)A[e].m(S,null)},p(e,s){if(e.name&&f.value!==s.name&&F(f,s.name),e.filter&&_.value!==s.filter&&F(_,s.filter),e.handleFoodClick||e.food||e.filteredFood){let t;for(j=s.filteredFood,t=0;t<j.length;t+=1){const a=I(s,j,t);A[t]?A[t].p(e,a):(A[t]=O(a),A[t].c(),A[t].m(S,null))}for(;t<A.length;t+=1)A[t].d(1);A.length=j.length}e.food&&x(S,"margin-top",(s.food.length>=10?0:20)+"px")},d(e){e&&c(s),e&&c(y),e&&c(_),e&&c(P),e&&c(S),E(A,e),N(k)}}}function k(e){let s,t,d,f;return{c(){s=a("p"),t=o("You have no food."),d=a("p"),f=a("p")},l(e){s=r(e,"P",{});var a=l(s);t=n(a,"You have no food."),a.forEach(c),d=r(e,"P",{}),l(d).forEach(c),f=r(e,"P",{}),l(f).forEach(c)},m(e,a){i(e,s,a),h(s,t),i(e,d,a),i(e,f,a)},p:g,d(e){e&&c(s),e&&c(d),e&&c(f)}}}function O(e){let s,t,p,g,v,x=e.name+"";function b(...s){return e.click_handler(e,...s)}return{c(){s=a("div"),t=a("button"),p=o(x),g=u(),this.h()},l(e){s=r(e,"DIV",{class:!0});var a=l(s);t=r(a,"BUTTON",{});var o=l(t);p=n(o,x),o.forEach(c),g=m(a),a.forEach(c),this.h()},h(){d(s,"class","box svelte-1ohmwde"),v=M(t,"click",b)},m(e,a){i(e,s,a),h(s,t),h(t,p),h(s,g)},p(s,t){e=t,s.filteredFood&&x!==(x=e.name+"")&&f(p,x)},d(e){e&&c(s),v()}}}function j(e){let s,t,f,v,M,x,b,F=""!==e.successMessage&&_(e),E=""!==e.errorMessage&&P(e);function N(e,s){return 0===s.food.length?k:S}let w=N(0,e),y=w(e);return{c(){s=u(),t=a("h2"),f=o("Add Meal"),v=u(),F&&F.c(),M=u(),E&&E.c(),x=u(),y.c(),b=p(),this.h()},l(e){s=m(e),t=r(e,"H2",{class:!0});var a=l(t);f=n(a,"Add Meal"),a.forEach(c),v=m(e),F&&F.l(e),M=m(e),E&&E.l(e),x=m(e),y.l(e),b=p(),this.h()},h(){document.title="Update Food",d(t,"class","text-xl mb-2")},m(e,a){i(e,s,a),i(e,t,a),h(t,f),i(e,v,a),F&&F.m(e,a),i(e,M,a),E&&E.m(e,a),i(e,x,a),y.m(e,a),i(e,b,a)},p(e,s){""!==s.successMessage?F?F.p(e,s):((F=_(s)).c(),F.m(M.parentNode,M)):F&&(F.d(1),F=null),""!==s.errorMessage?E?E.p(e,s):((E=P(s)).c(),E.m(x.parentNode,x)):E&&(E.d(1),E=null),w===(w=N(0,s))&&y?y.p(e,s):(y.d(1),(y=w(s))&&(y.c(),y.m(b.parentNode,b)))},i:g,o:g,d(e){e&&c(s),e&&c(t),e&&c(v),F&&F.d(e),e&&c(M),E&&E.d(e),e&&c(x),y.d(e),e&&c(b)}}}function A(e,s,t){let a="",o=[],r="",l="",n="",c=[],d=[],i={name:"",protein:0,carbs:0,fat:0,food:[]};function h(e){i.protein=i.protein+e.protein,i.carbs=i.carbs+e.carbs,i.fat=i.fat+e.fat,i.food.push(e)}v(async()=>{t("food",o=JSON.parse(localStorage.getItem("food")).sort((e,s)=>e.name>s.name)||[]),d=JSON.parse(localStorage.getItem("recentFood"))||[],t("filteredFood",c=o)});return{name:a,food:o,errorMessage:r,successMessage:l,filter:n,filteredFood:c,handleAdd:function(){event.preventDefault(),t("successMessage",l=""),t("errorMessage",r="");let e={};if(i.name=a,!(e=w(i)).valid)return t("errorMessage",r=e.message),void console.log("error",r);o.push(i),localStorage.setItem("food",JSON.stringify(o)),y(i,d)},handleFoodClick:h,handleFilter:function(){""===n&&t("filteredFood",c=o),t("filteredFood",c=o.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())))},input0_input_handler:function(){a=this.value,t("name",a)},input1_input_handler:function(){n=this.value,t("filter",n)},click_handler:({i:e})=>h(o[e])}}export default class extends e{constructor(e){super(),s(this,e,A,j,t,{})}}
