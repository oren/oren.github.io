import{S as e,i as t,s as a,e as s,t as o,c as n,b as r,d as l,f as i,h as d,k as c,l as u,y as f,a as h,z as p,g as m,w as g,F as v,v as F,O as b,E as M,V as _,P as x,R as y,n as U,T as N,U as w,o as P,p as j,Q as k,q as I,x as S,J as E}from"./index.228bdbf4.js";import{I as T,t as O}from"./index.e715e59d.js";import{v as $}from"./validate.b1dd7914.js";function z(e,t,a){const s=Object.create(e);return s.id=t[a].id,s.name=t[a].name,s.i=a,s}function C(e){let t,a;return{c(){t=s("p"),a=o(e.successMessage),this.h()},l(s){t=n(s,"P",{class:!0});var o=r(t);a=l(o,e.successMessage),o.forEach(i),this.h()},h(){d(t,"class","success svelte-j5ga93")},m(e,s){c(e,t,s),u(t,a)},p(e,t){e.successMessage&&f(a,t.successMessage)},d(e){e&&i(t)}}}function B(e){let t,a;return{c(){t=s("p"),a=o(e.errorMessage),this.h()},l(s){t=n(s,"P",{class:!0});var o=r(t);a=l(o,e.errorMessage),o.forEach(i),this.h()},h(){d(t,"class","error svelte-j5ga93")},m(e,s){c(e,t,s),u(t,a)},p(e,t){e.errorMessage&&f(a,t.errorMessage)},d(e){e&&i(t)}}}function R(e){let t,a,s,o=e.showUpdateForm&&J(e),n=!e.showUpdateForm&&L(e);return{c(){o&&o.c(),t=h(),n&&n.c(),a=p()},l(e){o&&o.l(e),t=m(e),n&&n.l(e),a=p()},m(e,r){o&&o.m(e,r),c(e,t,r),n&&n.m(e,r),c(e,a,r),s=!0},p(e,s){s.showUpdateForm?o?o.p(e,s):((o=J(s)).c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),s.showUpdateForm?n&&(M(),g(n,1,1,()=>{n=null}),v()):n?(n.p(e,s),F(n,1)):((n=L(s)).c(),F(n,1),n.m(a.parentNode,a))},i(e){s||(F(n),s=!0)},o(e){g(n),s=!1},d(e){o&&o.d(e),e&&i(t),n&&n.d(e),e&&i(a)}}}function D(e){let t,a,f,h,p,m,g;return{c(){t=s("p"),a=o("You have no food."),f=s("p"),h=s("p"),p=s("a"),m=o("Add some food first"),g=o("."),this.h()},l(e){t=n(e,"P",{});var s=r(t);a=l(s,"You have no food."),s.forEach(i),f=n(e,"P",{}),r(f).forEach(i),h=n(e,"P",{});var o=r(h);p=n(o,"A",{href:!0});var d=r(p);m=l(d,"Add some food first"),d.forEach(i),g=l(o,"."),o.forEach(i),this.h()},h(){d(p,"href","/food/manage-food/add-food")},m(e,s){c(e,t,s),u(t,a),c(e,f,s),c(e,h,s),u(h,p),u(p,m),u(h,g)},p:U,i:U,o:U,d(e){e&&i(t),e&&i(f),e&&i(h)}}}function J(e){let t,a,o,l,f,p,g,v,F,b,M,_,U,w,P,j,k,I,S=!1,E=!1,T=!1;function O(){S=!0,e.input1_input_handler.call(p)}function $(){E=!0,e.input2_input_handler.call(b)}function z(){T=!0,e.input3_input_handler.call(w)}let C="update"===e.mode&&A(e);return{c(){t=s("form"),a=s("input"),o=h(),l=s("br"),f=h(),p=s("input"),g=h(),v=s("br"),F=h(),b=s("input"),M=h(),_=s("br"),U=h(),w=s("input"),P=h(),j=s("br"),k=h(),C&&C.c(),this.h()},l(e){t=n(e,"FORM",{class:!0});var s=r(t);a=n(s,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),o=m(s),l=n(s,"BR",{}),f=m(s),p=n(s,"INPUT",{type:!0,placeholder:!0,min:!0,max:!0,class:!0}),g=m(s),v=n(s,"BR",{}),F=m(s),b=n(s,"INPUT",{type:!0,placeholder:!0,min:!0,max:!0,class:!0}),M=m(s),_=n(s,"BR",{}),U=m(s),w=n(s,"INPUT",{type:!0,placeholder:!0,min:!0,max:!0,class:!0}),P=m(s),j=n(s,"BR",{}),k=m(s),C&&C.l(s),s.forEach(i),this.h()},h(){d(a,"class"," svelte-j5ga93"),d(a,"type","text"),d(a,"placeholder","Name"),d(a,"maxlength","20"),d(a,"size","20"),d(p,"type","number"),d(p,"placeholder","Protein"),d(p,"min","0"),d(p,"max","999"),d(p,"class","svelte-j5ga93"),d(b,"type","number"),d(b,"placeholder","Carbs"),d(b,"min","0"),d(b,"max","999"),d(b,"class","svelte-j5ga93"),d(w,"type","number"),d(w,"placeholder","Fat"),d(w,"min","0"),d(w,"max","999"),d(w,"class","svelte-j5ga93"),d(t,"class","svelte-j5ga93"),I=[x(a,"input",e.input0_input_handler),x(p,"input",O),x(p,"keyup",e.validateProtein),x(b,"input",$),x(b,"keyup",e.validateCarbs),x(w,"input",z),x(w,"keyup",e.validateFat)]},m(s,n){c(s,t,n),u(t,a),y(a,e.name),u(t,o),u(t,l),u(t,f),u(t,p),y(p,e.protein),u(t,g),u(t,v),u(t,F),u(t,b),y(b,e.carbs),u(t,M),u(t,_),u(t,U),u(t,w),y(w,e.fat),u(t,P),u(t,j),u(t,k),C&&C.m(t,null)},p(e,s){e.name&&a.value!==s.name&&y(a,s.name),!S&&e.protein&&y(p,s.protein),S=!1,!E&&e.carbs&&y(b,s.carbs),E=!1,!T&&e.fat&&y(w,s.fat),T=!1,"update"===s.mode?C?C.p(e,s):((C=A(s)).c(),C.m(t,null)):C&&(C.d(1),C=null)},d(e){e&&i(t),C&&C.d(),N(I)}}}function A(e){let t,a,o,r;return{c(){t=s("input"),a=h(),o=s("input"),this.h()},l(e){t=n(e,"INPUT",{class:!0,type:!0,value:!0,maxlength:!0,size:!0}),a=m(e),o=n(e,"INPUT",{type:!0,value:!0}),this.h()},h(){d(t,"class","update svelte-j5ga93"),d(t,"type","button"),t.value="Update",d(t,"maxlength","2"),d(t,"size","2"),d(o,"type","button"),o.value="delete",r=[x(t,"click",e.handleUpdate),x(o,"click",e.handleDelete)]},m(e,s){c(e,t,s),c(e,a,s),c(e,o,s)},p:U,d(e){e&&i(t),e&&i(a),e&&i(o),N(r)}}}function L(e){let t,a,o,l=e.food.length>=10&&V(e),u=e.filteredFood,f=[];for(let t=0;t<u.length;t+=1)f[t]=Y(z(e,u,t));const p=e=>g(f[e],1,1,()=>{f[e]=null});return{c(){l&&l.c(),t=h(),a=s("div");for(let e=0;e<f.length;e+=1)f[e].c();this.h()},l(e){l&&l.l(e),t=m(e),a=n(e,"DIV",{class:!0,style:!0});var s=r(a);for(let e=0;e<f.length;e+=1)f[e].l(s);s.forEach(i),this.h()},h(){d(a,"class","wrapper svelte-j5ga93"),w(a,"margin-top",(e.food.length>=10?0:20)+"px")},m(e,s){l&&l.m(e,s),c(e,t,s),c(e,a,s);for(let e=0;e<f.length;e+=1)f[e].m(a,null);o=!0},p(e,s){if(s.food.length>=10?l?l.p(e,s):((l=V(s)).c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null),e.handleFoodDelete||e.food||e.trash||e.handleFoodClick||e.filteredFood){let t;for(u=s.filteredFood,t=0;t<u.length;t+=1){const o=z(s,u,t);f[t]?(f[t].p(e,o),F(f[t],1)):(f[t]=Y(o),f[t].c(),F(f[t],1),f[t].m(a,null))}for(M(),t=u.length;t<f.length;t+=1)p(t);v()}o&&!e.food||w(a,"margin-top",(s.food.length>=10?0:20)+"px")},i(e){if(!o){for(let e=0;e<u.length;e+=1)F(f[e]);o=!0}},o(e){f=f.filter(Boolean);for(let e=0;e<f.length;e+=1)g(f[e]);o=!1},d(e){l&&l.d(e),e&&i(t),e&&i(a),E(f,e)}}}function V(e){let t,a;return{c(){t=s("input"),this.h()},l(e){t=n(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),this.h()},h(){d(t,"class","filter svelte-j5ga93"),d(t,"type","text"),d(t,"placeholder","Search"),d(t,"maxlength","5"),d(t,"size","3"),a=[x(t,"input",e.input_input_handler),x(t,"input",e.handleFilter)]},m(a,s){c(a,t,s),y(t,e.filter)},p(e,a){e.filter&&t.value!==a.filter&&y(t,a.filter)},d(e){e&&i(t),N(a)}}}function Y(e){let t,a,h,p,m,v=e.name+"";function b(...t){return e.click_handler(e,...t)}const M=new T({props:{data:O}});function _(...t){return e.click_handler_1(e,...t)}return{c(){t=s("button"),a=o(v),h=s("a"),P(M.$$.fragment),this.h()},l(e){t=n(e,"BUTTON",{class:!0});var s=r(t);a=l(s,v),s.forEach(i),h=n(e,"A",{href:!0});var o=r(h);j(M.$$.fragment,o),o.forEach(i),this.h()},h(){d(t,"class","box svelte-j5ga93"),d(h,"href","#"),m=[x(t,"click",b),x(h,"click",k(_))]},m(e,s){c(e,t,s),u(t,a),c(e,h,s),I(M,h,null),p=!0},p(t,s){e=s,p&&!t.filteredFood||v===(v=e.name+"")||f(a,v)},i(e){p||(F(M.$$.fragment,e),p=!0)},o(e){g(M.$$.fragment,e),p=!1},d(e){e&&i(t),e&&i(h),S(M),N(m)}}}function q(e){let t,a,d,f,b,_,x,y,U,N,w=""!==e.successMessage&&C(e),P=""!==e.errorMessage&&B(e);const j=[D,R],k=[];function I(e,t){return 0===t.food.length?0:1}return x=I(0,e),y=k[x]=j[x](e),{c(){t=h(),a=s("h2"),d=o("Update Food"),f=h(),w&&w.c(),b=h(),P&&P.c(),_=h(),y.c(),U=p(),this.h()},l(e){t=m(e),a=n(e,"H2",{});var s=r(a);d=l(s,"Update Food"),s.forEach(i),f=m(e),w&&w.l(e),b=m(e),P&&P.l(e),_=m(e),y.l(e),U=p(),this.h()},h(){document.title="Food"},m(e,s){c(e,t,s),c(e,a,s),u(a,d),c(e,f,s),w&&w.m(e,s),c(e,b,s),P&&P.m(e,s),c(e,_,s),k[x].m(e,s),c(e,U,s),N=!0},p(e,t){""!==t.successMessage?w?w.p(e,t):((w=C(t)).c(),w.m(b.parentNode,b)):w&&(w.d(1),w=null),""!==t.errorMessage?P?P.p(e,t):((P=B(t)).c(),P.m(_.parentNode,_)):P&&(P.d(1),P=null);let a=x;(x=I(0,t))===a?k[x].p(e,t):(M(),g(k[a],1,1,()=>{k[a]=null}),v(),(y=k[x])||(y=k[x]=j[x](t)).c(),F(y,1),y.m(U.parentNode,U))},i(e){N||(F(y),N=!0)},o(e){g(y),N=!1},d(e){e&&i(t),e&&i(a),e&&i(f),w&&w.d(e),e&&i(b),P&&P.d(e),e&&i(_),k[x].d(e),e&&i(U)}}}function H(e,t,a){let s="",o="",n="",r="",l=[],i="view",d="",c="",u="",f=!1,h="",p=[];function m(e){a("filteredFood",p=e),a("filter",h=""),a("showUpdateForm",f=!0),a("successMessage",u=""),a("errorMessage",c=""),d=e.name,a("name",s=e.name),a("protein",o=e.protein),a("carbs",n=e.carbs),a("fat",r=e.fat),a("mode",i="update")}function g(e){a("filteredFood",p=l),a("filter",h=""),a("successMessage",u=""),a("errorMessage",c="");let t=l.filter(function(t,a,s){return t.name!==e.name});localStorage.setItem("food",JSON.stringify(t)),a("food",l=t),a("filteredFood",p=t),a("mode",i="view"),a("name",s=""),a("protein",o=""),a("carbs",n=""),a("fat",r=""),a("successMessage",u="Food was deleted"),a("showUpdateForm",f=!1)}b(async()=>{a("food",l=JSON.parse(localStorage.getItem("food"))||[]),a("filteredFood",p=l)});return{name:s,protein:o,carbs:n,fat:r,food:l,mode:i,errorMessage:c,successMessage:u,showUpdateForm:f,filter:h,filteredFood:p,handleUpdate:function(){a("filteredFood",p=l),a("filter",h="");let e={};if(a("successMessage",u=""),a("errorMessage",c=""),!(e=$({name:s,protein:o,carbs:n,fat:r})).valid)return void a("errorMessage",c=e.message);let t=l.findIndex(e=>e.name===d);a("food",l[t].name=s,l),a("food",l[t].protein=o,l),a("food",l[t].carbs=n,l),a("food",l[t].fat=r,l),localStorage.setItem("food",JSON.stringify(l)),a("successMessage",u="Food was updated"),a("showUpdateForm",f=!1)},handleFoodClick:m,handleDelete:function(){a("filteredFood",p=l),a("filter",h=""),a("successMessage",u=""),a("errorMessage",c="");let e=l.filter(function(e,t,a){return e.name!==s});localStorage.setItem("food",JSON.stringify(e)),a("food",l=e),a("mode",i="view"),a("name",s=""),a("protein",o=""),a("carbs",n=""),a("fat",r=""),a("successMessage",u="Food was deleted"),a("showUpdateForm",f=!1)},handleFoodDelete:g,handleFilter:function(){""===h&&a("filteredFood",p=l),a("filteredFood",p=l.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())))},validateProtein:function(){let e=String(o);a("protein",o=Number(e.substring(0,5)))},validateCarbs:function(){let e=String(n);a("carbs",n=Number(e.substring(0,5)))},validateFat:function(){let e=String(r);a("fat",r=Number(e.substring(0,5)))},input0_input_handler:function(){s=this.value,a("name",s)},input1_input_handler:function(){o=_(this.value),a("protein",o)},input2_input_handler:function(){n=_(this.value),a("carbs",n)},input3_input_handler:function(){r=_(this.value),a("fat",r)},input_input_handler:function(){h=this.value,a("filter",h)},click_handler:({i:e})=>m(l[e]),click_handler_1:({i:e})=>g(l[e])}}export default class extends e{constructor(e){super(),t(this,e,H,q,a,{})}}
