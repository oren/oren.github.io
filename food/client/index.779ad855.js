import{S as e,i as t,s as a,a as o,z as l,g as r,k as n,n as s,f as c,G as i,e as f,t as d,c as h,b as u,d as m,h as p,j as g,l as b,y as v,H as I,I as S,J as A,K as x,L as E}from"./index.bdc8af7b.js";function z(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.i=a,o}function F(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.count=t[a].count,o.i=a,o}function N(e){let t,a,l,s,i,g,S,A,N,C,w,G,O,T,j,D,V,_,J,L,U,B,Y,$,H,K,q,Q,R,W=Math.round(e.calories)+"",X=Math.round(e.protein)+"",Z=Math.round(e.carbs)+"",ee=Math.round(e.fat)+"",te=e.isGoal&&P(e),ae=e.foodIAte,oe=[];for(let t=0;t<ae.length;t+=1)oe[t]=y(F(e,ae,t));let le=e.food.length>=10&&k(e),re=e.filteredFood,ne=[];for(let t=0;t<re.length;t+=1)ne[t]=M(z(e,re,t));return{c(){t=f("button"),a=d("Clear"),l=o(),s=f("a"),i=d("Update"),g=o(),te&&te.c(),S=o(),A=f("div"),N=f("span"),C=d("Cal: "),w=d(W),G=o(),O=f("span"),T=d("Pro:"),j=d(X),D=o(),V=f("span"),_=d("Car:"),J=d(Z),L=o(),U=f("span"),B=d("Fat:"),Y=d(ee),$=o(),H=f("div");for(let e=0;e<oe.length;e+=1)oe[e].c();K=o(),le&&le.c(),q=o(),Q=f("div");for(let e=0;e<ne.length;e+=1)ne[e].c();this.h()},l(e){t=h(e,"BUTTON",{class:!0});var o=u(t);a=m(o,"Clear"),o.forEach(c),l=r(e),s=h(e,"A",{class:!0,style:!0,href:!0});var n=u(s);i=m(n,"Update"),n.forEach(c),g=r(e),te&&te.l(e),S=r(e),A=h(e,"DIV",{class:!0});var f=u(A);N=h(f,"SPAN",{class:!0});var d=u(N);C=m(d,"Cal: "),w=m(d,W),d.forEach(c),G=r(f),O=h(f,"SPAN",{class:!0});var p=u(O);T=m(p,"Pro:"),j=m(p,X),p.forEach(c),D=r(f),V=h(f,"SPAN",{class:!0});var b=u(V);_=m(b,"Car:"),J=m(b,Z),b.forEach(c),L=r(f),U=h(f,"SPAN",{class:!0});var v=u(U);B=m(v,"Fat:"),Y=m(v,ee),v.forEach(c),f.forEach(c),$=r(e),H=h(e,"DIV",{class:!0});var I=u(H);for(let e=0;e<oe.length;e+=1)oe[e].l(I);I.forEach(c),K=r(e),le&&le.l(e),q=r(e),Q=h(e,"DIV",{class:!0,style:!0});var x=u(Q);for(let e=0;e<ne.length;e+=1)ne[e].l(x);x.forEach(c),this.h()},h(){p(t,"class","float-right max-w-md bg-blue-500 text-white font-bold py-2 px-4"),p(s,"class","inline-block float-right max-w-md mt-1 px-2 py-2 bg-blue-500 font-bold text-white"),x(s,"clear","both"),p(s,"href","/food/update"),p(N,"class","svelte-4z2bt9"),p(O,"class","svelte-4z2bt9"),p(V,"class","svelte-4z2bt9"),p(U,"class","svelte-4z2bt9"),p(A,"class","total svelte-4z2bt9"),p(H,"class","ate-wrapper svelte-4z2bt9"),p(Q,"class","wrapper svelte-4z2bt9"),x(Q,"grid-template-columns",e.columns),x(Q,"margin-top",(e.food.length>=10?0:20)+"px"),R=I(t,"click",e.handleClear)},m(e,o){n(e,t,o),b(t,a),n(e,l,o),n(e,s,o),b(s,i),n(e,g,o),te&&te.m(e,o),n(e,S,o),n(e,A,o),b(A,N),b(N,C),b(N,w),b(A,G),b(A,O),b(O,T),b(O,j),b(A,D),b(A,V),b(V,_),b(V,J),b(A,L),b(A,U),b(U,B),b(U,Y),n(e,$,o),n(e,H,o);for(let e=0;e<oe.length;e+=1)oe[e].m(H,null);n(e,K,o),le&&le.m(e,o),n(e,q,o),n(e,Q,o);for(let e=0;e<ne.length;e+=1)ne[e].m(Q,null)},p(e,t){if(t.isGoal?te?te.p(e,t):((te=P(t)).c(),te.m(S.parentNode,S)):te&&(te.d(1),te=null),e.calories&&W!==(W=Math.round(t.calories)+"")&&v(w,W),e.protein&&X!==(X=Math.round(t.protein)+"")&&v(j,X),e.carbs&&Z!==(Z=Math.round(t.carbs)+"")&&v(J,Z),e.fat&&ee!==(ee=Math.round(t.fat)+"")&&v(Y,ee),e.foodIAte){let a;for(ae=t.foodIAte,a=0;a<ae.length;a+=1){const o=F(t,ae,a);oe[a]?oe[a].p(e,o):(oe[a]=y(o),oe[a].c(),oe[a].m(H,null))}for(;a<oe.length;a+=1)oe[a].d(1);oe.length=ae.length}if(t.food.length>=10?le?le.p(e,t):((le=k(t)).c(),le.m(q.parentNode,q)):le&&(le.d(1),le=null),e.handleFoodClick||e.food||e.filteredFood){let a;for(re=t.filteredFood,a=0;a<re.length;a+=1){const o=z(t,re,a);ne[a]?ne[a].p(e,o):(ne[a]=M(o),ne[a].c(),ne[a].m(Q,null))}for(;a<ne.length;a+=1)ne[a].d(1);ne.length=re.length}e.columns&&x(Q,"grid-template-columns",t.columns),e.food&&x(Q,"margin-top",(t.food.length>=10?0:20)+"px")},d(e){e&&c(t),e&&c(l),e&&c(s),e&&c(g),te&&te.d(e),e&&c(S),e&&c(A),e&&c($),e&&c(H),E(oe,e),e&&c(K),le&&le.d(e),e&&c(q),e&&c(Q),E(ne,e),R()}}}function C(e){let t,a,l,i,g,v,I;return{c(){t=f("p"),a=d("You have no food."),l=o(),i=f("p"),g=f("a"),v=d("Add some food first"),I=d("."),this.h()},l(e){t=h(e,"P",{});var o=u(t);a=m(o,"You have no food."),o.forEach(c),l=r(e),i=h(e,"P",{});var n=u(i);g=h(n,"A",{href:!0});var s=u(g);v=m(s,"Add some food first"),s.forEach(c),I=m(n,"."),n.forEach(c),this.h()},h(){p(g,"href","/food/manage-food/add-food")},m(e,o){n(e,t,o),b(t,a),n(e,l,o),n(e,i,o),b(i,g),b(g,v),b(i,I)},p:s,d(e){e&&c(t),e&&c(l),e&&c(i)}}}function P(e){let t,a,l,s,i,I,S,A,x,E,z=Math.round(e.goal-e.calories)+"";return{c(){t=f("div"),a=f("span"),l=d("Goal: "),s=d(e.goal),i=o(),I=f("span"),S=d("Left:"),A=f("span"),x=d(z),this.h()},l(o){t=h(o,"DIV",{class:!0});var n=u(t);a=h(n,"SPAN",{class:!0});var f=u(a);l=m(f,"Goal: "),s=m(f,e.goal),f.forEach(c),i=r(n),I=h(n,"SPAN",{class:!0});var d=u(I);S=m(d,"Left:"),d.forEach(c),A=h(n,"SPAN",{class:!0});var p=u(A);x=m(p,z),p.forEach(c),n.forEach(c),this.h()},h(){p(a,"class","svelte-4z2bt9"),p(I,"class","svelte-4z2bt9"),p(A,"class",E=g(e.remaining)+" svelte-4z2bt9"),p(t,"class","goal")},m(e,o){n(e,t,o),b(t,a),b(a,l),b(a,s),b(t,i),b(t,I),b(I,S),b(t,A),b(A,x)},p(e,t){e.goal&&v(s,t.goal),(e.goal||e.calories)&&z!==(z=Math.round(t.goal-t.calories)+"")&&v(x,z),e.remaining&&E!==(E=g(t.remaining)+" svelte-4z2bt9")&&p(A,"class",E)},d(e){e&&c(t)}}}function y(e){let t,a,o,l,r=e.name+"",s=e.count+"";return{c(){t=f("div"),a=d(r),o=f("div"),l=d(s),this.h()},l(e){t=h(e,"DIV",{class:!0});var n=u(t);a=m(n,r),n.forEach(c),o=h(e,"DIV",{class:!0});var i=u(o);l=m(i,s),i.forEach(c),this.h()},h(){p(t,"class","ate-box svelte-4z2bt9"),p(o,"class","ate-box svelte-4z2bt9")},m(e,r){n(e,t,r),b(t,a),n(e,o,r),b(o,l)},p(e,t){e.foodIAte&&r!==(r=t.name+"")&&v(a,r),e.foodIAte&&s!==(s=t.count+"")&&v(l,s)},d(e){e&&c(t),e&&c(o)}}}function k(e){let t,a;return{c(){t=f("input"),this.h()},l(e){t=h(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),this.h()},h(){p(t,"class","filter svelte-4z2bt9"),p(t,"type","text"),p(t,"placeholder","Search"),p(t,"maxlength","5"),p(t,"size","3"),a=[I(t,"input",e.input_input_handler),I(t,"input",e.handleFilter)]},m(a,o){n(a,t,o),S(t,e.filter)},p(e,a){e.filter&&t.value!==a.filter&&S(t,a.filter)},d(e){e&&c(t),A(a)}}}function M(e){let t,a,o,l=e.name+"";function r(...t){return e.click_handler(e,...t)}return{c(){t=f("button"),a=d(l),this.h()},l(e){t=h(e,"BUTTON",{class:!0});var o=u(t);a=m(o,l),o.forEach(c),this.h()},h(){p(t,"class","box svelte-4z2bt9"),o=I(t,"click",r)},m(e,o){n(e,t,o),b(t,a)},p(t,o){e=o,t.filteredFood&&l!==(l=e.name+"")&&v(a,l)},d(e){e&&c(t),o()}}}function w(e){let t,a;function i(e,t){return 0===t.food.length?C:N}let f=i(0,e),d=f(e);return{c(){t=o(),d.c(),a=l(),this.h()},l(e){t=r(e),d.l(e),a=l(),this.h()},h(){document.title="Sapper project template"},m(e,o){n(e,t,o),d.m(e,o),n(e,a,o)},p(e,t){f===(f=i(0,t))&&d?d.p(e,t):(d.d(1),(d=f(t))&&(d.c(),d.m(a.parentNode,a)))},i:s,o:s,d(e){e&&c(t),d.d(e),e&&c(a)}}}function G(e,t,a){let o=!1,l="50% 50%",r=!1,n=2e3,s=[],c=[],f=0,d=0,h=0,u="",m=[];function p(e){a("filteredFood",m=c),a("filter",u="");let t=s.findIndex(t=>t.name===e.name);-1===t?(e.count=1,a("foodIAte",s=[...s,e])):a("foodIAte",s[t].count=s[t].count+1,s),localStorage.setItem("ate",JSON.stringify(s)),g()}i(async()=>{o="true"===(o=localStorage.getItem("firstTime")||"true"),a("isGoal",r=localStorage.getItem("isGoal")||!1),a("goal",n=localStorage.getItem("goal")||2e3),a("columns",l=localStorage.getItem("columns")||"50% 50%"),a("food",c=JSON.parse(localStorage.getItem("food"))||[]),a("filteredFood",m=c),a("foodIAte",s=JSON.parse(localStorage.getItem("ate"))||[]),o&&0===c.length?(console.log("first time and no food"),a("food",c=[{name:"cup milk 2%",protein:5,carbs:6,fat:7},{name:"cup oatmeal",protein:6,carbs:7.3,fat:7.2},{name:"egg",protein:6,carbs:0,fat:7.2},{name:"100g chicken breast",protein:20,carbs:3.2,fat:5.1},{name:"100g brown rice",protein:4,carbs:6.8,fat:4.7},{name:"100g japanese yams",protein:4,carbs:6.8,fat:4.7},{name:"avocado",protein:4,carbs:6.8,fat:4.7},{name:"olive oil",protein:2,carbs:3.8,fat:8},{name:"apple",protein:1,carbs:5.8,fat:3},{name:"cottage cheese",protein:1,carbs:5.8,fat:3}]),localStorage.setItem("firstTime","false"),localStorage.setItem("food",JSON.stringify(c)),a("filteredFood",m=c)):console.log("not first time or food exist"),g()});const g=e=>{a("protein",f=s.reduce(function(e,t){return e+t.protein*t.count},0)),a("carbs",d=s.reduce(function(e,t){return e+t.carbs*t.count},0)),a("fat",h=s.reduce(function(e,t){return e+t.fat*t.count},0))};let b,v;return e.$$.update=((e={protein:1,carbs:1,fat:1,goal:1,calories:1})=>{(e.protein||e.carbs||e.fat)&&a("calories",v=parseFloat(Number(4*f+4*d+9*h).toFixed(1))),(e.goal||e.calories)&&a("remaining",b=n-v<=0?"remaining":"")}),{columns:l,isGoal:r,goal:n,foodIAte:s,food:c,protein:f,carbs:d,fat:h,filter:u,filteredFood:m,handleFoodClick:p,handleClear:function(){localStorage.removeItem("ate"),a("protein",f=0),a("carbs",d=0),a("fat",h=0),a("foodIAte",s=[])},handleFilter:function(){""===u&&a("filteredFood",m=c),a("filteredFood",m=c.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())))},remaining:b,calories:v,input_input_handler:function(){u=this.value,a("filter",u)},click_handler:({i:e})=>p(c[e])}}export default class extends e{constructor(e){super(),t(this,e,G,w,a,{})}}
