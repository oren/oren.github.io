import{S as e,i as t,s as a,a as o,y as l,j as r,l as n,q as s,E as c,p as i,h as f,N as d,D as h,e as m,t as u,b as g,d as p,f as v,k as b,O as I,m as S,n as A,P as E,x as N,c as x,g as F,Q as k,o as P,r as y,R as C,T as O,U as D,I as M}from"./index.6819b81d.js";import{I as T,t as $}from"./index.7bea4801.js";function _(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.i=a,o}function w(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.count=t[a].count,o.i=a,o}function G(e){let t,a,l,d,I,A,E,x,F,k,P,y,C,O,T,$,G,V,z,Y,q,Q,R,H,K,W,X=Math.round(e.calories)+"",Z=Math.round(e.protein)+"",ee=Math.round(e.carbs)+"",te=Math.round(e.fat)+"",ae=e.foodIAte.length>0&&j(e),oe=e.isGoal&&J(e),le=e.foodIAte,re=[];for(let t=0;t<le.length;t+=1)re[t]=U(w(e,le,t));const ne=e=>s(re[e],1,1,()=>{re[e]=null});let se=e.food.length>=10&&B(e),ce=e.filteredFood,ie=[];for(let t=0;t<ce.length;t+=1)ie[t]=L(_(e,ce,t));return{c(){ae&&ae.c(),t=o(),oe&&oe.c(),a=o(),l=m("div"),d=m("span"),I=u("Cal: "),A=u(X),E=o(),x=m("span"),F=u("Pro:"),k=u(Z),P=o(),y=m("span"),C=u("Car:"),O=u(ee),T=o(),$=m("span"),G=u("Fat:"),V=u(te),z=o(),Y=m("div"),q=o(),Q=m("div");for(let e=0;e<re.length;e+=1)re[e].c();R=o(),se&&se.c(),H=o(),K=m("div");for(let e=0;e<ie.length;e+=1)ie[e].c();this.h()},l(e){ae&&ae.l(e),t=r(e),oe&&oe.l(e),a=r(e),l=g(e,"DIV",{class:!0});var o=p(l);d=g(o,"SPAN",{class:!0});var n=p(d);I=v(n,"Cal: "),A=v(n,X),n.forEach(f),E=r(o),x=g(o,"SPAN",{class:!0});var s=p(x);F=v(s,"Pro:"),k=v(s,Z),s.forEach(f),P=r(o),y=g(o,"SPAN",{class:!0});var c=p(y);C=v(c,"Car:"),O=v(c,ee),c.forEach(f),T=r(o),$=g(o,"SPAN",{class:!0});var i=p($);G=v(i,"Fat:"),V=v(i,te),i.forEach(f),o.forEach(f),z=r(e),Y=g(e,"DIV",{style:!0}),p(Y).forEach(f),q=r(e),Q=g(e,"DIV",{class:!0});var h=p(Q);for(let e=0;e<re.length;e+=1)re[e].l(h);h.forEach(f),R=r(e),se&&se.l(e),H=r(e),K=g(e,"DIV",{class:!0,style:!0});var m=p(K);for(let e=0;e<ie.length;e+=1)ie[e].l(m);m.forEach(f),this.h()},h(){b(d,"class","svelte-smtv06"),b(x,"class","svelte-smtv06"),b(y,"class","svelte-smtv06"),b($,"class","svelte-smtv06"),b(l,"class","total svelte-smtv06"),D(Y,"clear","both"),b(Q,"class","ate-wrapper mt-1 svelte-smtv06"),b(K,"class","wrapper svelte-smtv06"),D(K,"grid-template-columns",e.columns),D(K,"margin-top",(e.food.length>=10?0:20)+"px")},m(e,o){ae&&ae.m(e,o),n(e,t,o),oe&&oe.m(e,o),n(e,a,o),n(e,l,o),S(l,d),S(d,I),S(d,A),S(l,E),S(l,x),S(x,F),S(x,k),S(l,P),S(l,y),S(y,C),S(y,O),S(l,T),S(l,$),S($,G),S($,V),n(e,z,o),n(e,Y,o),n(e,q,o),n(e,Q,o);for(let e=0;e<re.length;e+=1)re[e].m(Q,null);n(e,R,o),se&&se.m(e,o),n(e,H,o),n(e,K,o);for(let e=0;e<ie.length;e+=1)ie[e].m(K,null);W=!0},p(e,o){if(o.foodIAte.length>0?ae?ae.p(e,o):((ae=j(o)).c(),ae.m(t.parentNode,t)):ae&&(ae.d(1),ae=null),o.isGoal?oe?oe.p(e,o):((oe=J(o)).c(),oe.m(a.parentNode,a)):oe&&(oe.d(1),oe=null),W&&!e.calories||X===(X=Math.round(o.calories)+"")||N(A,X),W&&!e.protein||Z===(Z=Math.round(o.protein)+"")||N(k,Z),W&&!e.carbs||ee===(ee=Math.round(o.carbs)+"")||N(O,ee),W&&!e.fat||te===(te=Math.round(o.fat)+"")||N(V,te),e.foodIAte||e.handleDelete||e.trash){let t;for(le=o.foodIAte,t=0;t<le.length;t+=1){const a=w(o,le,t);re[t]?(re[t].p(e,a),i(re[t],1)):(re[t]=U(a),re[t].c(),i(re[t],1),re[t].m(Q,null))}for(h(),t=le.length;t<re.length;t+=1)ne(t);c()}if(o.food.length>=10?se?se.p(e,o):((se=B(o)).c(),se.m(H.parentNode,H)):se&&(se.d(1),se=null),e.handleFoodClick||e.filteredFood){let t;for(ce=o.filteredFood,t=0;t<ce.length;t+=1){const a=_(o,ce,t);ie[t]?ie[t].p(e,a):(ie[t]=L(a),ie[t].c(),ie[t].m(K,null))}for(;t<ie.length;t+=1)ie[t].d(1);ie.length=ce.length}W&&!e.columns||D(K,"grid-template-columns",o.columns),W&&!e.food||D(K,"margin-top",(o.food.length>=10?0:20)+"px")},i(e){if(!W){for(let e=0;e<le.length;e+=1)i(re[e]);W=!0}},o(e){re=re.filter(Boolean);for(let e=0;e<re.length;e+=1)s(re[e]);W=!1},d(e){ae&&ae.d(e),e&&f(t),oe&&oe.d(e),e&&f(a),e&&f(l),e&&f(z),e&&f(Y),e&&f(q),e&&f(Q),M(re,e),e&&f(R),se&&se.d(e),e&&f(H),e&&f(K),M(ie,e)}}}function V(e){let t,a,l,s,c,i,d;return{c(){t=m("p"),a=u("You have no food."),l=o(),s=m("p"),c=m("a"),i=u("Add some food first"),d=u("."),this.h()},l(e){t=g(e,"P",{});var o=p(t);a=v(o,"You have no food."),o.forEach(f),l=r(e),s=g(e,"P",{});var n=p(s);c=g(n,"A",{href:!0});var h=p(c);i=v(h,"Add some food first"),h.forEach(f),d=v(n,"."),n.forEach(f),this.h()},h(){b(c,"href","/food/manage-food/add-food")},m(e,o){n(e,t,o),S(t,a),n(e,l,o),n(e,s,o),S(s,c),S(c,i),S(s,d)},p:A,i:A,o:A,d(e){e&&f(t),e&&f(l),e&&f(s)}}}function j(e){let t,a,o;return{c(){t=m("button"),a=u("Clear"),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var o=p(t);a=v(o,"Clear"),o.forEach(f),this.h()},h(){b(t,"class","float-right w-20 bg-red-400 py-1 px-4"),o=I(t,"click",e.handleClear)},m(e,o){n(e,t,o),S(t,a)},p:A,d(e){e&&f(t),o()}}}function J(e){let t,a,l,s,c,i,d,h,I,A,x=Math.round(e.goal-e.calories)+"";return{c(){t=m("div"),a=m("span"),l=u("Goal: "),s=u(e.goal),c=o(),i=m("span"),d=u("Left:"),h=m("span"),I=u(x),this.h()},l(o){t=g(o,"DIV",{class:!0});var n=p(t);a=g(n,"SPAN",{class:!0});var m=p(a);l=v(m,"Goal: "),s=v(m,e.goal),m.forEach(f),c=r(n),i=g(n,"SPAN",{class:!0});var u=p(i);d=v(u,"Left:"),u.forEach(f),h=g(n,"SPAN",{class:!0});var b=p(h);I=v(b,x),b.forEach(f),n.forEach(f),this.h()},h(){b(a,"class","svelte-smtv06"),b(i,"class","svelte-smtv06"),b(h,"class",A=E(e.remaining)+" svelte-smtv06"),b(t,"class","goal")},m(e,o){n(e,t,o),S(t,a),S(a,l),S(a,s),S(t,c),S(t,i),S(i,d),S(t,h),S(h,I)},p(e,t){e.goal&&N(s,t.goal),(e.goal||e.calories)&&x!==(x=Math.round(t.goal-t.calories)+"")&&N(I,x),e.remaining&&A!==(A=E(t.remaining)+" svelte-smtv06")&&b(h,"class",A)},d(e){e&&f(t)}}}function U(e){let t,a,o,l,r,c,d,h=e.name+"",A=e.count+"";const E=new T({props:{data:$}});function C(...t){return e.click_handler(e,...t)}return{c(){t=m("button"),x(E.$$.fragment),a=m("div"),o=u(h),l=m("div"),r=u(A),this.h()},l(e){t=g(e,"BUTTON",{class:!0,href:!0});var n=p(t);F(E.$$.fragment,n),n.forEach(f),a=g(e,"DIV",{class:!0});var s=p(a);o=v(s,h),s.forEach(f),l=g(e,"DIV",{class:!0});var c=p(l);r=v(c,A),c.forEach(f),this.h()},h(){b(t,"class","text-red-400"),b(t,"href","#"),b(a,"class","ate-box svelte-smtv06"),b(l,"class","ate-box svelte-smtv06"),d=I(t,"click",k(C))},m(e,s){n(e,t,s),P(E,t,null),n(e,a,s),S(a,o),n(e,l,s),S(l,r),c=!0},p(t,a){e=a,c&&!t.foodIAte||h===(h=e.name+"")||N(o,h),c&&!t.foodIAte||A===(A=e.count+"")||N(r,A)},i(e){c||(i(E.$$.fragment,e),c=!0)},o(e){s(E.$$.fragment,e),c=!1},d(e){e&&f(t),y(E),e&&f(a),e&&f(l),d()}}}function B(e){let t,a;return{c(){t=m("input"),this.h()},l(e){t=g(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),this.h()},h(){b(t,"class","filter svelte-smtv06"),b(t,"type","text"),b(t,"placeholder","Search"),b(t,"maxlength","5"),b(t,"size","3"),a=[I(t,"input",e.input_input_handler),I(t,"input",e.handleFilter)]},m(a,o){n(a,t,o),C(t,e.filter)},p(e,a){e.filter&&t.value!==a.filter&&C(t,a.filter)},d(e){e&&f(t),O(a)}}}function L(e){let t,a,o,l=e.name+"";function r(...t){return e.click_handler_1(e,...t)}return{c(){t=m("button"),a=u(l),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var o=p(t);a=v(o,l),o.forEach(f),this.h()},h(){b(t,"class","box svelte-smtv06"),o=I(t,"click",r)},m(e,o){n(e,t,o),S(t,a)},p(t,o){e=o,t.filteredFood&&l!==(l=e.name+"")&&N(a,l)},d(e){e&&f(t),o()}}}function z(e){let t,a,d,m,u;const g=[V,G],p=[];function v(e,t){return 0===t.food.length?0:1}return a=v(0,e),d=p[a]=g[a](e),{c(){t=o(),d.c(),m=l(),this.h()},l(e){t=r(e),d.l(e),m=l(),this.h()},h(){document.title="Eat"},m(e,o){n(e,t,o),p[a].m(e,o),n(e,m,o),u=!0},p(e,t){let o=a;(a=v(0,t))===o?p[a].p(e,t):(h(),s(p[o],1,1,()=>{p[o]=null}),c(),(d=p[a])||(d=p[a]=g[a](t)).c(),i(d,1),d.m(m.parentNode,m))},i(e){u||(i(d),u=!0)},o(e){s(d),u=!1},d(e){e&&f(t),p[a].d(e),e&&f(m)}}}function Y(e,t,a){let o=!1,l="50% 50%",r=!1,n=2e3,s=[],c=[],i=0,f=0,h=0,m="",u=[];function g(e){let t=s.findIndex(t=>t.name===e.name);-1===t?(e.count=1,a("foodIAte",s=[...s,e])):a("foodIAte",s[t].count=s[t].count+1,s),localStorage.setItem("ate",JSON.stringify(s)),v()}function p(e){console.log("delete",e);let t=s.filter(function(t,a,o){return t.name!==e.name});a("foodIAte",s=t),localStorage.setItem("ate",JSON.stringify(t)),v()}d(async()=>{o="true"===(o=localStorage.getItem("firstTime")||"true"),a("isGoal",r=localStorage.getItem("isGoal")||!1),a("goal",n=localStorage.getItem("goal")||2e3),a("columns",l=localStorage.getItem("columns")||"50% 50%"),a("food",c=JSON.parse(localStorage.getItem("food"))||[]),a("filteredFood",u=c),a("foodIAte",s=JSON.parse(localStorage.getItem("ate"))||[]),o&&0===c.length?(console.log("first time and no food"),a("food",c=[{name:"cup milk 2%",protein:5,carbs:6,fat:7},{name:"cup oatmeal",protein:6,carbs:7.3,fat:7.2},{name:"egg",protein:6,carbs:0,fat:7.2},{name:"100g chicken breast",protein:20,carbs:3.2,fat:5.1},{name:"100g brown rice",protein:4,carbs:6.8,fat:4.7},{name:"100g japanese yams",protein:4,carbs:6.8,fat:4.7},{name:"avocado",protein:4,carbs:6.8,fat:4.7},{name:"olive oil",protein:2,carbs:3.8,fat:8},{name:"apple",protein:1,carbs:5.8,fat:3},{name:"cottage cheese",protein:1,carbs:5.8,fat:3},{name:"100g greek yugurt",protein:1,carbs:5.8,fat:3},{name:"1 tbsp peanut butter",protein:1,carbs:5.8,fat:3},{name:"100g salmon",protein:1,carbs:5.8,fat:3},{name:"100g steak",protein:1,carbs:5.8,fat:3}]),localStorage.setItem("firstTime","false"),localStorage.setItem("food",JSON.stringify(c)),a("filteredFood",u=c)):console.log("not first time or food exist"),v()});const v=e=>{a("protein",i=s.reduce(function(e,t){return e+t.protein*t.count},0)),a("carbs",f=s.reduce(function(e,t){return e+t.carbs*t.count},0)),a("fat",h=s.reduce(function(e,t){return e+t.fat*t.count},0))};let b,I;return e.$$.update=((e={protein:1,carbs:1,fat:1,goal:1,calories:1})=>{(e.protein||e.carbs||e.fat)&&a("calories",I=parseFloat(Number(4*i+4*f+9*h).toFixed(1))),(e.goal||e.calories)&&a("remaining",b=n-I<=0?"remaining":"")}),{columns:l,isGoal:r,goal:n,foodIAte:s,food:c,protein:i,carbs:f,fat:h,filter:m,filteredFood:u,handleFoodClick:g,handleClear:function(){localStorage.removeItem("ate"),a("protein",i=0),a("carbs",f=0),a("fat",h=0),a("foodIAte",s=[])},handleDelete:p,handleFilter:function(){""===m&&a("filteredFood",u=c),a("filteredFood",u=c.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())))},remaining:b,calories:I,click_handler:({i:e})=>p(s[e]),input_input_handler:function(){m=this.value,a("filter",m)},click_handler_1:({i:e})=>g(u[e])}}export default class extends e{constructor(e){super(),t(this,e,Y,z,a,{})}}
