import{S as e,i as t,s as a,a as o,y as l,j as r,l as n,q as s,E as c,p as i,h as f,N as d,D as h,e as u,t as m,b as g,d as p,f as v,k as b,O as I,m as A,x as S,P as E,Q as N,R as F,n as w,c as x,g as k,T as y,o as D,r as P,U as O,I as C}from"./index.e6d51e6e.js";import{I as M,t as T}from"./index.aed47ae7.js";function $(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.count=t[a].count,o.i=a,o}function _(e,t,a){const o=Object.create(e);return o.id=t[a].id,o.name=t[a].name,o.i=a,o}function V(e){let t,a,l,d,I,E,N,F,w,x,k,y,D,P,M,T,V,G,z,Y,q,Q,R,H,K=Math.round(e.calories)+"",W=Math.round(e.protein)+"",X=Math.round(e.carbs)+"",Z=Math.round(e.fat)+"",ee=e.filteredFood,te=[];for(let t=0;t<ee.length;t+=1)te[t]=j(_(e,ee,t));let ae=e.food.length>=10&&J(e),oe=e.isGoal&&U(e),le=e.foodIAte.length>0&&B(e),re=e.foodIAte,ne=[];for(let t=0;t<re.length;t+=1)ne[t]=L($(e,re,t));const se=e=>s(ne[e],1,1,()=>{ne[e]=null});return{c(){t=u("div");for(let e=0;e<te.length;e+=1)te[e].c();a=o(),ae&&ae.c(),l=o(),oe&&oe.c(),d=o(),I=u("div"),E=u("span"),N=m("Cal:"),F=m(K),w=o(),x=u("span"),k=m("P:"),y=m(W),D=o(),P=u("span"),M=m("C:"),T=m(X),V=o(),G=u("span"),z=m("F:"),Y=m(Z),q=o(),le&&le.c(),Q=o(),R=u("div");for(let e=0;e<ne.length;e+=1)ne[e].c();this.h()},l(e){t=g(e,"DIV",{class:!0,style:!0});var o=p(t);for(let e=0;e<te.length;e+=1)te[e].l(o);a=r(o),ae&&ae.l(o),o.forEach(f),l=r(e),oe&&oe.l(e),d=r(e),I=g(e,"DIV",{});var n=p(I);E=g(n,"SPAN",{class:!0});var s=p(E);N=v(s,"Cal:"),F=v(s,K),s.forEach(f),w=r(n),x=g(n,"SPAN",{class:!0});var c=p(x);k=v(c,"P:"),y=v(c,W),c.forEach(f),D=r(n),P=g(n,"SPAN",{class:!0});var i=p(P);M=v(i,"C:"),T=v(i,X),i.forEach(f),V=r(n),G=g(n,"SPAN",{class:!0});var h=p(G);z=v(h,"F:"),Y=v(h,Z),h.forEach(f),n.forEach(f),q=r(e),le&&le.l(e),Q=r(e),R=g(e,"DIV",{class:!0});var u=p(R);for(let e=0;e<ne.length;e+=1)ne[e].l(u);u.forEach(f),this.h()},h(){b(t,"class","wrapper svelte-1e0fcvw"),O(t,"grid-template-columns",e.columns),O(t,"margin-top",(e.food.length>=10?0:20)+"px"),b(E,"class","svelte-1e0fcvw"),b(x,"class","svelte-1e0fcvw"),b(P,"class","svelte-1e0fcvw"),b(G,"class","svelte-1e0fcvw"),b(R,"class","ate-wrapper mt-1 svelte-1e0fcvw")},m(e,o){n(e,t,o);for(let e=0;e<te.length;e+=1)te[e].m(t,null);A(t,a),ae&&ae.m(t,null),n(e,l,o),oe&&oe.m(e,o),n(e,d,o),n(e,I,o),A(I,E),A(E,N),A(E,F),A(I,w),A(I,x),A(x,k),A(x,y),A(I,D),A(I,P),A(P,M),A(P,T),A(I,V),A(I,G),A(G,z),A(G,Y),n(e,q,o),le&&le.m(e,o),n(e,Q,o),n(e,R,o);for(let e=0;e<ne.length;e+=1)ne[e].m(R,null);H=!0},p(e,o){if(e.handleFoodClick||e.filteredFood){let l;for(ee=o.filteredFood,l=0;l<ee.length;l+=1){const r=_(o,ee,l);te[l]?te[l].p(e,r):(te[l]=j(r),te[l].c(),te[l].m(t,a))}for(;l<te.length;l+=1)te[l].d(1);te.length=ee.length}if(o.food.length>=10?ae?ae.p(e,o):((ae=J(o)).c(),ae.m(t,null)):ae&&(ae.d(1),ae=null),H&&!e.columns||O(t,"grid-template-columns",o.columns),H&&!e.food||O(t,"margin-top",(o.food.length>=10?0:20)+"px"),o.isGoal?oe?oe.p(e,o):((oe=U(o)).c(),oe.m(d.parentNode,d)):oe&&(oe.d(1),oe=null),H&&!e.calories||K===(K=Math.round(o.calories)+"")||S(F,K),H&&!e.protein||W===(W=Math.round(o.protein)+"")||S(y,W),H&&!e.carbs||X===(X=Math.round(o.carbs)+"")||S(T,X),H&&!e.fat||Z===(Z=Math.round(o.fat)+"")||S(Y,Z),o.foodIAte.length>0?le?le.p(e,o):((le=B(o)).c(),le.m(Q.parentNode,Q)):le&&(le.d(1),le=null),e.foodIAte||e.handleDelete||e.trash){let t;for(re=o.foodIAte,t=0;t<re.length;t+=1){const a=$(o,re,t);ne[t]?(ne[t].p(e,a),i(ne[t],1)):(ne[t]=L(a),ne[t].c(),i(ne[t],1),ne[t].m(R,null))}for(h(),t=re.length;t<ne.length;t+=1)se(t);c()}},i(e){if(!H){for(let e=0;e<re.length;e+=1)i(ne[e]);H=!0}},o(e){ne=ne.filter(Boolean);for(let e=0;e<ne.length;e+=1)s(ne[e]);H=!1},d(e){e&&f(t),C(te,e),ae&&ae.d(),e&&f(l),oe&&oe.d(e),e&&f(d),e&&f(I),e&&f(q),le&&le.d(e),e&&f(Q),e&&f(R),C(ne,e)}}}function G(e){let t,a,l,s,c,i,d;return{c(){t=u("p"),a=m("You have no food."),l=o(),s=u("p"),c=u("a"),i=m("Add some food first"),d=m("."),this.h()},l(e){t=g(e,"P",{});var o=p(t);a=v(o,"You have no food."),o.forEach(f),l=r(e),s=g(e,"P",{});var n=p(s);c=g(n,"A",{href:!0});var h=p(c);i=v(h,"Add some food first"),h.forEach(f),d=v(n,"."),n.forEach(f),this.h()},h(){b(c,"href","/food/manage-food/add-food")},m(e,o){n(e,t,o),A(t,a),n(e,l,o),n(e,s,o),A(s,c),A(c,i),A(s,d)},p:w,i:w,o:w,d(e){e&&f(t),e&&f(l),e&&f(s)}}}function j(e){let t,a,o,l=e.name+"";function r(...t){return e.click_handler(e,...t)}return{c(){t=u("button"),a=m(l),this.h()},l(e){t=g(e,"BUTTON",{class:!0});var o=p(t);a=v(o,l),o.forEach(f),this.h()},h(){b(t,"class","box svelte-1e0fcvw"),o=I(t,"click",r)},m(e,o){n(e,t,o),A(t,a)},p(t,o){e=o,t.filteredFood&&l!==(l=e.name+"")&&S(a,l)},d(e){e&&f(t),o()}}}function J(e){let t,a;return{c(){t=u("input"),this.h()},l(e){t=g(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),this.h()},h(){b(t,"class","bg-gray-200 px-2 py-2"),b(t,"type","text"),b(t,"placeholder","Search"),b(t,"maxlength","5"),b(t,"size","3"),a=[I(t,"input",e.input_input_handler),I(t,"input",e.handleFilter)]},m(a,o){n(a,t,o),E(t,e.filter)},p(e,a){e.filter&&t.value!==a.filter&&E(t,a.filter)},d(e){e&&f(t),N(a)}}}function U(e){let t,a,l,s,c,i,d,h,I,E,N=Math.round(e.goal-e.calories)+"";return{c(){t=u("div"),a=u("span"),l=m("Goal:"),s=m(e.goal),c=o(),i=u("span"),d=m("Left:"),h=u("span"),I=m(N),this.h()},l(o){t=g(o,"DIV",{});var n=p(t);a=g(n,"SPAN",{class:!0});var u=p(a);l=v(u,"Goal:"),s=v(u,e.goal),u.forEach(f),c=r(n),i=g(n,"SPAN",{class:!0});var m=p(i);d=v(m,"Left:"),m.forEach(f),h=g(n,"SPAN",{class:!0});var b=p(h);I=v(b,N),b.forEach(f),n.forEach(f),this.h()},h(){b(a,"class","svelte-1e0fcvw"),b(i,"class","svelte-1e0fcvw"),b(h,"class",E=F(e.remaining)+" svelte-1e0fcvw")},m(e,o){n(e,t,o),A(t,a),A(a,l),A(a,s),A(t,c),A(t,i),A(i,d),A(t,h),A(h,I)},p(e,t){e.goal&&S(s,t.goal),(e.goal||e.calories)&&N!==(N=Math.round(t.goal-t.calories)+"")&&S(I,N),e.remaining&&E!==(E=F(t.remaining)+" svelte-1e0fcvw")&&b(h,"class",E)},d(e){e&&f(t)}}}function B(e){let t,a,o,l,r;return{c(){t=u("button"),a=m("Delete All"),o=u("div"),l=u("div"),this.h()},l(e){t=g(e,"BUTTON",{class:!0,href:!0});var r=p(t);a=v(r,"Delete All"),r.forEach(f),o=g(e,"DIV",{}),p(o).forEach(f),l=g(e,"DIV",{}),p(l).forEach(f),this.h()},h(){b(t,"class","bg-red-400 py-1 px-4"),b(t,"href","#"),r=I(t,"click",e.handleClear)},m(e,r){n(e,t,r),A(t,a),n(e,o,r),n(e,l,r)},p:w,d(e){e&&f(t),e&&f(o),e&&f(l),r()}}}function L(e){let t,a,o,l,r,c,d,h=e.name+"",E=e.count+"";const N=new M({props:{data:T}});function F(...t){return e.click_handler_1(e,...t)}return{c(){t=u("button"),x(N.$$.fragment),a=u("div"),o=m(h),l=u("div"),r=m(E),this.h()},l(e){t=g(e,"BUTTON",{class:!0,href:!0});var n=p(t);k(N.$$.fragment,n),n.forEach(f),a=g(e,"DIV",{});var s=p(a);o=v(s,h),s.forEach(f),l=g(e,"DIV",{});var c=p(l);r=v(c,E),c.forEach(f),this.h()},h(){b(t,"class","text-red-400"),b(t,"href","#"),d=I(t,"click",y(F))},m(e,s){n(e,t,s),D(N,t,null),n(e,a,s),A(a,o),n(e,l,s),A(l,r),c=!0},p(t,a){e=a,c&&!t.foodIAte||h===(h=e.name+"")||S(o,h),c&&!t.foodIAte||E===(E=e.count+"")||S(r,E)},i(e){c||(i(N.$$.fragment,e),c=!0)},o(e){s(N.$$.fragment,e),c=!1},d(e){e&&f(t),P(N),e&&f(a),e&&f(l),d()}}}function z(e){let t,a,d,u,m;const g=[G,V],p=[];function v(e,t){return 0===t.food.length?0:1}return a=v(0,e),d=p[a]=g[a](e),{c(){t=o(),d.c(),u=l(),this.h()},l(e){t=r(e),d.l(e),u=l(),this.h()},h(){document.title="Eat"},m(e,o){n(e,t,o),p[a].m(e,o),n(e,u,o),m=!0},p(e,t){let o=a;(a=v(0,t))===o?p[a].p(e,t):(h(),s(p[o],1,1,()=>{p[o]=null}),c(),(d=p[a])||(d=p[a]=g[a](t)).c(),i(d,1),d.m(u.parentNode,u))},i(e){m||(i(d),m=!0)},o(e){s(d),m=!1},d(e){e&&f(t),p[a].d(e),e&&f(u)}}}function Y(e,t,a){let o=!1,l="50% 50%",r=!1,n=2e3,s=[],c=[],i=0,f=0,h=0,u="",m=[];function g(e){let t=s.findIndex(t=>t.name===e.name);-1===t?(e.count=1,a("foodIAte",s=[...s,e])):a("foodIAte",s[t].count=s[t].count+1,s),localStorage.setItem("ate",JSON.stringify(s)),v()}function p(e){console.log("delete",e);let t=s.filter(function(t,a,o){return t.name!==e.name});a("foodIAte",s=t),localStorage.setItem("ate",JSON.stringify(t)),v()}d(async()=>{o="true"===(o=localStorage.getItem("firstTime")||"true"),a("isGoal",r=localStorage.getItem("isGoal")||!1),a("goal",n=localStorage.getItem("goal")||2e3),a("columns",l=localStorage.getItem("columns")||"50% 50%"),a("food",c=JSON.parse(localStorage.getItem("food"))||[]),a("filteredFood",m=c),a("filteredFood",m=m.slice(0,15)),a("foodIAte",s=JSON.parse(localStorage.getItem("ate"))||[]),o&&0===c.length&&(console.log("first time and no food"),a("food",c=[{name:"cup milk 2%",protein:5,carbs:6,fat:7},{name:"cup oatmeal",protein:6,carbs:7.3,fat:7.2},{name:"egg",protein:6,carbs:0,fat:7.2},{name:"100g chicken breast",protein:20,carbs:3.2,fat:5.1},{name:"100g brown rice",protein:4,carbs:6.8,fat:4.7},{name:"100g japanese yams",protein:4,carbs:6.8,fat:4.7},{name:"avocado",protein:4,carbs:6.8,fat:4.7},{name:"olive oil",protein:2,carbs:3.8,fat:8},{name:"apple",protein:1,carbs:5.8,fat:3},{name:"cottage cheese",protein:1,carbs:5.8,fat:3},{name:"100g greek yugurt",protein:1,carbs:5.8,fat:3},{name:"1 tbsp peanut butter",protein:1,carbs:5.8,fat:3},{name:"100g salmon",protein:1,carbs:5.8,fat:3},{name:"100g steak",protein:1,carbs:5.8,fat:3}]),localStorage.setItem("firstTime","false"),localStorage.setItem("food",JSON.stringify(c)),a("filteredFood",m=c),a("filteredFood",m=m.slice(0,15))),v(),console.log("food",c)});const v=e=>{a("protein",i=s.reduce(function(e,t){return e+t.protein*t.count},0)),a("carbs",f=s.reduce(function(e,t){return e+t.carbs*t.count},0)),a("fat",h=s.reduce(function(e,t){return e+t.fat*t.count},0))};let b,I;return e.$$.update=((e={protein:1,carbs:1,fat:1,goal:1,calories:1})=>{(e.protein||e.carbs||e.fat)&&a("calories",I=parseFloat(Number(4*i+4*f+9*h).toFixed(1))),(e.goal||e.calories)&&a("remaining",b=n-I<=0?"remaining":"")}),{columns:l,isGoal:r,goal:n,foodIAte:s,food:c,protein:i,carbs:f,fat:h,filter:u,filteredFood:m,handleFoodClick:g,handleClear:function(){localStorage.removeItem("ate"),a("protein",i=0),a("carbs",f=0),a("fat",h=0),a("foodIAte",s=[])},handleDelete:p,handleFilter:function(){""===u&&a("filteredFood",m=c),a("filteredFood",m=c.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())))},remaining:b,calories:I,click_handler:({i:e})=>g(m[e]),input_input_handler:function(){u=this.value,a("filter",u)},click_handler_1:({i:e})=>p(s[e])}}export default class extends e{constructor(e){super(),t(this,e,Y,z,a,{})}}
