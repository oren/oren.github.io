import{S as a,i as e,s as t,e as r,t as n,a as o,b as s,d as l,f as i,h as c,j as f,k as m,O as g,l as d,m as h,x as u,P as p,U as b,R as v,n as S,I as F,N as I}from"./index.9cf44aa4.js";function N(a,e,t){const r=Object.create(a);return r.id=e[t].id,r.name=e[t].name,r.i=t,r}function E(a){let e,t,p,b,v,S,F,I,N,E,k,y=Math.round(a.goal-a.calories)+"";return{c(){e=r("div"),t=r("span"),p=n("Goal:"),b=n(a.goal),v=o(),S=r("span"),F=n("Left:"),N=r("span"),E=n(y),this.h()},l(r){e=s(r,"DIV",{});var n=l(e);t=s(n,"SPAN",{class:!0});var o=l(t);p=i(o,"Goal:"),b=i(o,a.goal),o.forEach(c),v=f(n),S=s(n,"SPAN",{class:!0});var m=l(S);F=i(m,"Left:"),m.forEach(c),N=s(n,"SPAN",{class:!0});var g=l(N);E=i(g,y),g.forEach(c),n.forEach(c),this.h()},h(){m(t,"class","svelte-gnmi7a"),m(S,"class",I=g(a.remaining)+" svelte-gnmi7a"),m(N,"class",k=g(a.remaining)+" svelte-gnmi7a")},m(a,r){d(a,e,r),h(e,t),h(t,p),h(t,b),h(e,v),h(e,S),h(S,F),h(e,N),h(N,E)},p(a,e){a.goal&&u(b,e.goal),a.remaining&&I!==(I=g(e.remaining)+" svelte-gnmi7a")&&m(S,"class",I),(a.goal||a.calories)&&y!==(y=Math.round(e.goal-e.calories)+"")&&u(E,y),a.remaining&&k!==(k=g(e.remaining)+" svelte-gnmi7a")&&m(N,"class",k)},d(a){a&&c(e)}}}function k(a){let e,t;return{c(){e=r("input"),this.h()},l(a){e=s(a,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),this.h()},h(){m(e,"class","bg-gray-200 px-2 py-1 mb-2 mt-3 w-1/2"),m(e,"type","text"),m(e,"placeholder","Search"),m(e,"maxlength","5"),m(e,"size","3"),t=[p(e,"input",a.input_input_handler),p(e,"input",a.handleFilter)]},m(t,r){d(t,e,r),b(e,a.filter)},p(a,t){a.filter&&e.value!==t.filter&&b(e,t.filter)},d(a){a&&c(e),v(t)}}}function y(a){let e,t,o,f=a.name+"";function g(...e){return a.click_handler(a,...e)}return{c(){e=r("button"),t=n(f),this.h()},l(a){e=s(a,"BUTTON",{class:!0});var r=l(e);t=i(r,f),r.forEach(c),this.h()},h(){m(e,"class","bg-blue-100 p-1"),o=p(e,"click",g)},m(a,r){d(a,e,r),h(e,t)},p(e,r){a=r,e.filteredFood&&f!==(f=a.name+"")&&u(t,f)},d(a){a&&c(e),o()}}}function P(a){let e,t,g,p,b,v,I,P,x,A,C,M,O,G,L,T,w,J,_,j,U,D,V,z,$,B,R,q,H,K=Math.round(a.calories)+"",Q=Math.round(a.protein)+"",W=Math.round(a.carbs)+"",X=Math.round(a.fat)+"",Y=a.isGoal&&E(a),Z=a.food.length>=10&&k(a),aa=a.filteredFood,ea=[];for(let e=0;e<aa.length;e+=1)ea[e]=y(N(a,aa,e));return{c(){e=o(),Y&&Y.c(),t=o(),g=r("div"),p=r("span"),b=n("Cal:"),v=n(K),I=o(),P=r("span"),x=n("P:"),A=n(Q),C=o(),M=r("span"),O=n("C:"),G=n(W),L=o(),T=r("span"),w=n("F:"),J=n(X),_=o(),Z&&Z.c(),j=o(),U=r("div");for(let a=0;a<ea.length;a+=1)ea[a].c();D=o(),V=r("ul"),z=r("li"),$=r("a"),B=n("Ate Today"),R=o(),q=r("li"),H=n("Choose Food"),this.h()},l(a){e=f(a),Y&&Y.l(a),t=f(a),g=s(a,"DIV",{});var r=l(g);p=s(r,"SPAN",{class:!0});var n=l(p);b=i(n,"Cal:"),v=i(n,K),n.forEach(c),I=f(r),P=s(r,"SPAN",{class:!0});var o=l(P);x=i(o,"P:"),A=i(o,Q),o.forEach(c),C=f(r),M=s(r,"SPAN",{class:!0});var m=l(M);O=i(m,"C:"),G=i(m,W),m.forEach(c),L=f(r),T=s(r,"SPAN",{class:!0});var d=l(T);w=i(d,"F:"),J=i(d,X),d.forEach(c),r.forEach(c),_=f(a),Z&&Z.l(a),j=f(a),U=s(a,"DIV",{class:!0});var h=l(U);for(let a=0;a<ea.length;a+=1)ea[a].l(h);h.forEach(c),D=f(a),V=s(a,"UL",{class:!0});var u=l(V);z=s(u,"LI",{class:!0});var S=l(z);$=s(S,"A",{href:!0,class:!0});var F=l($);B=i(F,"Ate Today"),F.forEach(c),S.forEach(c),R=f(u),q=s(u,"LI",{class:!0});var N=l(q);H=i(N,"Choose Food"),N.forEach(c),u.forEach(c),this.h()},h(){document.title="Eat",m(p,"class","svelte-gnmi7a"),m(P,"class","svelte-gnmi7a"),m(M,"class","svelte-gnmi7a"),m(T,"class","svelte-gnmi7a"),m(U,"class","wrapper svelte-gnmi7a"),m($,"href","/food"),m($,"class","svelte-gnmi7a"),m(z,"class","first svelte-gnmi7a"),m(q,"class","second svelte-gnmi7a"),m(V,"class","svelte-gnmi7a")},m(a,r){d(a,e,r),Y&&Y.m(a,r),d(a,t,r),d(a,g,r),h(g,p),h(p,b),h(p,v),h(g,I),h(g,P),h(P,x),h(P,A),h(g,C),h(g,M),h(M,O),h(M,G),h(g,L),h(g,T),h(T,w),h(T,J),d(a,_,r),Z&&Z.m(a,r),d(a,j,r),d(a,U,r);for(let a=0;a<ea.length;a+=1)ea[a].m(U,null);d(a,D,r),d(a,V,r),h(V,z),h(z,$),h($,B),h(V,R),h(V,q),h(q,H)},p(a,e){if(e.isGoal?Y?Y.p(a,e):((Y=E(e)).c(),Y.m(t.parentNode,t)):Y&&(Y.d(1),Y=null),a.calories&&K!==(K=Math.round(e.calories)+"")&&u(v,K),a.protein&&Q!==(Q=Math.round(e.protein)+"")&&u(A,Q),a.carbs&&W!==(W=Math.round(e.carbs)+"")&&u(G,W),a.fat&&X!==(X=Math.round(e.fat)+"")&&u(J,X),e.food.length>=10?Z?Z.p(a,e):((Z=k(e)).c(),Z.m(j.parentNode,j)):Z&&(Z.d(1),Z=null),a.handleFoodClick||a.filteredFood){let t;for(aa=e.filteredFood,t=0;t<aa.length;t+=1){const r=N(e,aa,t);ea[t]?ea[t].p(a,r):(ea[t]=y(r),ea[t].c(),ea[t].m(U,null))}for(;t<ea.length;t+=1)ea[t].d(1);ea.length=aa.length}},i:S,o:S,d(a){a&&c(e),Y&&Y.d(a),a&&c(t),a&&c(g),a&&c(_),Z&&Z.d(a),a&&c(j),a&&c(U),F(ea,a),a&&c(D),a&&c(V)}}}function x(a,e,t){let r=!1,n="50% 50%",o=!1,s=2e3,l=[],i=[],c=0,f=0,m=0,g="",d=[],h=[];function u(a){let e=l.findIndex(e=>e.name===a.name);-1===e?(a.count=1,l=[...l,a]):l[e].count=l[e].count+1,localStorage.setItem("ate",JSON.stringify(l)),b(),p(a)}I(async()=>{r="true"===(r=localStorage.getItem("firstTime")||"true"),t("isGoal",o=localStorage.getItem("isGoal")||!1),t("goal",s=localStorage.getItem("goal")||2e3),n=localStorage.getItem("columns")||"50% 50%",t("food",i=JSON.parse(localStorage.getItem("food"))||[]),t("filteredFood",d=JSON.parse(localStorage.getItem("recentFood")).sort((a,e)=>a.name>e.name)||[]),h=d,l=JSON.parse(localStorage.getItem("ate"))||[],r&&0===i.length&&(t("food",i=[{name:"cup milk 2%",protein:5,carbs:6,fat:7},{name:"cup oatmeal",protein:6,carbs:7.3,fat:7.2},{name:"egg",protein:6,carbs:0,fat:7.2},{name:"100g chicken breast",protein:20,carbs:3.2,fat:5.1},{name:"100g brown rice",protein:4,carbs:6.8,fat:4.7},{name:"100g japanese yams",protein:4,carbs:6.8,fat:4.7},{name:"avocado",protein:4,carbs:6.8,fat:4.7},{name:"olive oil",protein:2,carbs:3.8,fat:8},{name:"apple",protein:1,carbs:5.8,fat:3},{name:"cottage cheese",protein:1,carbs:5.8,fat:3},{name:"100g greek yugurt",protein:1,carbs:5.8,fat:3},{name:"1 tbsp peanut butter",protein:1,carbs:5.8,fat:3},{name:"100g salmon",protein:1,carbs:5.8,fat:3},{name:"100g steak",protein:1,carbs:5.8,fat:3},{name:"egg white",protein:1,carbs:5.8,fat:3},{name:"sardins",protein:1,carbs:5.8,fat:3},{name:"tuna can",protein:1,carbs:5.8,fat:3},{name:"tuna fresh",protein:1,carbs:5.8,fat:3},{name:"150g drum sticks",protein:1,carbs:5.8,fat:3},{name:"100g chicken thighs",protein:1,carbs:5.8,fat:3}]),localStorage.setItem("firstTime","false"),localStorage.setItem("food",JSON.stringify(i)),t("filteredFood",d=i)),b()});const p=a=>{let e=h.filter(function(e,t,r){return e.name!==a.name});e.unshift(a),e.length>20&&e.splice(-1,1),localStorage.setItem("recentFood",JSON.stringify(e))},b=a=>{t("protein",c=l.reduce(function(a,e){return a+e.protein*e.count},0)),t("carbs",f=l.reduce(function(a,e){return a+e.carbs*e.count},0)),t("fat",m=l.reduce(function(a,e){return a+e.fat*e.count},0))};let v,S;return a.$$.update=((a={protein:1,carbs:1,fat:1,goal:1,calories:1})=>{(a.protein||a.carbs||a.fat)&&t("calories",S=parseFloat(Number(4*c+4*f+9*m).toFixed(1))),(a.goal||a.calories)&&t("remaining",v=s-S<=0?"remaining":"")}),{isGoal:o,goal:s,food:i,protein:c,carbs:f,fat:m,filter:g,filteredFood:d,handleFilter:function(){""===g&&t("filteredFood",d=i),t("filteredFood",d=i.filter(a=>a.name.toLowerCase().includes(g.toLowerCase())))},handleFoodClick:u,remaining:v,calories:S,input_input_handler:function(){g=this.value,t("filter",g)},click_handler:({i:a})=>u(d[a])}}export default class extends a{constructor(a){super(),e(this,a,x,P,t,{})}}
