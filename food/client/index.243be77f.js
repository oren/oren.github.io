import{S as e,i as a,s as t,a as o,y as r,j as n,l,q as s,E as c,p as i,h as f,N as d,D as h,e as u,t as m,b as g,d as p,f as b,k as v,O as I,m as x,x as A,P as S,Q as E,R as N,n as F,c as k,g as P,T as y,o as C,r as O,I as D}from"./index.4cf4a0eb.js";import{I as M,t as T}from"./index.b5d4b50d.js";function $(e,a,t){const o=Object.create(e);return o.id=a[t].id,o.name=a[t].name,o.count=a[t].count,o.i=t,o}function _(e,a,t){const o=Object.create(e);return o.id=a[t].id,o.name=a[t].name,o.i=t,o}function w(e){let a,t,r,d,I,S,E,N,F,k,P,y,C,O,M,T,w,G,U,z,Y,q,Q,R,H=Math.round(e.calories)+"",K=Math.round(e.protein)+"",W=Math.round(e.carbs)+"",X=Math.round(e.fat)+"",Z=e.filteredFood,ee=[];for(let a=0;a<Z.length;a+=1)ee[a]=V(_(e,Z,a));let ae=e.food.length>=10&&j(e),te=e.isGoal&&J(e),oe=e.foodIAte.length>0&&B(e),re=e.foodIAte,ne=[];for(let a=0;a<re.length;a+=1)ne[a]=L($(e,re,a));const le=e=>s(ne[e],1,1,()=>{ne[e]=null});return{c(){a=u("div");for(let e=0;e<ee.length;e+=1)ee[e].c();t=o(),ae&&ae.c(),r=o(),te&&te.c(),d=o(),I=u("div"),S=u("span"),E=m("Cal:"),N=m(H),F=o(),k=u("span"),P=m("P:"),y=m(K),C=o(),O=u("span"),M=m("C:"),T=m(W),w=o(),G=u("span"),U=m("F:"),z=m(X),Y=o(),oe&&oe.c(),q=o(),Q=u("div");for(let e=0;e<ne.length;e+=1)ne[e].c();this.h()},l(e){a=g(e,"DIV",{class:!0});var o=p(a);for(let e=0;e<ee.length;e+=1)ee[e].l(o);t=n(o),ae&&ae.l(o),o.forEach(f),r=n(e),te&&te.l(e),d=n(e),I=g(e,"DIV",{});var l=p(I);S=g(l,"SPAN",{class:!0});var s=p(S);E=b(s,"Cal:"),N=b(s,H),s.forEach(f),F=n(l),k=g(l,"SPAN",{class:!0});var c=p(k);P=b(c,"P:"),y=b(c,K),c.forEach(f),C=n(l),O=g(l,"SPAN",{class:!0});var i=p(O);M=b(i,"C:"),T=b(i,W),i.forEach(f),w=n(l),G=g(l,"SPAN",{class:!0});var h=p(G);U=b(h,"F:"),z=b(h,X),h.forEach(f),l.forEach(f),Y=n(e),oe&&oe.l(e),q=n(e),Q=g(e,"DIV",{class:!0});var u=p(Q);for(let e=0;e<ne.length;e+=1)ne[e].l(u);u.forEach(f),this.h()},h(){v(a,"class","wrapper svelte-xc7a0e"),v(S,"class","svelte-xc7a0e"),v(k,"class","svelte-xc7a0e"),v(O,"class","svelte-xc7a0e"),v(G,"class","svelte-xc7a0e"),v(Q,"class","ate-wrapper mt-1 svelte-xc7a0e")},m(e,o){l(e,a,o);for(let e=0;e<ee.length;e+=1)ee[e].m(a,null);x(a,t),ae&&ae.m(a,null),l(e,r,o),te&&te.m(e,o),l(e,d,o),l(e,I,o),x(I,S),x(S,E),x(S,N),x(I,F),x(I,k),x(k,P),x(k,y),x(I,C),x(I,O),x(O,M),x(O,T),x(I,w),x(I,G),x(G,U),x(G,z),l(e,Y,o),oe&&oe.m(e,o),l(e,q,o),l(e,Q,o);for(let e=0;e<ne.length;e+=1)ne[e].m(Q,null);R=!0},p(e,o){if(e.handleFoodClick||e.filteredFood){let r;for(Z=o.filteredFood,r=0;r<Z.length;r+=1){const n=_(o,Z,r);ee[r]?ee[r].p(e,n):(ee[r]=V(n),ee[r].c(),ee[r].m(a,t))}for(;r<ee.length;r+=1)ee[r].d(1);ee.length=Z.length}if(o.food.length>=10?ae?ae.p(e,o):((ae=j(o)).c(),ae.m(a,null)):ae&&(ae.d(1),ae=null),o.isGoal?te?te.p(e,o):((te=J(o)).c(),te.m(d.parentNode,d)):te&&(te.d(1),te=null),R&&!e.calories||H===(H=Math.round(o.calories)+"")||A(N,H),R&&!e.protein||K===(K=Math.round(o.protein)+"")||A(y,K),R&&!e.carbs||W===(W=Math.round(o.carbs)+"")||A(T,W),R&&!e.fat||X===(X=Math.round(o.fat)+"")||A(z,X),o.foodIAte.length>0?oe?oe.p(e,o):((oe=B(o)).c(),oe.m(q.parentNode,q)):oe&&(oe.d(1),oe=null),e.foodIAte||e.handleDelete||e.trash){let a;for(re=o.foodIAte,a=0;a<re.length;a+=1){const t=$(o,re,a);ne[a]?(ne[a].p(e,t),i(ne[a],1)):(ne[a]=L(t),ne[a].c(),i(ne[a],1),ne[a].m(Q,null))}for(h(),a=re.length;a<ne.length;a+=1)le(a);c()}},i(e){if(!R){for(let e=0;e<re.length;e+=1)i(ne[e]);R=!0}},o(e){ne=ne.filter(Boolean);for(let e=0;e<ne.length;e+=1)s(ne[e]);R=!1},d(e){e&&f(a),D(ee,e),ae&&ae.d(),e&&f(r),te&&te.d(e),e&&f(d),e&&f(I),e&&f(Y),oe&&oe.d(e),e&&f(q),e&&f(Q),D(ne,e)}}}function G(e){let a,t,r,s,c,i,d;return{c(){a=u("p"),t=m("You have no food."),r=o(),s=u("p"),c=u("a"),i=m("Add some food first"),d=m("."),this.h()},l(e){a=g(e,"P",{});var o=p(a);t=b(o,"You have no food."),o.forEach(f),r=n(e),s=g(e,"P",{});var l=p(s);c=g(l,"A",{href:!0});var h=p(c);i=b(h,"Add some food first"),h.forEach(f),d=b(l,"."),l.forEach(f),this.h()},h(){v(c,"href","/food/manage-food/add-food")},m(e,o){l(e,a,o),x(a,t),l(e,r,o),l(e,s,o),x(s,c),x(c,i),x(s,d)},p:F,i:F,o:F,d(e){e&&f(a),e&&f(r),e&&f(s)}}}function V(e){let a,t,o,r=e.name+"";function n(...a){return e.click_handler(e,...a)}return{c(){a=u("button"),t=m(r),this.h()},l(e){a=g(e,"BUTTON",{class:!0});var o=p(a);t=b(o,r),o.forEach(f),this.h()},h(){v(a,"class","box svelte-xc7a0e"),o=I(a,"click",n)},m(e,o){l(e,a,o),x(a,t)},p(a,o){e=o,a.filteredFood&&r!==(r=e.name+"")&&A(t,r)},d(e){e&&f(a),o()}}}function j(e){let a,t;return{c(){a=u("input"),this.h()},l(e){a=g(e,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),this.h()},h(){v(a,"class","bg-gray-200 px-2 py-1"),v(a,"type","text"),v(a,"placeholder","Search"),v(a,"maxlength","5"),v(a,"size","3"),t=[I(a,"input",e.input_input_handler),I(a,"input",e.handleFilter)]},m(t,o){l(t,a,o),S(a,e.filter)},p(e,t){e.filter&&a.value!==t.filter&&S(a,t.filter)},d(e){e&&f(a),E(t)}}}function J(e){let a,t,r,s,c,i,d,h,I,S,E,F=Math.round(e.goal-e.calories)+"";return{c(){a=u("div"),t=u("span"),r=m("Goal:"),s=m(e.goal),c=o(),i=u("span"),d=m("Left:"),I=u("span"),S=m(F),this.h()},l(o){a=g(o,"DIV",{});var l=p(a);t=g(l,"SPAN",{class:!0});var h=p(t);r=b(h,"Goal:"),s=b(h,e.goal),h.forEach(f),c=n(l),i=g(l,"SPAN",{class:!0});var u=p(i);d=b(u,"Left:"),u.forEach(f),I=g(l,"SPAN",{class:!0});var m=p(I);S=b(m,F),m.forEach(f),l.forEach(f),this.h()},h(){v(t,"class","svelte-xc7a0e"),v(i,"class",h=N(e.remaining)+" svelte-xc7a0e"),v(I,"class",E=N(e.remaining)+" svelte-xc7a0e")},m(e,o){l(e,a,o),x(a,t),x(t,r),x(t,s),x(a,c),x(a,i),x(i,d),x(a,I),x(I,S)},p(e,a){e.goal&&A(s,a.goal),e.remaining&&h!==(h=N(a.remaining)+" svelte-xc7a0e")&&v(i,"class",h),(e.goal||e.calories)&&F!==(F=Math.round(a.goal-a.calories)+"")&&A(S,F),e.remaining&&E!==(E=N(a.remaining)+" svelte-xc7a0e")&&v(I,"class",E)},d(e){e&&f(a)}}}function B(e){let a,t,o,r;return{c(){a=u("div"),t=u("button"),o=m("Clear All"),this.h()},l(e){a=g(e,"DIV",{});var r=p(a);t=g(r,"BUTTON",{class:!0,href:!0});var n=p(t);o=b(n,"Clear All"),n.forEach(f),r.forEach(f),this.h()},h(){v(t,"class","bg-red-400 py-1 mt-2 w-48"),v(t,"href","#"),r=I(t,"click",e.handleClear)},m(e,r){l(e,a,r),x(a,t),x(t,o)},p:F,d(e){e&&f(a),r()}}}function L(e){let a,t,o,r,n,c,d,h=e.name+"",S=e.count+"";const E=new M({props:{data:T}});function N(...a){return e.click_handler_1(e,...a)}return{c(){a=u("button"),k(E.$$.fragment),t=u("div"),o=m(h),r=u("div"),n=m(S),this.h()},l(e){a=g(e,"BUTTON",{class:!0,href:!0});var l=p(a);P(E.$$.fragment,l),l.forEach(f),t=g(e,"DIV",{});var s=p(t);o=b(s,h),s.forEach(f),r=g(e,"DIV",{});var c=p(r);n=b(c,S),c.forEach(f),this.h()},h(){v(a,"class","text-red-400"),v(a,"href","#"),d=I(a,"click",y(N))},m(e,s){l(e,a,s),C(E,a,null),l(e,t,s),x(t,o),l(e,r,s),x(r,n),c=!0},p(a,t){e=t,c&&!a.foodIAte||h===(h=e.name+"")||A(o,h),c&&!a.foodIAte||S===(S=e.count+"")||A(n,S)},i(e){c||(i(E.$$.fragment,e),c=!0)},o(e){s(E.$$.fragment,e),c=!1},d(e){e&&f(a),O(E),e&&f(t),e&&f(r),d()}}}function U(e){let a,t,d,u,m;const g=[G,w],p=[];function b(e,a){return 0===a.food.length?0:1}return t=b(0,e),d=p[t]=g[t](e),{c(){a=o(),d.c(),u=r(),this.h()},l(e){a=n(e),d.l(e),u=r(),this.h()},h(){document.title="Eat"},m(e,o){l(e,a,o),p[t].m(e,o),l(e,u,o),m=!0},p(e,a){let o=t;(t=b(0,a))===o?p[t].p(e,a):(h(),s(p[o],1,1,()=>{p[o]=null}),c(),(d=p[t])||(d=p[t]=g[t](a)).c(),i(d,1),d.m(u.parentNode,u))},i(e){m||(i(d),m=!0)},o(e){s(d),m=!1},d(e){e&&f(a),p[t].d(e),e&&f(u)}}}function z(e,a,t){let o=!1,r="50% 50%",n=!1,l=2e3,s=[],c=[],i=0,f=0,h=0,u="",m=[];function g(e){let a=s.findIndex(a=>a.name===e.name);-1===a?(e.count=1,t("foodIAte",s=[...s,e])):t("foodIAte",s[a].count=s[a].count+1,s),localStorage.setItem("ate",JSON.stringify(s)),b()}function p(e){console.log("delete",e);let a=s.filter(function(a,t,o){return a.name!==e.name});t("foodIAte",s=a),localStorage.setItem("ate",JSON.stringify(a)),b()}d(async()=>{o="true"===(o=localStorage.getItem("firstTime")||"true"),t("isGoal",n=localStorage.getItem("isGoal")||!1),t("goal",l=localStorage.getItem("goal")||2e3),r=localStorage.getItem("columns")||"50% 50%",t("food",c=JSON.parse(localStorage.getItem("food"))||[]),t("filteredFood",m=c),t("filteredFood",m=m.slice(0,16)),t("foodIAte",s=JSON.parse(localStorage.getItem("ate"))||[]),o&&0===c.length&&(console.log("first time and no food"),t("food",c=[{name:"cup milk 2%",protein:5,carbs:6,fat:7},{name:"cup oatmeal",protein:6,carbs:7.3,fat:7.2},{name:"egg",protein:6,carbs:0,fat:7.2},{name:"100g chicken breast",protein:20,carbs:3.2,fat:5.1},{name:"100g brown rice",protein:4,carbs:6.8,fat:4.7},{name:"100g japanese yams",protein:4,carbs:6.8,fat:4.7},{name:"avocado",protein:4,carbs:6.8,fat:4.7},{name:"olive oil",protein:2,carbs:3.8,fat:8},{name:"apple",protein:1,carbs:5.8,fat:3},{name:"cottage cheese",protein:1,carbs:5.8,fat:3},{name:"100g greek yugurt",protein:1,carbs:5.8,fat:3},{name:"1 tbsp peanut butter",protein:1,carbs:5.8,fat:3},{name:"100g salmon",protein:1,carbs:5.8,fat:3},{name:"100g steak",protein:1,carbs:5.8,fat:3},{name:"egg white",protein:1,carbs:5.8,fat:3},{name:"sardins",protein:1,carbs:5.8,fat:3},{name:"tuna can",protein:1,carbs:5.8,fat:3},{name:"tuna fresh",protein:1,carbs:5.8,fat:3},{name:"150g drum sticks",protein:1,carbs:5.8,fat:3},{name:"100g chicken thighs",protein:1,carbs:5.8,fat:3}]),localStorage.setItem("firstTime","false"),localStorage.setItem("food",JSON.stringify(c)),t("filteredFood",m=c),t("filteredFood",m=m.slice(0,16))),b(),console.log("food",c)});const b=e=>{t("protein",i=s.reduce(function(e,a){return e+a.protein*a.count},0)),t("carbs",f=s.reduce(function(e,a){return e+a.carbs*a.count},0)),t("fat",h=s.reduce(function(e,a){return e+a.fat*a.count},0))};let v,I;return e.$$.update=((e={protein:1,carbs:1,fat:1,goal:1,calories:1})=>{(e.protein||e.carbs||e.fat)&&t("calories",I=parseFloat(Number(4*i+4*f+9*h).toFixed(1))),(e.goal||e.calories)&&t("remaining",v=l-I<=0?"remaining":"")}),{isGoal:n,goal:l,foodIAte:s,food:c,protein:i,carbs:f,fat:h,filter:u,filteredFood:m,handleFoodClick:g,handleClear:function(){localStorage.removeItem("ate"),t("protein",i=0),t("carbs",f=0),t("fat",h=0),t("foodIAte",s=[])},handleDelete:p,handleFilter:function(){""===u&&t("filteredFood",m=c),t("filteredFood",m=c.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())))},remaining:v,calories:I,click_handler:({i:e})=>g(m[e]),input_input_handler:function(){u=this.value,t("filter",u)},click_handler_1:({i:e})=>p(s[e])}}export default class extends e{constructor(e){super(),a(this,e,z,U,t,{})}}
