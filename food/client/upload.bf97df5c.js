import{S as e,i as o,s as r,e as a,t,a as s,b as l,d as i,f as n,h as c,j as d,l as h,m as u,x as f,y as p,k as g,P as v,n as m,N as y,M as b}from"./index.9cf44aa4.js";import"./index.e287424e.js";import{v as E,f as I,d as x,a as S}from"./validate.ef36bd26.js";const{document:F}=b;function D(e){let o,r,t,n,f;return{c(){o=a("label"),r=a("input"),t=s(),n=a("span"),this.h()},l(e){o=l(e,"LABEL",{class:!0});var a=i(o);r=l(a,"INPUT",{type:!0,class:!0}),t=d(a),n=l(a,"SPAN",{class:!0}),i(n).forEach(c),a.forEach(c),this.h()},h(){g(r,"type","checkbox"),g(r,"class","svelte-f7eyb0"),g(n,"class","slider round svelte-f7eyb0"),g(o,"class","switch svelte-f7eyb0"),f=v(r,"change",e.toggleIgnoreDuplicates)},m(e,a){h(e,o,a),u(o,r),u(o,t),u(o,n)},p:m,d(e){e&&c(o),f()}}}function N(e){let o,r,t,n,f;return{c(){o=a("label"),r=a("input"),t=s(),n=a("span"),this.h()},l(e){o=l(e,"LABEL",{class:!0});var a=i(o);r=l(a,"INPUT",{type:!0,checked:!0,class:!0}),t=d(a),n=l(a,"SPAN",{class:!0}),i(n).forEach(c),a.forEach(c),this.h()},h(){g(r,"type","checkbox"),r.checked=!0,g(r,"class","svelte-f7eyb0"),g(n,"class","slider round svelte-f7eyb0"),g(o,"class","switch svelte-f7eyb0"),f=v(r,"change",e.toggleIgnoreDuplicates)},m(e,a){h(e,o,a),u(o,r),u(o,t),u(o,n)},p:m,d(e){e&&c(o),f()}}}function P(e){let o,r,p,g,v,m,y,b,E,I,x,S,F,D,N,P,w,A;return{c(){o=a("h2"),r=t("Summary"),p=s(),g=a("p"),v=t("Valids: "),m=t(e.validFood),y=s(),b=a("p"),E=t("Errors: "),I=t(e.errors),x=s(),S=a("p"),F=t("Overrides: "),D=t(e.overrides),N=s(),P=a("p"),w=t("Ignores: "),A=t(e.ignores)},l(a){o=l(a,"H2",{});var t=i(o);r=n(t,"Summary"),t.forEach(c),p=d(a),g=l(a,"P",{});var s=i(g);v=n(s,"Valids: "),m=n(s,e.validFood),s.forEach(c),y=d(a),b=l(a,"P",{});var h=i(b);E=n(h,"Errors: "),I=n(h,e.errors),h.forEach(c),x=d(a),S=l(a,"P",{});var u=i(S);F=n(u,"Overrides: "),D=n(u,e.overrides),u.forEach(c),N=d(a),P=l(a,"P",{});var f=i(P);w=n(f,"Ignores: "),A=n(f,e.ignores),f.forEach(c)},m(e,a){h(e,o,a),u(o,r),h(e,p,a),h(e,g,a),u(g,v),u(g,m),h(e,y,a),h(e,b,a),u(b,E),u(b,I),h(e,x,a),h(e,S,a),u(S,F),u(S,D),h(e,N,a),h(e,P,a),u(P,w),u(P,A)},p(e,o){e.validFood&&f(m,o.validFood),e.errors&&f(I,o.errors),e.overrides&&f(D,o.overrides),e.ignores&&f(A,o.ignores)},d(e){e&&c(o),e&&c(p),e&&c(g),e&&c(y),e&&c(b),e&&c(x),e&&c(S),e&&c(N),e&&c(P)}}}function w(e){let o,r,f,y,b,E,I,x,S,w,A,L,T,U,k,C,O,j,B,V;function H(e,o){return o.ignoreDuplicates?N:D}let J=H(0,e),M=J(e),R=e.done&&P(e);return{c(){o=s(),r=a("h2"),f=t("Upload Food"),y=s(),b=a("p"),E=t("The upload feature is in progress. Currently it deletes all your food and replace it with whatever you have in the text file. Also there is no validation so you might corrput your localStorage and if that's the case, you'll have to delete the website's storage to fix it"),I=s(),x=a("div"),S=a("span"),w=t("Ignore food with the same name:"),A=s(),M.c(),L=s(),T=a("form"),U=a("label"),k=t("Choose file to upload (.txt)"),C=s(),O=a("input"),j=s(),R&&R.c(),B=p(),this.h()},l(e){o=d(e),r=l(e,"H2",{class:!0});var a=i(r);f=n(a,"Upload Food"),a.forEach(c),y=d(e),b=l(e,"P",{class:!0});var t=i(b);E=n(t,"The upload feature is in progress. Currently it deletes all your food and replace it with whatever you have in the text file. Also there is no validation so you might corrput your localStorage and if that's the case, you'll have to delete the website's storage to fix it"),t.forEach(c),I=d(e),x=l(e,"DIV",{class:!0});var s=i(x);S=l(s,"SPAN",{class:!0});var h=i(S);w=n(h,"Ignore food with the same name:"),h.forEach(c),A=d(s),M.l(s),s.forEach(c),L=d(e),T=l(e,"FORM",{});var u=i(T);U=l(u,"LABEL",{for:!0});var g=i(U);k=n(g,"Choose file to upload (.txt)"),g.forEach(c),C=d(u),O=l(u,"INPUT",{id:!0,type:!0,accept:!0}),u.forEach(c),j=d(e),R&&R.l(e),B=p(),this.h()},h(){F.title="Upload Food",g(r,"class","text-xl mb-1"),g(b,"class","mb-3"),g(S,"class","mt-1 mr-2 float-left"),g(x,"class",""),g(U,"for","image_uploads"),g(O,"id","input"),g(O,"type","file"),g(O,"accept",".txt"),V=v(O,"change",e.handleFile)},m(e,a){h(e,o,a),h(e,r,a),u(r,f),h(e,y,a),h(e,b,a),u(b,E),h(e,I,a),h(e,x,a),u(x,S),u(S,w),u(x,A),M.m(x,null),h(e,L,a),h(e,T,a),u(T,U),u(U,k),u(T,C),u(T,O),h(e,j,a),R&&R.m(e,a),h(e,B,a)},p(e,o){J===(J=H(0,o))&&M?M.p(e,o):(M.d(1),(M=J(o))&&(M.c(),M.m(x,null))),o.done?R?R.p(e,o):((R=P(o)).c(),R.m(B.parentNode,B)):R&&(R.d(1),R=null)},i:m,o:m,d(e){e&&c(o),e&&c(r),e&&c(y),e&&c(b),e&&c(I),e&&c(x),M.d(),e&&c(L),e&&c(T),e&&c(j),R&&R.d(e),e&&c(B),V()}}}function A(e,o,r){let a=[],t=!1,s=0,l=0,i=0,n=0,c=!0;return y(async()=>{a=JSON.parse(localStorage.getItem("food"))||[],r("ignoreDuplicates",c=!localStorage.getItem("ignoreDuplicates")||"true"===localStorage.getItem("ignoreDuplicates")),console.log("ignoreDuplicates",c)}),{done:t,validFood:s,overrides:l,ignores:i,errors:n,ignoreDuplicates:c,handleFile:function(){r("validFood",s=0),r("overrides",l=0),r("ignores",i=0),r("errors",n=0);const e=document.getElementById("input").files[0];let o={},d=!1,h={};var u=new FileReader;u.onload=function(e){for(var u=this.result.split("\n"),f=0;f<u.length;f++){var p=u[f].split(",");if(o={name:p[0],protein:Number(p[1]),carbs:Number(p[2]),fat:Number(p[3])},(h=E(o)).valid){if(r("validFood",s+=1),-1!=(d=I(o.name,a))){if(c){r("ignores",i+=1);continue}r("overrides",l+=1),a=x(o.name,a)}a=S(o,a)}else r("errors",n+=1)}console.log("food",a),localStorage.setItem("food",JSON.stringify(a)),r("done",t=!0)},u.onerror=function(e){console.error("File could not be read! Code "+e.target.error.code)},u.readAsText(e)},toggleIgnoreDuplicates:function(){if(c)return r("ignoreDuplicates",c=!1),localStorage.setItem("ignoreDuplicates",!1),void console.log(c);r("ignoreDuplicates",c=!0),localStorage.setItem("ignoreDuplicates",!0),console.log(c)}}}export default class extends e{constructor(e){super(),o(this,e,A,w,r,{})}}
