import{S as a,i as e,s as t,e as r,t as n,a as s,b as o,d as l,f as i,h as c,j as f,k as m,O as g,l as d,m as h,x as u,P as p,U as b,n as v,I as S,R as F,N as I}from"./index.9cf44aa4.js";function N(a,e,t){const r=Object.create(a);return r.id=e[t].id,r.name=e[t].name,r.i=t,r}function E(a){let e,t,p,b,v,S,F,I,N,E,k,y=Math.round(a.goal-a.calories)+"";return{c(){e=r("div"),t=r("span"),p=n("Goal:"),b=n(a.goal),v=s(),S=r("span"),F=n("Left:"),N=r("span"),E=n(y),this.h()},l(r){e=o(r,"DIV",{});var n=l(e);t=o(n,"SPAN",{class:!0});var s=l(t);p=i(s,"Goal:"),b=i(s,a.goal),s.forEach(c),v=f(n),S=o(n,"SPAN",{class:!0});var m=l(S);F=i(m,"Left:"),m.forEach(c),N=o(n,"SPAN",{class:!0});var g=l(N);E=i(g,y),g.forEach(c),n.forEach(c),this.h()},h(){m(t,"class","svelte-gnmi7a"),m(S,"class",I=g(a.remaining)+" svelte-gnmi7a"),m(N,"class",k=g(a.remaining)+" svelte-gnmi7a")},m(a,r){d(a,e,r),h(e,t),h(t,p),h(t,b),h(e,v),h(e,S),h(S,F),h(e,N),h(N,E)},p(a,e){a.goal&&u(b,e.goal),a.remaining&&I!==(I=g(e.remaining)+" svelte-gnmi7a")&&m(S,"class",I),(a.goal||a.calories)&&y!==(y=Math.round(e.goal-e.calories)+"")&&u(E,y),a.remaining&&k!==(k=g(e.remaining)+" svelte-gnmi7a")&&m(N,"class",k)},d(a){a&&c(e)}}}function k(a){let e,t,s,f=a.name+"";function g(...e){return a.click_handler(a,...e)}return{c(){e=r("button"),t=n(f),this.h()},l(a){e=o(a,"BUTTON",{class:!0});var r=l(e);t=i(r,f),r.forEach(c),this.h()},h(){m(e,"class","bg-blue-100 p-1"),s=p(e,"click",g)},m(a,r){d(a,e,r),h(e,t)},p(e,r){a=r,e.filteredFood&&f!==(f=a.name+"")&&u(t,f)},d(a){a&&c(e),s()}}}function y(a){let e,t,g,I,y,P,x,A,C,M,O,G,L,T,w,J,_,j,U,D,V,z,$,B,R,q,H,K,Q,W,X,Y=Math.round(a.calories)+"",Z=Math.round(a.protein)+"",aa=Math.round(a.carbs)+"",ea=Math.round(a.fat)+"",ta=a.isGoal&&E(a),ra=a.filteredFood,na=[];for(let e=0;e<ra.length;e+=1)na[e]=k(N(a,ra,e));return{c(){e=s(),ta&&ta.c(),t=s(),g=r("div"),I=r("span"),y=n("Cal:"),P=n(Y),x=s(),A=r("span"),C=n("P:"),M=n(Z),O=s(),G=r("span"),L=n("C:"),T=n(aa),w=s(),J=r("span"),_=n("F:"),j=n(ea),U=s(),D=r("input"),V=s(),z=r("div");for(let a=0;a<na.length;a+=1)na[a].c();$=s(),B=r("ul"),R=r("li"),q=r("a"),H=n("Ate Today"),K=s(),Q=r("li"),W=n("Choose Food"),this.h()},l(a){e=f(a),ta&&ta.l(a),t=f(a),g=o(a,"DIV",{});var r=l(g);I=o(r,"SPAN",{class:!0});var n=l(I);y=i(n,"Cal:"),P=i(n,Y),n.forEach(c),x=f(r),A=o(r,"SPAN",{class:!0});var s=l(A);C=i(s,"P:"),M=i(s,Z),s.forEach(c),O=f(r),G=o(r,"SPAN",{class:!0});var m=l(G);L=i(m,"C:"),T=i(m,aa),m.forEach(c),w=f(r),J=o(r,"SPAN",{class:!0});var d=l(J);_=i(d,"F:"),j=i(d,ea),d.forEach(c),r.forEach(c),U=f(a),D=o(a,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),V=f(a),z=o(a,"DIV",{class:!0});var h=l(z);for(let a=0;a<na.length;a+=1)na[a].l(h);h.forEach(c),$=f(a),B=o(a,"UL",{class:!0});var u=l(B);R=o(u,"LI",{class:!0});var p=l(R);q=o(p,"A",{href:!0,class:!0});var b=l(q);H=i(b,"Ate Today"),b.forEach(c),p.forEach(c),K=f(u),Q=o(u,"LI",{class:!0});var v=l(Q);W=i(v,"Choose Food"),v.forEach(c),u.forEach(c),this.h()},h(){document.title="Eat",m(I,"class","svelte-gnmi7a"),m(A,"class","svelte-gnmi7a"),m(G,"class","svelte-gnmi7a"),m(J,"class","svelte-gnmi7a"),m(D,"class","bg-gray-200 px-2 py-1 mb-2 mt-3 w-1/2"),m(D,"type","text"),m(D,"placeholder","Search"),m(D,"maxlength","5"),m(D,"size","3"),m(z,"class","wrapper svelte-gnmi7a"),m(q,"href","/food"),m(q,"class","svelte-gnmi7a"),m(R,"class","first svelte-gnmi7a"),m(Q,"class","second svelte-gnmi7a"),m(B,"class","svelte-gnmi7a"),X=[p(D,"input",a.input_input_handler),p(D,"input",a.handleFilter)]},m(r,n){d(r,e,n),ta&&ta.m(r,n),d(r,t,n),d(r,g,n),h(g,I),h(I,y),h(I,P),h(g,x),h(g,A),h(A,C),h(A,M),h(g,O),h(g,G),h(G,L),h(G,T),h(g,w),h(g,J),h(J,_),h(J,j),d(r,U,n),d(r,D,n),b(D,a.filter),d(r,V,n),d(r,z,n);for(let a=0;a<na.length;a+=1)na[a].m(z,null);d(r,$,n),d(r,B,n),h(B,R),h(R,q),h(q,H),h(B,K),h(B,Q),h(Q,W)},p(a,e){if(e.isGoal?ta?ta.p(a,e):((ta=E(e)).c(),ta.m(t.parentNode,t)):ta&&(ta.d(1),ta=null),a.calories&&Y!==(Y=Math.round(e.calories)+"")&&u(P,Y),a.protein&&Z!==(Z=Math.round(e.protein)+"")&&u(M,Z),a.carbs&&aa!==(aa=Math.round(e.carbs)+"")&&u(T,aa),a.fat&&ea!==(ea=Math.round(e.fat)+"")&&u(j,ea),a.filter&&D.value!==e.filter&&b(D,e.filter),a.handleFoodClick||a.filteredFood){let t;for(ra=e.filteredFood,t=0;t<ra.length;t+=1){const r=N(e,ra,t);na[t]?na[t].p(a,r):(na[t]=k(r),na[t].c(),na[t].m(z,null))}for(;t<na.length;t+=1)na[t].d(1);na.length=ra.length}},i:v,o:v,d(a){a&&c(e),ta&&ta.d(a),a&&c(t),a&&c(g),a&&c(U),a&&c(D),a&&c(V),a&&c(z),S(na,a),a&&c($),a&&c(B),F(X)}}}function P(a,e,t){let r=!1,n="50% 50%",s=!1,o=2e3,l=[],i=[],c=0,f=0,m=0,g="",d=[],h=[];function u(a){let e=l.findIndex(e=>e.name===a.name);-1===e?(a.count=1,l=[...l,a]):l[e].count=l[e].count+1,localStorage.setItem("ate",JSON.stringify(l)),b(),p(a)}I(async()=>{r="true"===(r=localStorage.getItem("firstTime")||"true"),t("isGoal",s=localStorage.getItem("isGoal")||!1),t("goal",o=localStorage.getItem("goal")||2e3),n=localStorage.getItem("columns")||"50% 50%",i=JSON.parse(localStorage.getItem("food"))||[],t("filteredFood",d=JSON.parse(localStorage.getItem("recentFood")).sort((a,e)=>a.name>e.name)||[]),h=d,console.log("recent",d),l=JSON.parse(localStorage.getItem("ate"))||[],r&&0===i.length&&(i=[{name:"cup milk 2%",protein:5,carbs:6,fat:7},{name:"cup oatmeal",protein:6,carbs:7.3,fat:7.2},{name:"egg",protein:6,carbs:0,fat:7.2},{name:"100g chicken breast",protein:20,carbs:3.2,fat:5.1},{name:"100g brown rice",protein:4,carbs:6.8,fat:4.7},{name:"100g japanese yams",protein:4,carbs:6.8,fat:4.7},{name:"avocado",protein:4,carbs:6.8,fat:4.7},{name:"olive oil",protein:2,carbs:3.8,fat:8},{name:"apple",protein:1,carbs:5.8,fat:3},{name:"cottage cheese",protein:1,carbs:5.8,fat:3},{name:"100g greek yugurt",protein:1,carbs:5.8,fat:3},{name:"1 tbsp peanut butter",protein:1,carbs:5.8,fat:3},{name:"100g salmon",protein:1,carbs:5.8,fat:3},{name:"100g steak",protein:1,carbs:5.8,fat:3},{name:"egg white",protein:1,carbs:5.8,fat:3},{name:"sardins",protein:1,carbs:5.8,fat:3},{name:"tuna can",protein:1,carbs:5.8,fat:3},{name:"tuna fresh",protein:1,carbs:5.8,fat:3},{name:"150g drum sticks",protein:1,carbs:5.8,fat:3},{name:"100g chicken thighs",protein:1,carbs:5.8,fat:3}],localStorage.setItem("firstTime","false"),localStorage.setItem("food",JSON.stringify(i)),t("filteredFood",d=i)),b()});const p=a=>{let e=h.filter(function(e,t,r){return e.name!==a.name});e.unshift(a),e.length>20&&e.splice(-1,1),localStorage.setItem("recentFood",JSON.stringify(e))},b=a=>{t("protein",c=l.reduce(function(a,e){return a+e.protein*e.count},0)),t("carbs",f=l.reduce(function(a,e){return a+e.carbs*e.count},0)),t("fat",m=l.reduce(function(a,e){return a+e.fat*e.count},0))};let v,S;return a.$$.update=((a={protein:1,carbs:1,fat:1,goal:1,calories:1})=>{(a.protein||a.carbs||a.fat)&&t("calories",S=parseFloat(Number(4*c+4*f+9*m).toFixed(1))),(a.goal||a.calories)&&t("remaining",v=o-S<=0?"remaining":"")}),{isGoal:s,goal:o,protein:c,carbs:f,fat:m,filter:g,filteredFood:d,handleFilter:function(){""===g&&t("filteredFood",d=i),t("filteredFood",d=i.filter(a=>a.name.toLowerCase().includes(g.toLowerCase())))},handleFoodClick:u,remaining:v,calories:S,input_input_handler:function(){g=this.value,t("filter",g)},click_handler:({i:a})=>u(d[a])}}export default class extends a{constructor(a){super(),e(this,a,P,y,t,{})}}
