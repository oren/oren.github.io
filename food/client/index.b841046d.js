import{S as a,i as e,s as t,e as r,t as o,a as s,b as n,d as l,f as c,h as i,j as f,k as m,N as h,l as p,m as u,x as d,O as g,P as b,Q as v,n as S,I as x,R as F,T as I}from"./index.37c8d187.js";function N(a,e,t){const r=Object.create(a);return r.id=e[t].id,r.name=e[t].name,r.i=t,r}function E(a){let e,t,g,b,v,S,x,F,I,N,E,y=Math.round(a.goal-a.calories)+"";return{c(){e=r("div"),t=r("span"),g=o("Goal:"),b=o(a.goal),v=s(),S=r("span"),x=o("Left:"),I=r("span"),N=o(y),this.h()},l(r){e=n(r,"DIV",{});var o=l(e);t=n(o,"SPAN",{class:!0});var s=l(t);g=c(s,"Goal:"),b=c(s,a.goal),s.forEach(i),v=f(o),S=n(o,"SPAN",{class:!0});var m=l(S);x=c(m,"Left:"),m.forEach(i),I=n(o,"SPAN",{class:!0});var h=l(I);N=c(h,y),h.forEach(i),o.forEach(i),this.h()},h(){m(t,"class","svelte-mhncox"),m(S,"class",F=h(a.remaining)+" svelte-mhncox"),m(I,"class",E=h(a.remaining)+" svelte-mhncox")},m(a,r){p(a,e,r),u(e,t),u(t,g),u(t,b),u(e,v),u(e,S),u(S,x),u(e,I),u(I,N)},p(a,e){a.goal&&d(b,e.goal),a.remaining&&F!==(F=h(e.remaining)+" svelte-mhncox")&&m(S,"class",F),(a.goal||a.calories)&&y!==(y=Math.round(e.goal-e.calories)+"")&&d(N,y),a.remaining&&E!==(E=h(e.remaining)+" svelte-mhncox")&&m(I,"class",E)},d(a){a&&i(e)}}}function y(a){let e,t,s,f=a.name+"";function h(...e){return a.click_handler(a,...e)}return{c(){e=r("button"),t=o(f),this.h()},l(a){e=n(a,"BUTTON",{class:!0});var r=l(e);t=c(r,f),r.forEach(i),this.h()},h(){m(e,"class","bg-blue-100 p-1"),s=g(e,"click",h)},m(a,r){p(a,e,r),u(e,t)},p(e,r){a=r,e.filteredFood&&f!==(f=a.name+"")&&d(t,f)},d(a){a&&i(e),s()}}}function k(a){let e,t,h,I,k,P,A,C,M,O,L,G,T,w,J,_,j,D,U,V,z,$,B,Q,R,q,H,K,W,X,Y,Z,aa,ea,ta=Math.round(a.calories)+"",ra=Math.round(a.protein)+"",oa=Math.round(a.carbs)+"",sa=Math.round(a.fat)+"",na=a.isGoal&&E(a),la=a.filteredFood,ca=[];for(let e=0;e<la.length;e+=1)ca[e]=y(N(a,la,e));return{c(){e=s(),na&&na.c(),t=s(),h=r("div"),I=r("span"),k=o("Cal:"),P=o(ta),A=s(),C=r("span"),M=o("P:"),O=o(ra),L=s(),G=r("span"),T=o("C:"),w=o(oa),J=s(),_=r("span"),j=o("F:"),D=o(sa),U=s(),V=r("input"),z=s(),$=r("div");for(let a=0;a<ca.length;a+=1)ca[a].c();B=s(),Q=r("p"),R=o("(Last 20 items you ate)"),q=s(),H=r("ul"),K=r("li"),W=o("Choose Food"),X=s(),Y=r("li"),Z=r("a"),aa=o("Ate Today"),this.h()},l(a){e=f(a),na&&na.l(a),t=f(a),h=n(a,"DIV",{});var r=l(h);I=n(r,"SPAN",{class:!0});var o=l(I);k=c(o,"Cal:"),P=c(o,ta),o.forEach(i),A=f(r),C=n(r,"SPAN",{class:!0});var s=l(C);M=c(s,"P:"),O=c(s,ra),s.forEach(i),L=f(r),G=n(r,"SPAN",{class:!0});var m=l(G);T=c(m,"C:"),w=c(m,oa),m.forEach(i),J=f(r),_=n(r,"SPAN",{class:!0});var p=l(_);j=c(p,"F:"),D=c(p,sa),p.forEach(i),r.forEach(i),U=f(a),V=n(a,"INPUT",{class:!0,type:!0,placeholder:!0,maxlength:!0,size:!0}),z=f(a),$=n(a,"DIV",{class:!0});var u=l($);for(let a=0;a<ca.length;a+=1)ca[a].l(u);B=f(u),Q=n(u,"P",{class:!0,style:!0});var d=l(Q);R=c(d,"(Last 20 items you ate)"),d.forEach(i),u.forEach(i),q=f(a),H=n(a,"UL",{class:!0});var g=l(H);K=n(g,"LI",{class:!0});var b=l(K);W=c(b,"Choose Food"),b.forEach(i),X=f(g),Y=n(g,"LI",{class:!0});var v=l(Y);Z=n(v,"A",{href:!0,class:!0});var S=l(Z);aa=c(S,"Ate Today"),S.forEach(i),v.forEach(i),g.forEach(i),this.h()},h(){document.title="Eat",m(I,"class","svelte-mhncox"),m(C,"class","svelte-mhncox"),m(G,"class","svelte-mhncox"),m(_,"class","svelte-mhncox"),m(V,"class","bg-gray-200 px-2 py-1 mb-2 mt-3 w-1/2"),m(V,"type","text"),m(V,"placeholder","Search"),m(V,"maxlength","5"),m(V,"size","3"),m(Q,"class","mt-2 text-center"),b(Q,"grid-column","span 2"),m($,"class","wrapper svelte-mhncox"),m(K,"class","first svelte-mhncox"),m(Z,"href","/food/eat"),m(Z,"class","svelte-mhncox"),m(Y,"class","second svelte-mhncox"),m(H,"class","svelte-mhncox"),ea=[g(V,"input",a.input_input_handler),g(V,"input",a.handleFilter)]},m(r,o){p(r,e,o),na&&na.m(r,o),p(r,t,o),p(r,h,o),u(h,I),u(I,k),u(I,P),u(h,A),u(h,C),u(C,M),u(C,O),u(h,L),u(h,G),u(G,T),u(G,w),u(h,J),u(h,_),u(_,j),u(_,D),p(r,U,o),p(r,V,o),v(V,a.filter),p(r,z,o),p(r,$,o);for(let a=0;a<ca.length;a+=1)ca[a].m($,null);u($,B),u($,Q),u(Q,R),p(r,q,o),p(r,H,o),u(H,K),u(K,W),u(H,X),u(H,Y),u(Y,Z),u(Z,aa)},p(a,e){if(e.isGoal?na?na.p(a,e):((na=E(e)).c(),na.m(t.parentNode,t)):na&&(na.d(1),na=null),a.calories&&ta!==(ta=Math.round(e.calories)+"")&&d(P,ta),a.protein&&ra!==(ra=Math.round(e.protein)+"")&&d(O,ra),a.carbs&&oa!==(oa=Math.round(e.carbs)+"")&&d(w,oa),a.fat&&sa!==(sa=Math.round(e.fat)+"")&&d(D,sa),a.filter&&V.value!==e.filter&&v(V,e.filter),a.handleFoodClick||a.filteredFood){let t;for(la=e.filteredFood,t=0;t<la.length;t+=1){const r=N(e,la,t);ca[t]?ca[t].p(a,r):(ca[t]=y(r),ca[t].c(),ca[t].m($,B))}for(;t<ca.length;t+=1)ca[t].d(1);ca.length=la.length}},i:S,o:S,d(a){a&&i(e),na&&na.d(a),a&&i(t),a&&i(h),a&&i(U),a&&i(V),a&&i(z),a&&i($),x(ca,a),a&&i(q),a&&i(H),F(ea)}}}function P(a,e,t){let r=!1,o="50% 50%",s=!0,n=2e3,l=[],c=[],i=0,f=0,m=0,h="",p=[],u=[];function d(a){let e=l.findIndex(e=>e.name===a.name);-1===e?(a.count=1,l=[...l,a]):l[e].count=l[e].count+1,localStorage.setItem("ate",JSON.stringify(l)),b(),g(a)}I(async()=>{r="true"===(r=localStorage.getItem("firstTime")||"true"),t("isGoal",s="true"===localStorage.getItem("isGoal")||!1),t("goal",n=localStorage.getItem("goal")||2e3),o=localStorage.getItem("columns")||"50% 50%",c=JSON.parse(localStorage.getItem("food"))||[],t("filteredFood",p=JSON.parse(localStorage.getItem("recentFood")||"[]").sort((a,e)=>a.name>e.name)||[]),u=p,l=JSON.parse(localStorage.getItem("ate"))||[],r&&0===c.length&&(c=[{name:"cup milk 2%",protein:8,carbs:12,fat:4.9},{name:"cup oatmeal",protein:6,carbs:27,fat:3.2},{name:"egg",protein:6,carbs:.6,fat:5},{name:"100g chicken breast",protein:31,carbs:0,fat:3.6},{name:"100g brown rice",protein:2.6,carbs:23,fat:.9},{name:"100g japanese potato",protein:1.4,carbs:37,fat:.2},{name:"avocado",protein:4,carbs:17,fat:29},{name:"half avocado",protein:2,carbs:8.5,fat:14.5},{name:"tbsp olive oil",protein:0,carbs:0,fat:14},{name:"cup cottage cheese 2%",protein:27,carbs:8,fat:6},{name:"100g greek yugurt",protein:10,carbs:3.6,fat:.4},{name:"1 tbsp peanut butter",protein:4,carbs:3,fat:8},{name:"tuna can",protein:39,carbs:0,fat:0},{name:"sardins can",protein:18,carbs:0,fat:11},{name:"5 olives",protein:.1,carbs:.5,fat:2},{name:"scoop protein powder",protein:20,carbs:5,fat:2},{name:"150g drum sticks",protein:1,carbs:5.8,fat:3},{name:"apple",protein:1,carbs:5.8,fat:3},{name:"100g salmon",protein:1,carbs:5.8,fat:3},{name:"100g steak",protein:1,carbs:5.8,fat:3},{name:"egg white",protein:1,carbs:5.8,fat:3},{name:"tuna fresh",protein:1,carbs:5.8,fat:3},{name:"100g chicken thighs",protein:1,carbs:5.8,fat:3}],localStorage.setItem("firstTime","false"),localStorage.setItem("isGoal","true"),localStorage.setItem("food",JSON.stringify(c)),localStorage.setItem("recentFood",JSON.stringify(c)),t("filteredFood",p=c)),b()});const g=a=>{let e=u.filter(function(e,t,r){return e.name!==a.name});e.unshift(a),e.length>20&&e.splice(-1,1),localStorage.setItem("recentFood",JSON.stringify(e))},b=a=>{t("protein",i=l.reduce(function(a,e){return a+e.protein*e.count},0)),t("carbs",f=l.reduce(function(a,e){return a+e.carbs*e.count},0)),t("fat",m=l.reduce(function(a,e){return a+e.fat*e.count},0))};let v,S;return a.$$.update=((a={protein:1,carbs:1,fat:1,goal:1,calories:1})=>{(a.protein||a.carbs||a.fat)&&t("calories",S=parseFloat(Number(4*i+4*f+9*m).toFixed(1))),(a.goal||a.calories)&&t("remaining",v=n-S<=0?"remaining":"")}),{isGoal:s,goal:n,protein:i,carbs:f,fat:m,filter:h,filteredFood:p,handleFilter:function(){t("filteredFood",p=""!==h?c.filter(a=>a.name.toLowerCase().includes(h.toLowerCase())):u)},handleFoodClick:d,remaining:v,calories:S,input_input_handler:function(){h=this.value,t("filter",h)},click_handler:({i:a})=>d(p[a])}}export default class extends a{constructor(a){super(),e(this,a,P,k,t,{})}}
