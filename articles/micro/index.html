<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>README</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.5.1/github-markdown.min.css">
<style>
	body {
		font-size: 1.5em;
	}
	.markdown-body {
		box-sizing: border-box;
		min-width: 200px;
		max-width: 980px;
		margin: 0 auto;
		padding: 45px;
		background-color: white;
		color: #333;
		font-size: 0.8em;
	}

	@media (max-width: 767px) {
		.markdown-body {
			padding: 15px;
		}
	}
</style>
</head>
<body data-color-mode="light" data-light-theme="light">
<p><a href="https://oren.github.io">Oren Home</a> &gt; <a href="https://oren.github.io/articles/">Articles</a></p>

<article class="markdown-body">
<p><meta property="og:title" content="Microservices with Go Micro and NATS" />
<meta property="og:image" content="images/micro.jpg" /></p>

<h1>Microservices with Go Micro and NATS</h1>

<p><img src="micro.gif" alt="micro" /></p>

<p><a href="https://github.com/micro/micro">Micro</a> is a set of utilities and libraries that makes it easier to write and manage microservices.
It was written and maintained by <a href="https://twitter.com/chuhnk">Asim Aslam</a>, a developer from London who is getting help from an enthusiastic community.</p>

<p>A microservice written for micro can be written in any language but it&rsquo;s easier to write it in Go (until ports of Micro will be available in other languages). For non-Go microservices, there exists the <a href="https://github.com/micro/micro/tree/master/car">Sidecar</a> (an HTTP proxy into the microservice) to handle this situation.</p>

<p>Microservices often typically communicate with JSON but micro uses <a href="https://github.com/google/protobuf">protobuf</a> encoding by default. Protobufs offer solid serialization capabilities, static types, and can be used to also declare the API of a specific microservice.</p>

<p>By default the messages are sent over HTTP but a message broker (RabbitMQ, Kafka, NSQ, etc) can allow improvements on top of this such as persistence, scalability or reliability. In this case we use <a href="https://nats.io">NATS</a> since it&rsquo;s very simple, fast and lean. It also has enough functionality to act as transport, broker and registry (the latter due to its broadcast queries). More information can be found at <a href="https://blog.micro.mu/2016/04/11/micro-on-nats.html">Asim&rsquo;s blogpost</a>.</p>

<p><a href="https://github.com/nii236">John Nguyen</a>, an Australian developer, uses Micro to collect and visualize financial instruments (Bitcoin and foreign exchange). I asked him to demo his setup and we recorded it in a 30 minute video:</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/b_Ivq2GYlI4" frameborder="0" allowfullscreen></iframe>

<h2>Agenda</h2>

<ul>
<li><a href="http://www.youtube.com/watch?v=b_Ivq2GYlI4">0:00</a> Overview of Micro and NATS</li>
<li><a href="http://www.youtube.com/watch?v=b_Ivq2GYlI4&amp;t=8m00s">8:00</a> Demo</li>
<li><a href="http://www.youtube.com/watch?v=b_Ivq2GYlI4&amp;t=16m17s">16:17</a> Publishing a message to NATS</li>
<li><a href="http://www.youtube.com/watch?v=b_Ivq2GYlI4&amp;t=23m50s">23:50</a> Code of a publisher and a subscriber</li>
<li><a href="http://www.youtube.com/watch?v=b_Ivq2GYlI4&amp;t=27m44s">27:44</a> protobuf</li>
<li><a href="http://www.youtube.com/watch?v=b_Ivq2GYlI4&amp;t=29m03s">29:03</a> Python subscriber</li>
<li><a href="http://www.youtube.com/watch?v=b_Ivq2GYlI4&amp;t=31m31s">31:31</a> Persistance with project STAN</li>
</ul>

<p><br/></p>

<h2>Links</h2>

<ul>
<li><a href="https://github.com/micro/micro">Micro</a> - tools for <strong>managing</strong> microservices</li>
<li><a href="https://github.com/micro/go-micro">Go Micro</a> - libraries for <strong>writing</strong> microservices</li>
<li><a href="https://github.com/nii236/nii-finance">Git repo of this demo</a></li>
<li><a href="https://skillsmatter.com/skillscasts/8340-london-go-usergroup#video">Recorded presentation</a> by Asim at the Go London User Group</li>
<li><a href="http://gokit.io/">Go kit</a> - an alternative framework for managing microservices</li>
</ul>

</article>
</body>
</html>